(()=>{"use strict";var e={121:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarsApiService=void 0;const r=n(567),i=n(147);t.CarsApiService=class{static getAllCars(){return i.ApiService.get(r.Path.garage)}static createCar(e,t){return i.ApiService.post(r.Path.garage,e,t)}static getCar(e){return i.ApiService.get(`${r.Path.garage}/${e}`)}static deleteCar(e){return i.ApiService.delete(`${r.Path.garage}/${e}`)}static updateCar(e,t,n){return i.ApiService.put(`${r.Path.garage}/${e}`,t,n)}static getPagination(e,t){return i.ApiService.getPages(`${r.Path.garage}?_page=${e}&${t.key}=${t.value}`)}static onEnginCar(e,t){return i.ApiService.runEngine(`${r.Path.engine}?id=${e}&status=${t}`)}static onRunCar(e,t){return i.ApiService.runEngine(`${r.Path.engine}?id=${e}&status=${t}`)}}},147:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiService=void 0;class n{static async fetchRequest(e,t,n,r){const i=`${this.baseUrl}${e}`,s=await fetch(i,{method:t,body:n?JSON.stringify(n):null,headers:r});return await s.json()}static delete(e){return this.fetchRequest(e,"DELETE")}static get(e){return this.fetchRequest(e,"GET")}static post(e,t,n){return this.fetchRequest(e,"POST",t,n)}static put(e,t,n){return this.fetchRequest(e,"PUT",t,n)}static getPages(e){return this.fetchRequest(e,"GET")}static runEngine(e){return this.fetchRequest(e,"PATCH")}static sort(e){return this.fetchRequest(e,"GET")}}t.ApiService=n,n.baseUrl="http://127.0.0.1:3000/"},116:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiWinnersService=void 0;const r=n(567),i=n(147);t.ApiWinnersService=class{static getAllWin(){return i.ApiService.get(r.Path.winners)}static createWin(e,t){return i.ApiService.post(r.Path.winners,e,t)}static getWin(e){return i.ApiService.get(`${r.Path.winners}/${e}`)}static deleteWin(e){return i.ApiService.delete(`${r.Path.winners}/${e}`)}static updateWin(e,t,n){return i.ApiService.put(`${r.Path.winners}/${e}`,t,n)}static getPagination(e,t){return i.ApiService.getPages(`${r.Path.winners}?_page=${e}&${t.key}=${t.value}`)}static sortWin(e,t,n,s){return i.ApiService.sort(`${r.Path.winners}?_page=${e}&${t.key}=${t.value}&_sort=${n}&_order=${s}`)}}},77:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=n(199),i=n(198),s=n(796),a=n(125),o=n(423);class c extends o.View{constructor(){super(...arguments),this.header=new r.Header(this.emitter),this.garage=new i.Garage(this.emitter),this.winners=new s.Winners(this.emitter),this.cars=new a.Cars(this.emitter),this.routes=[{title:"garage",url:"garage"},{title:"winners",url:"winners"}],this.routeElemetns=[this.garage,this.winners]}appendElement(e){this.wrapper=super.renderElement("div","main-wrapper"),e.append(this.wrapper),this.garage.appendElement(this.wrapper),this.cars.appendElement(this.garage.wrapper),this.emitter.subscribe("routeChanged",(e=>this.onChangeRoute(e))),this.header.appendElement(this.wrapper),this.winners.appendElement(this.wrapper)}onChangeRoute(e){const t=this.routeElemetns.find((t=>t.url===e.url)),n=this.routeElemetns.find((t=>t.url!==e.url));t?.show(),n?.hide()}}t.App=c},125:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cars=void 0;const r=n(423),i=n(567),s=n(121),a=n(116),o={key:"_limit",value:7};class c extends r.View{constructor(e){super(e),this.emitter=e,this.currentPage=localStorage.getItem("currentPage")?Number(localStorage.getItem("currentPage")):1,this.getCars(this.currentPage),this.onSub(),this.getCarsQty()}async getCarsQty(){const e=await s.CarsApiService.getAllCars();this.qtyCars=e.length,this.carsNumbers.textContent=String(this.qtyCars)}async getCars(e=1){const t=(await fetch(`http://127.0.0.1:3000/garage?_page=${e}&_limit=${o.value}`,{method:"GET"})).headers.get("X-Total-Count");this.dataCars=await s.CarsApiService.getPagination(e,o),0===this.dataCars.length&&(this.currentPage=Number(t)/o.value<1?1:Math.round(Number(t)/o.value),this.dataCars=await s.CarsApiService.getPagination(this.currentPage,o)),this.pageNumbers.textContent=String(this.currentPage),this.renderCars(this.dataCars)}appendElement(e){this.carListWrapper=super.renderElement("div","cars-list-wrapper"),this.carsWrapper=super.renderElement("div","cars-pagination"),this.garageSubtitle=super.renderElement("h3","title",{textContent:"Garage #"}),this.carsNumbers=super.renderElement("span","title"),this.pageSubtitle=super.renderElement("h4","subtitle-page",{textContent:"Pages #"}),this.pageNumbers=super.renderElement("span","subtitle-page");const t=super.renderElement("div","page-wrapper");this.prevBtn=super.renderElement("button","prev-btn btn",{textContent:"prev"}),this.nextBtn=super.renderElement("button","next-btn btn",{textContent:"next"}),this.carsWrapper.append(this.garageSubtitle,t),t.append(this.pageSubtitle,this.prevBtn,this.nextBtn),this.garageSubtitle.append(this.carsNumbers),this.pageSubtitle.append(this.pageNumbers),e.append(this.carsWrapper),e.append(this.carListWrapper),this.nextBtn.addEventListener("click",this.nextPage.bind(this)),this.prevBtn.addEventListener("click",this.prevPage.bind(this))}renderCars(e){e.forEach((e=>{setTimeout((()=>{const t=super.renderElement("div","race-container",{id:e.id}),n=super.renderElement("div","car-container"),r=super.renderElement("div","row1"),i=super.renderElement("div","row2"),s=super.renderElement("div","engine-btn-box"),a=super.renderElement("button","select-btn btn",{textContent:"select"}),o=super.renderElement("button","remove-btn btn",{textContent:"remove"});this.startCar=super.renderElement("button","start-btn engine-btn",{textContent:"A"}),this.stopCar=super.renderElement("button","stop-btn engine-btn disabled",{textContent:"B"}),this.stopCar.disabled=!0,this.carName=super.renderElement("h5","car-name",{textContent:e.name}),this.carImgBox=super.renderElement("div","car-img-box"),this.carImgBox.innerHTML='<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n    width="1280.000000pt" height="806.000000pt" viewBox="0 0 1280.000000 806.000000"\n    preserveAspectRatio="xMidYMid meet">\n   <g transform="translate(0.000000,806.000000) scale(0.100000,-0.100000)"\n   fill="000000"  stroke="none">\n   <path d="M6845 8050 c-38 -5 -135 -13 -215 -20 -376 -30 -754 -106 -1115 -225\n   -237 -78 -376 -135 -610 -250 -540 -265 -968 -577 -1441 -1050 -254 -254 -407\n   -428 -672 -765 -339 -431 -550 -614 -805 -698 -50 -17 -180 -49 -287 -72 -337\n   -73 -537 -140 -765 -258 -550 -286 -828 -748 -899 -1497 -43 -453 -46 -589\n   -16 -763 52 -304 149 -494 354 -697 122 -122 219 -193 364 -266 l95 -49 180 0\n   180 0 -7 55 c-29 250 -26 448 10 660 113 673 547 1258 1160 1564 908 453 1998\n   218 2641 -570 337 -413 518 -983 474 -1493 -6 -78 -14 -159 -18 -179 l-6 -37\n   1236 0 c680 0 1238 3 1240 7 2 5 -2 55 -9 113 -7 58 -13 163 -14 233 -2 974\n   661 1836 1602 2081 205 54 334 70 553 70 352 0 627 -62 940 -213 558 -270 973\n   -767 1138 -1361 54 -192 70 -318 71 -535 1 -110 -2 -233 -7 -273 l-7 -73 46\n   38 c69 57 177 185 255 301 152 227 241 473 286 792 30 215 22 415 -28 664 -81\n   402 -293 743 -598 963 -2 1 -5 47 -7 100 -4 169 -48 381 -144 698 -122 401\n   -246 659 -497 1028 -214 316 -498 666 -763 940 -102 106 -149 146 -256 216\n   -415 275 -1040 511 -1724 650 -358 73 -691 117 -1085 145 -121 9 -276 20 -345\n   26 -142 11 -381 11 -485 0z m60 -824 c210 -59 384 -203 475 -391 72 -148 73\n   -157 77 -580 5 -414 -7 -727 -32 -851 -30 -146 -100 -259 -189 -307 l-41 -22\n   -1540 -3 c-1145 -2 -1554 0 -1595 9 -121 25 -221 96 -261 182 -24 53 -25 172\n   -3 248 61 205 310 536 693 920 108 107 246 235 306 283 412 330 803 488 1305\n   530 25 2 203 2 395 1 294 -1 360 -4 410 -19z m2060 -91 c152 -34 435 -126 543\n   -176 388 -179 758 -565 982 -1024 146 -300 194 -533 139 -679 -28 -76 -99\n   -139 -186 -166 -63 -19 -92 -20 -991 -20 -924 0 -926 0 -970 21 -51 25 -93 79\n   -119 152 -17 49 -18 107 -18 877 l0 825 23 55 c39 95 78 128 180 151 109 25\n   261 19 417 -16z"/>\n   <path d="M3140 3569 c-718 -69 -1333 -583 -1536 -1285 -51 -174 -66 -310 -62\n   -529 5 -226 25 -344 85 -524 95 -285 238 -508 467 -728 279 -269 600 -421\n   1020 -482 174 -26 238 -26 412 0 355 52 606 152 866 346 343 255 590 642 678\n   1063 63 305 44 631 -55 928 -265 792 -1038 1292 -1875 1211z m359 -939 c201\n   -41 398 -169 516 -335 241 -339 213 -786 -69 -1082 -166 -175 -348 -260 -580\n   -271 -200 -8 -360 35 -517 139 -444 298 -515 911 -150 1302 199 213 506 308\n   800 247z"/>\n   <path d="M9871 3569 c-214 -24 -398 -77 -591 -170 -809 -390 -1201 -1314 -919\n   -2169 189 -575 685 -1030 1274 -1170 108 -26 346 -60 419 -60 81 0 330 37 441\n   65 706 179 1234 772 1330 1492 128 958 -528 1840 -1485 1998 -119 19 -358 27\n   -469 14z m319 -930 c350 -56 635 -330 705 -678 23 -112 16 -294 -15 -401 -67\n   -234 -235 -431 -455 -536 -141 -67 -196 -79 -370 -79 -175 0 -231 13 -371 80\n   -178 86 -313 221 -399 398 -67 139 -79 197 -80 367 0 153 10 210 59 332 107\n   263 365 470 648 517 75 12 202 13 278 0z"/>\n   </g>\n   </svg>\n   ',this.carImgBox.style.fill=e.color,this.flagImg=super.renderElement("div","flag"),t.append(n,this.flagImg),n.append(r,i),r.append(a,o,this.carName),i.append(s,this.carImgBox),s.append(this.startCar,this.stopCar),this.carListWrapper.append(t),a.addEventListener("click",this.onSelectCar.bind(this)),o.addEventListener("click",this.onRemoveCar.bind(this)),this.startCar.addEventListener("click",this.startOneEngin.bind(this)),this.stopCar.addEventListener("click",this.stopOneEngin.bind(this))}),10)}))}async onSelectCar(e){try{const t=this.getIdCar(e),n=await s.CarsApiService.getCar(t);t&&this.emitter.onEmit("onSelectedCar",n)}catch{console.log("😔 cannot select car")}}onSub(){this.emitter.subscribe("onUpdateCar",(e=>this.onUpdateCar(e))),this.emitter.subscribe("onCreatedCar",(()=>this.onCreatedCar())),this.emitter.subscribe("onStartRace",(()=>this.startRace())),this.emitter.subscribe("onStopRace",(()=>this.stopRace()))}async onRemoveCar(e){try{const t=this.getIdCar(e);if(t){const e=await s.CarsApiService.getCar(t);await s.CarsApiService.deleteCar(t),this.getCarsQty(),this.carListWrapper.innerHTML="",this.getCars(this.currentPage),this.emitter.onEmit("clearInputs"),this.emitter.onEmit("onRemove",e)}}catch{console.log("💣 cannot remove car")}}async onUpdateCar(e){try{if((await s.CarsApiService.getCar(e.id)).id){const t=document.getElementById(`${e.id}`)?.children[0].children[1].childNodes[1],n=document.getElementById(`${e.id}`)?.children[0].children[0].childNodes[2];t.style.fill=e.color,n.textContent=e.name,this.carsNumbers.textContent=String(this.qtyCars)}}catch{console.log("car is not exist")}}async onCreatedCar(){this.dataCars=await s.CarsApiService.getPagination(this.currentPage,o),this.carListWrapper.innerHTML="",this.renderCars(this.dataCars),this.getCarsQty()}async nextPage(){try{const e=this.qtyCars/o.value;this.currentPage<e?(this.nextBtn.disabled=!1,this.prevBtn.disabled=!1,this.currentPage+=1,localStorage.setItem("currentPage",String(this.currentPage)),this.pageNumbers.textContent=String(this.currentPage),this.carListWrapper.innerHTML="",this.getCars(this.currentPage)):this.nextBtn.disabled=!0}catch{console.log("👁️👁️cannot get next page")}}async prevPage(){try{const e=1;this.currentPage>e?(this.prevBtn.disabled=!1,this.nextBtn.disabled=!1,this.currentPage-=1,localStorage.setItem("currentPage",String(this.currentPage)),this.pageNumbers.textContent=String(this.currentPage),this.carListWrapper.innerHTML="",this.getCars(this.currentPage)):this.prevBtn.disabled=!0}catch{console.log("👁️👁️cannot get prev page")}}async startOneEngin(e){let t;try{const n=this.getIdCar(e),r=document.getElementById(`${n}`)?.children[0].children[1].childNodes[1],a=await s.CarsApiService.onEnginCar(n,i.Engine.started),o=e.target;this.disableOneButton(o);const c=window.screen.width-this.flagImg.offsetLeft+this.flagImg.offsetWidth;let d=this.carImgBox.offsetLeft-this.carImgBox.offsetWidth+5;const l=window.screen.width-d-c,h=(l-d)/(50*a.velocity/1e3*60);this.emitter.subscribe("onStopCar",(()=>clearInterval(t))),t=setInterval((()=>{d+=h,d>=l&&clearInterval(t),r.style.transform=`translateX(${d}px)`}),16);const p=fetch(`http://127.0.0.1:3000/engine?id=${n}&status=drive`,{method:"PATCH"});return p.then((e=>e.json())).catch((e=>new Error(e))),200!==(await p).status&&clearInterval(t),await p}catch(e){throw clearInterval(t),new Error("💥 Engine is broken")}}async startRaceEngin(e){let t;try{const n=e,r=Date.now(),a=await s.CarsApiService.getCar(n),o=document.getElementById(`${n}`)?.children[0].children[1].childNodes[1],c=await s.CarsApiService.onEnginCar(n,i.Engine.started);this.disableButtons();const d=window.screen.width-this.flagImg.offsetLeft+this.flagImg.offsetWidth;let l=this.carImgBox.offsetLeft-this.carImgBox.offsetWidth+5;const h=window.screen.width-l-d,p=(h-l)/(50*c.velocity/1e3*60);this.emitter.subscribe("onStopCar",(()=>clearInterval(t))),t=setInterval((()=>{if(l+=p,l>=h){const e=Date.now();clearInterval(t),this.winnerTime||(this.winnerTime=+((e-r)/1e3).toFixed(2),this.addWinner(n,this.winnerTime,a.color,a.name),this.showWinMessage(n,a.name,this.winnerTime))}o.style.transform=`translateX(${l}px)`}),16);const u=fetch(`http://127.0.0.1:3000/engine?id=${n}&status=drive`,{method:"PATCH"});return u.then((e=>e.json())).catch((e=>new Error(e))),200!==(await u).status&&clearInterval(t),await u}catch(e){throw clearInterval(t),new Error("💥 Engine is broken")}}async stopOneEngin(e,t){try{const n=e?this.getIdCar(e):t;await s.CarsApiService.onEnginCar(n,i.Engine.stopped),this.emitter.onEmit("onStopCar");const r=document.getElementById(`${n}`)?.children[0].children[1].childNodes[1];r.style.transform="translateX(0px)";const a=document.querySelector(".start-race-btn"),o=e?.target,c=o.previousElementSibling;c.disabled=!1,a&&(a.disabled=!1),a.classList.remove("disabled"),c.classList.remove("disabled");const d=e?.target;d.disabled=!0,d.classList.add("disabled")}catch{}}getIdCar(e){const t=e.target.closest(".race-container");return Number(t?.id)}async startRace(){try{this.disableButtons();const e=[];(await s.CarsApiService.getPagination(this.currentPage,o)).forEach((async t=>{const n=await this.startRaceEngin(t.id);200===n.status&&e.push(n)})),this.winnerTime=0}catch{console.log("🚗 cannot start race ")}}async stopRace(){try{(await s.CarsApiService.getPagination(this.currentPage,o)).forEach((e=>this.stopOneEngin(void 0,e.id))),this.activeteButtons()}catch{console.log("🤓 i was trying to stop rase")}}async addWinner(e,t,n,r){try{const i=(await a.ApiWinnersService.getAllWin()).find((t=>t.carId===e));if(i){console.log("winner update",e),i.wins+=1,i.time=i.time<=t?i.time:t;const n={name:r,wins:i.wins,time:i.time,color:i.color};await a.ApiWinnersService.updateWin(e,n,{"Content-Type":"application/json"})}else{const i={carId:e,time:t,wins:1,color:n,name:r};await a.ApiWinnersService.createWin(i,{"Content-Type":"application/json"})}this.emitter.onEmit("renderWinners")}catch{console.error("Winner is not found")}}showWinMessage(e,t,n){try{const r=super.renderElement("div","popup-wrapper"),i=super.renderElement("div","overlay"),s=super.renderElement("div","win-message",{textContent:`Car id#${e} ${t} is win with time ${n}s`});document.body.append(i),i.append(r),r.append(s);const a=setInterval((()=>{document.querySelector(".overlay")?document.body.removeChild(i):clearInterval(a)}),3e3)}catch{console.log("trysing to delete popup🌚")}}disableButtons(){const e=document.querySelector(".start-race-btn");[...document.querySelectorAll(".start-btn")].forEach((e=>{e.disabled=!0,e.classList.add("disabled")})),e&&(e.disabled=!0),e.classList.add("disabled")}activeteButtons(){const e=document.querySelector(".start-race-btn");[...document.querySelectorAll(".start-btn")].forEach((e=>{e.disabled=!1,e.classList.remove("disabled")})),e&&(e.disabled=!1),e.classList.remove("disabled")}disableOneButton(e){e.disabled=!0,e.classList.add("disabled");const t=e.nextElementSibling;t.disabled=!1,t.classList.remove("disabled"),document.querySelector(".start-race-btn").classList.add("disabled")}}t.Cars=c},504:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this.subscriberMap=new Map}subscribe(e,t){const n=this.subscriberMap.get(e)||[];this.subscriberMap.has(e)?this.subscriberMap.set(e,[...n,t]):this.subscriberMap.set(e,[t])}unsubscribe(e,t){const n=this.subscriberMap.get(e)||[];this.subscriberMap.has(e)&&this.subscriberMap.set(e,n.filter((e=>e!==t)))}onEmit(e,t){const n=this.subscriberMap.get(e);n&&n.forEach((e=>e(t)))}}},198:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Garage=void 0;const r=n(919),i=n(121),s=n(992),a=n(956);class o extends r.RouteElement{constructor(){super(...arguments),this.url="garage"}async appendElement(e){super.render(e),this.createBtn=super.renderElement("button","create-btn btn",{textContent:"create"}),this.updateBtn=super.renderElement("button","update-btn btn",{textContent:"update"}),this.createInput=super.renderElement("select","create-input input"),this.generateModels(),this.updateInput=super.renderElement("input","update-input input"),this.createPicker=super.renderElement("input","create-picker picker",{type:"color"}),this.updatePicker=super.renderElement("input","uodate-picker picker",{type:"color"}),this.startBtn=super.renderElement("button","start-race-btn btn",{textContent:"start"}),this.stopBtn=super.renderElement("button","stop-btn btn",{textContent:"stop"}),this.generateBtn=super.renderElement("button","update-btn btn",{textContent:"generate cars"});const t=super.renderElement("div","controllers-wrapper"),n=super.renderElement("div","create-container garage-input-container"),r=super.renderElement("div","update-container garage-input-container");this.updateInput.disabled=!0,this.updatePicker.disabled=!0,this.updateBtn.disabled=!0;const i=super.renderElement("div","controller-container garage-input-container");this.wrapper.append(t),t.append(n,r,i),n.append(this.createInput,this.createPicker,this.createBtn),r.append(this.updateInput,this.updatePicker,this.updateBtn),i.append(this.startBtn,this.stopBtn,this.generateBtn),this.onUpdateNameCar(),this.updateBtn.addEventListener("click",this.getUpdatedCar.bind(this)),this.createBtn.addEventListener("click",this.onCreateCar.bind(this)),this.generateBtn.addEventListener("click",this.onGenerateCars.bind(this)),this.startBtn.addEventListener("click",this.startRace.bind(this)),this.stopBtn.addEventListener("click",this.stopRace.bind(this)),this.emitter.subscribe("clearInputs",(()=>this.clearInputs()))}onUpdateNameCar(){this.emitter.subscribe("onSelectedCar",(e=>this.updateCar(e)))}updateCar(e){e&&(this.currentUpdateCar=e,console.log("some",e),this.updateInput.value=e.name,this.updatePicker.value=e.color,this.disabledUpdate(!1))}disabledUpdate(e){this.updateInput.disabled=e,this.updatePicker.disabled=e,this.updateBtn.disabled=e}async getUpdatedCar(){try{const{id:e}=this.currentUpdateCar,t={name:this.updateInput.value,color:this.updatePicker.value},n=await i.CarsApiService.updateCar(e,t,{"Content-Type":"application/json"});n.id&&this.emitter.onEmit("onUpdateCar",n),this.emitter.onEmit("onUpdateWinner",n),this.updateInput.value="",this.updatePicker.value="#000000",this.disabledUpdate(!0)}catch{console.log("car is not exist")}}async onCreateCar(){const e={name:this.createInput.value?this.createInput.value:(0,s.createCarName)(),color:this.createPicker.value},t=await i.CarsApiService.createCar(e,{"Content-Type":"application/json"});this.emitter.onEmit("onCreatedCar",t),this.createInput.value="",this.createPicker.value="#000000"}async onGenerateCars(){try{const e=(await i.CarsApiService.getAllCars()).length-1,t=new Array(100).fill("0").map((async()=>{const e={name:(0,s.createCarName)(),color:(0,a.setCarColor)()};return await i.CarsApiService.createCar(e,{"Content-Type":"application/json"}),e}));console.log(t,e);const n=await i.CarsApiService.getAllCars();this.emitter.onEmit("onCreatedCar",n.slice(e+1))}catch{console.log("🫠 cannot generate cars")}}clearInputs(){this.createInput.value="",this.createPicker.value="#000000",this.updateInput.value="",this.updatePicker.value="#000000"}generateModels(){const e=(0,s.selectCarName)();e.unshift(""),e.forEach((e=>{const t=document.createElement("option");t.setAttribute("value",e),t.textContent=e,this.createInput.append(t)}))}startRace(){this.emitter.onEmit("onStartRace")}stopRace(){this.emitter.onEmit("onStopRace")}}t.Garage=o},199:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const r=n(423);class i extends r.View{constructor(){super(...arguments),this.navElements=[],this.routes=[{title:"garage",url:"garage"},{title:"winners",url:"winners"}]}appendElement(e){const t=super.renderElement("header","header"),n=super.renderElement("h1","heading",{textContent:"async-Race"}),r=super.renderElement("div","header-content"),i=super.renderElement("nav","nav");this.subtitle=super.renderElement("h2","subtitle",{textContent:"async-Race"});const s=super.renderElement("div","header__text-wrappter");e.append(t),t.append(n,s,r),r.append(this.subtitle,i),this.routes.forEach((e=>{const t=super.renderElement("a",`${e.title}-link nav-link`,{textContent:e.title});t.setAttribute("url",e.url),this.navElements.push(t),i.append(t)})),this.onChangeRoute(this.routes[0]),i.addEventListener("click",this.changeRoute.bind(this))}onChangeRoute(e){this.subtitle.innerHTML=e.title,this.emitter.onEmit("routeChanged",e)}changeRoute(e){const t=e.target.getAttribute("url"),n=this.routes.find((e=>e.url===t));n&&this.onChangeRoute(n)}}t.Header=i},919:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RouteElement=void 0;const r=n(423);class i extends r.View{constructor(){super(...arguments),this.isShow=!1}render(e){this.parent=e,this.wrapper=document.createElement("section"),this.wrapper.className=`${this.url}-wrapper`,this.wrapper.setAttribute("url",this.url)}show(){this.isShow||(this.isShow=!0,this.parent.appendChild(this.wrapper))}hide(){this.isShow&&(this.isShow=!1,this.parent.removeChild(this.wrapper))}}t.RouteElement=i},992:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.selectCarName=t.createCarName=t.models=t.brand=void 0,t.brand=["Audi","Beta Julieta","BMW","Citroen","Infiniti","Jeep","Kia","Lexus","Nissan","Opel","Volvo"],t.models=["A4","X2","CEED","CERATO","RIO","GENESIS","GETZ","GRANDEUR","MATRIX","XCENT","Alfa Romeo"],t.createCarName=()=>{const e=Math.floor(Math.random()*t.models.length),n=Math.floor(Math.random()*t.brand.length);return`${t.brand[n]} ${t.models[e]} `},t.selectCarName=()=>Array(6).fill("").map((()=>`${t.brand[Math.floor(Math.random()*t.brand.length)]} ${t.models[Math.floor(Math.random()*t.models.length)]}`)),console.log()},956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setCarColor=void 0;const n=()=>{const e=Math.floor(255*Math.random()).toString(16);return 2===e.length?e:e.padStart(2,"0")};t.setCarColor=()=>`#${n()}${n()}${n()}`},567:(e,t)=>{var n,r,i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.SortOrderWinner=t.SortWinner=t.Engine=t.Path=void 0,function(e){e.garage="garage",e.engine="engine",e.winners="winners"}(n||(t.Path=n={})),function(e){e.started="started",e.stopped="stopped",e.drive="drive"}(r||(t.Engine=r={})),function(e){e.id="id",e.wins="wins",e.time="time"}(i||(t.SortWinner=i={})),function(e){e.ASC="ASC",e.DESC="DESC"}(s||(t.SortOrderWinner=s={}))},423:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0,t.View=class{constructor(e){this.emitter=e}renderElement(e,t,n){const r=document.createElement(e);return t&&(r.className=t),n&&Object.assign(r,n),r}}},796:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Winners=void 0;const r=n(567),i=n(919),s=n(116),a={key:"_limit",value:10};class o extends i.RouteElement{constructor(e){super(e),this.emitter=e,this.url="winners",this.currentWinnerPage=localStorage.getItem("currentPageWinner")?Number(localStorage.getItem("currentPageWinner")):1,this.getAllWinnersPagination(this.currentWinnerPage),this.onSubWin(),this.getWinnersQty()}async getWinnersQty(){const e=await s.ApiWinnersService.getAllWin();this.qtyWins=e.length,this.carsNumbers.textContent=String(this.qtyWins)}appendElement(e){super.render(e),this.nextBtn=super.renderElement("button","next-btn btn win-page-btn",{textContent:"next"}),this.prevBtn=super.renderElement("button","prev-btn btn win-page-btn",{textContent:"prev"});const t=super.renderElement("div","wrapper-page_controller");this.winnnersHeader=super.renderElement("h3","title",{textContent:"Winners #"}),this.carsNumbers=super.renderElement("span","title"),this.pageNumbers=super.renderElement("h4","subtitle-page",{textContent:"Pages(here number)"}),this.tableContainer=super.renderElement("div","table-container"),this.winTableHead=super.renderElement("div","table-head table-row"),this.idWin=super.renderElement("span","table-id-winner",{textContent:"Number"}),this.carImgWin=super.renderElement("span","table-img-winner",{textContent:"Car"}),this.carNameWin=super.renderElement("span","table-name-winner",{textContent:"Name"}),this.numbnerWins=super.renderElement("span","table-numbers-wins",{textContent:"Wins"}),this.timeWin=super.renderElement("span","table-time-wins",{textContent:"Best time"}),this.wrapper.append(this.winnnersHeader,t,this.tableContainer),this.winnnersHeader.append(this.carsNumbers),t.append(this.pageNumbers,this.prevBtn,this.nextBtn),this.tableContainer.append(this.winTableHead),this.winTableHead.append(this.idWin,this.carImgWin,this.carNameWin,this.numbnerWins,this.timeWin),this.numbnerWins.addEventListener("click",this.sortByQtyWins.bind(this)),this.timeWin.addEventListener("click",this.sortByTime.bind(this)),this.nextBtn.addEventListener("click",this.nextPage.bind(this)),this.prevBtn.addEventListener("click",this.prevPage.bind(this))}async getAllWinnersPagination(e=1){this.dataWinners=await s.ApiWinnersService.getPagination(e,a),0===this.dataWinners.length&&(this.currentWinnerPage-=1,this.dataWinners=await s.ApiWinnersService.getPagination(this.currentWinnerPage,a)),this.pageNumbers.textContent=String(this.currentWinnerPage),this.renderWinner(this.dataWinners)}renderWinner(e){this.contentTable=super.renderElement("div","table-content"),this.contentTable.innerHTML="",this.tableContainer.append(this.contentTable),e.forEach(((e,t)=>{const n=super.renderElement("div","table-head table-row"),r=super.renderElement("span","table-id-winner",{textContent:`${t+1}`}),i=super.renderElement("span","table-img-winner",{textContent:e.color}),s=super.renderElement("span","table-name-winner",{textContent:e.name}),a=super.renderElement("span","table-numbers-wins",{textContent:e.wins}),o=super.renderElement("span","table-time-wins",{textContent:e.time});i.innerHTML='<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n    width="1280.000000pt" height="806.000000pt" viewBox="0 0 1280.000000 806.000000"\n    preserveAspectRatio="xMidYMid meet">\n   <g transform="translate(0.000000,806.000000) scale(0.100000,-0.100000)"\n   fill="000000"  stroke="none">\n   <path d="M6845 8050 c-38 -5 -135 -13 -215 -20 -376 -30 -754 -106 -1115 -225\n   -237 -78 -376 -135 -610 -250 -540 -265 -968 -577 -1441 -1050 -254 -254 -407\n   -428 -672 -765 -339 -431 -550 -614 -805 -698 -50 -17 -180 -49 -287 -72 -337\n   -73 -537 -140 -765 -258 -550 -286 -828 -748 -899 -1497 -43 -453 -46 -589\n   -16 -763 52 -304 149 -494 354 -697 122 -122 219 -193 364 -266 l95 -49 180 0\n   180 0 -7 55 c-29 250 -26 448 10 660 113 673 547 1258 1160 1564 908 453 1998\n   218 2641 -570 337 -413 518 -983 474 -1493 -6 -78 -14 -159 -18 -179 l-6 -37\n   1236 0 c680 0 1238 3 1240 7 2 5 -2 55 -9 113 -7 58 -13 163 -14 233 -2 974\n   661 1836 1602 2081 205 54 334 70 553 70 352 0 627 -62 940 -213 558 -270 973\n   -767 1138 -1361 54 -192 70 -318 71 -535 1 -110 -2 -233 -7 -273 l-7 -73 46\n   38 c69 57 177 185 255 301 152 227 241 473 286 792 30 215 22 415 -28 664 -81\n   402 -293 743 -598 963 -2 1 -5 47 -7 100 -4 169 -48 381 -144 698 -122 401\n   -246 659 -497 1028 -214 316 -498 666 -763 940 -102 106 -149 146 -256 216\n   -415 275 -1040 511 -1724 650 -358 73 -691 117 -1085 145 -121 9 -276 20 -345\n   26 -142 11 -381 11 -485 0z m60 -824 c210 -59 384 -203 475 -391 72 -148 73\n   -157 77 -580 5 -414 -7 -727 -32 -851 -30 -146 -100 -259 -189 -307 l-41 -22\n   -1540 -3 c-1145 -2 -1554 0 -1595 9 -121 25 -221 96 -261 182 -24 53 -25 172\n   -3 248 61 205 310 536 693 920 108 107 246 235 306 283 412 330 803 488 1305\n   530 25 2 203 2 395 1 294 -1 360 -4 410 -19z m2060 -91 c152 -34 435 -126 543\n   -176 388 -179 758 -565 982 -1024 146 -300 194 -533 139 -679 -28 -76 -99\n   -139 -186 -166 -63 -19 -92 -20 -991 -20 -924 0 -926 0 -970 21 -51 25 -93 79\n   -119 152 -17 49 -18 107 -18 877 l0 825 23 55 c39 95 78 128 180 151 109 25\n   261 19 417 -16z"/>\n   <path d="M3140 3569 c-718 -69 -1333 -583 -1536 -1285 -51 -174 -66 -310 -62\n   -529 5 -226 25 -344 85 -524 95 -285 238 -508 467 -728 279 -269 600 -421\n   1020 -482 174 -26 238 -26 412 0 355 52 606 152 866 346 343 255 590 642 678\n   1063 63 305 44 631 -55 928 -265 792 -1038 1292 -1875 1211z m359 -939 c201\n   -41 398 -169 516 -335 241 -339 213 -786 -69 -1082 -166 -175 -348 -260 -580\n   -271 -200 -8 -360 35 -517 139 -444 298 -515 911 -150 1302 199 213 506 308\n   800 247z"/>\n   <path d="M9871 3569 c-214 -24 -398 -77 -591 -170 -809 -390 -1201 -1314 -919\n   -2169 189 -575 685 -1030 1274 -1170 108 -26 346 -60 419 -60 81 0 330 37 441\n   65 706 179 1234 772 1330 1492 128 958 -528 1840 -1485 1998 -119 19 -358 27\n   -469 14z m319 -930 c350 -56 635 -330 705 -678 23 -112 16 -294 -15 -401 -67\n   -234 -235 -431 -455 -536 -141 -67 -196 -79 -370 -79 -175 0 -231 13 -371 80\n   -178 86 -313 221 -399 398 -67 139 -79 197 -80 367 0 153 10 210 59 332 107\n   263 365 470 648 517 75 12 202 13 278 0z"/>\n   </g>\n   </svg>\n   ',i.style.fill=e.color,this.contentTable.append(n),n.append(r,i,s,a,o)}))}async nextPage(){const e=this.qtyWins/a.value;if(this.currentWinnerPage<e){this.nextBtn.disabled=!1,this.prevBtn.disabled=!1,this.currentWinnerPage+=1,localStorage.setItem("currentPageWinner",String(this.currentWinnerPage)),this.pageNumbers.textContent=String(this.currentWinnerPage),this.contentTable.innerHTML="";const e=await this.getAllWinnersPagination(this.currentWinnerPage);console.log(e)}else this.nextBtn.disabled=!0}async prevPage(){this.currentWinnerPage>1?(this.currentWinnerPage-=1,localStorage.setItem("currentPageWinner",String(this.currentWinnerPage)),this.pageNumbers.textContent=String(this.currentWinnerPage),this.contentTable.innerHTML="",await this.getAllWinnersPagination(this.currentWinnerPage)):this.prevBtn.disabled=!0}onSubWin(){this.emitter.subscribe("onRemove",(e=>this.onRemoveWin(e))),this.emitter.subscribe("renderWinners",(()=>{this.contentTable.innerHTML="",this.getAllWinnersPagination(this.currentWinnerPage)}))}async onRemoveWin(e){if(e){const{id:t}=e,n=(await s.ApiWinnersService.getAllWin()).find((e=>e.carId===t));console.log("winnerToDelete",n),n&&await s.ApiWinnersService.deleteWin(n.id),this.getWinnersQty(),this.contentTable.innerHTML="",this.getAllWinnersPagination(this.currentWinnerPage)}}async sortByQtyWins(){try{if("Wins ⬇️"===this.numbnerWins.textContent){const e=await s.ApiWinnersService.sortWin(this.currentWinnerPage,a,r.SortWinner.wins,r.SortOrderWinner.DESC);this.numbnerWins.textContent="Wins ⬆️",this.contentTable.innerHTML="",this.renderWinner(e)}else{const e=await s.ApiWinnersService.sortWin(this.currentWinnerPage,a,r.SortWinner.wins,r.SortOrderWinner.ASC);this.numbnerWins.textContent="Wins ⬇️",this.contentTable.innerHTML="",this.renderWinner(e)}}catch{console.log("cannot sort winners😯")}}async sortByTime(){try{if("BestTime ⬇️"===this.timeWin.textContent){const e=await s.ApiWinnersService.sortWin(this.currentWinnerPage,a,r.SortWinner.time,r.SortOrderWinner.DESC);this.timeWin.textContent="BestTime ⬆️",this.contentTable.innerHTML="",this.renderWinner(e)}else{const e=await s.ApiWinnersService.sortWin(this.currentWinnerPage,a,r.SortWinner.time,r.SortOrderWinner.ASC);this.timeWin.textContent="BestTime ⬇️",this.contentTable.innerHTML="",this.renderWinner(e)}}catch{console.log("cannot sort winners 😯")}}}t.Winners=o}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{const e=n(77),t=new(n(504).EventEmitter);new e.App(t).appendElement(document.body)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VixPQUNmLEMsTUNwQkEsTUFBTTZWLEVBQVEsRUFBUSxJQUVoQnpTLEVBQVUsSUFERSxFQUFRLEtBQ0lrTCxjQUNsQixJQUFJdUgsRUFBTXJULElBQUlZLEdBQ3RCUSxjQUFjeUYsU0FBUzdILEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3luYy1yYWNlLy4vc3JjL2NvbXBvbmVudHMvYXBpL2FwaUNhclNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vYXN5bmMtcmFjZS8uL3NyYy9jb21wb25lbnRzL2FwaS9hcGlTZXJ2aWNlLnRzIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvY29tcG9uZW50cy9hcGkvYXBpV2lubmVyc1NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vYXN5bmMtcmFjZS8uL3NyYy9jb21wb25lbnRzL2FwcC50cyIsIndlYnBhY2s6Ly9hc3luYy1yYWNlLy4vc3JjL2NvbXBvbmVudHMvY2FyLnRzIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvY29tcG9uZW50cy9lbWl0dGVyLnRzIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvY29tcG9uZW50cy9nYXJhZ2UudHMiLCJ3ZWJwYWNrOi8vYXN5bmMtcmFjZS8uL3NyYy9jb21wb25lbnRzL2hlYWRlci50cyIsIndlYnBhY2s6Ly9hc3luYy1yYWNlLy4vc3JjL2NvbXBvbmVudHMvcm91dGVzL3JvdXRlLnRzIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvY29tcG9uZW50cy91dGlscy9jYXJzQnJhbmQudHMiLCJ3ZWJwYWNrOi8vYXN5bmMtcmFjZS8uL3NyYy9jb21wb25lbnRzL3V0aWxzL3NldENvbG9yLnRzIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvY29tcG9uZW50cy91dGlscy90eXBlcy50cyIsIndlYnBhY2s6Ly9hc3luYy1yYWNlLy4vc3JjL2NvbXBvbmVudHMvdmlldy50cyIsIndlYnBhY2s6Ly9hc3luYy1yYWNlLy4vc3JjL2NvbXBvbmVudHMvd2lubmVycy50cyIsIndlYnBhY2s6Ly9hc3luYy1yYWNlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNhcnNBcGlTZXJ2aWNlID0gdm9pZCAwO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy90eXBlc1wiKTtcbmNvbnN0IGFwaVNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL2FwaVNlcnZpY2VcIik7XG5jbGFzcyBDYXJzQXBpU2VydmljZSB7XG4gICAgc3RhdGljIGdldEFsbENhcnMoKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5nZXQodHlwZXNfMS5QYXRoLmdhcmFnZSk7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGVDYXIodHJhbnNmZXIsIGhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIGFwaVNlcnZpY2VfMS5BcGlTZXJ2aWNlLnBvc3QodHlwZXNfMS5QYXRoLmdhcmFnZSwgdHJhbnNmZXIsIGhlYWRlcnMpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0Q2FyKGlkQ2FyKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5nZXQoYCR7dHlwZXNfMS5QYXRoLmdhcmFnZX0vJHtpZENhcn1gKTtcbiAgICB9XG4gICAgc3RhdGljIGRlbGV0ZUNhcihpZENhcikge1xuICAgICAgICByZXR1cm4gYXBpU2VydmljZV8xLkFwaVNlcnZpY2UuZGVsZXRlKGAke3R5cGVzXzEuUGF0aC5nYXJhZ2V9LyR7aWRDYXJ9YCk7XG4gICAgfVxuICAgIHN0YXRpYyB1cGRhdGVDYXIoaWRDYXIsIHRyYW5zZmVyLCBoZWFkZXJzKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5wdXQoYCR7dHlwZXNfMS5QYXRoLmdhcmFnZX0vJHtpZENhcn1gLCB0cmFuc2ZlciwgaGVhZGVycyk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRQYWdpbmF0aW9uKHZhbHVlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gYXBpU2VydmljZV8xLkFwaVNlcnZpY2UuZ2V0UGFnZXMoYCR7dHlwZXNfMS5QYXRoLmdhcmFnZX0/X3BhZ2U9JHt2YWx1ZX0mJHtsaW1pdC5rZXl9PSR7bGltaXQudmFsdWV9YCk7XG4gICAgfVxuICAgIHN0YXRpYyBvbkVuZ2luQ2FyKGlkQ2FyLCBzdGF0dXMpIHtcbiAgICAgICAgcmV0dXJuIGFwaVNlcnZpY2VfMS5BcGlTZXJ2aWNlLnJ1bkVuZ2luZShgJHt0eXBlc18xLlBhdGguZW5naW5lfT9pZD0ke2lkQ2FyfSZzdGF0dXM9JHtzdGF0dXN9YCk7XG4gICAgfVxuICAgIHN0YXRpYyBvblJ1bkNhcihpZENhciwgc3RhdHVzKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5ydW5FbmdpbmUoYCR7dHlwZXNfMS5QYXRoLmVuZ2luZX0/aWQ9JHtpZENhcn0mc3RhdHVzPSR7c3RhdHVzfWApO1xuICAgIH1cbn1cbmV4cG9ydHMuQ2Fyc0FwaVNlcnZpY2UgPSBDYXJzQXBpU2VydmljZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BcGlTZXJ2aWNlID0gdm9pZCAwO1xuY2xhc3MgQXBpU2VydmljZSB7XG4gICAgc3RhdGljIGFzeW5jIGZldGNoUmVxdWVzdChwYWdlLCBtZXRob2QsIGJvZHksIGhlYWRlcnMpIHtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7cGFnZX1gO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgYm9keTogYm9keSA/IEpTT04uc3RyaW5naWZ5KGJvZHkpIDogbnVsbCxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgc3RhdGljIGRlbGV0ZShlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChlbGVtZW50LCAnREVMRVRFJyk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QoZWxlbWVudCwgJ0dFVCcpO1xuICAgIH1cbiAgICBzdGF0aWMgcG9zdChlbGVtZW50LCBib2R5LCBoZWFkZXJzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChlbGVtZW50LCAnUE9TVCcsIGJvZHksIGhlYWRlcnMpO1xuICAgIH1cbiAgICBzdGF0aWMgcHV0KGVsZW1lbnQsIGJvZHksIGhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0KGVsZW1lbnQsICdQVVQnLCBib2R5LCBoZWFkZXJzKTtcbiAgICB9XG4gICAgc3RhdGljIGdldFBhZ2VzKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0KGVsZW1lbnQsICdHRVQnKTtcbiAgICB9XG4gICAgc3RhdGljIHJ1bkVuZ2luZShlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChlbGVtZW50LCAnUEFUQ0gnKTtcbiAgICB9XG4gICAgc3RhdGljIHNvcnQoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QoZWxlbWVudCwgJ0dFVCcpO1xuICAgIH1cbn1cbmV4cG9ydHMuQXBpU2VydmljZSA9IEFwaVNlcnZpY2U7XG5BcGlTZXJ2aWNlLmJhc2VVcmwgPSAnaHR0cDovLzEyNy4wLjAuMTozMDAwLyc7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQXBpV2lubmVyc1NlcnZpY2UgPSB2b2lkIDA7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL3R5cGVzXCIpO1xuY29uc3QgYXBpU2VydmljZV8xID0gcmVxdWlyZShcIi4vYXBpU2VydmljZVwiKTtcbmNsYXNzIEFwaVdpbm5lcnNTZXJ2aWNlIHtcbiAgICBzdGF0aWMgZ2V0QWxsV2luKCkge1xuICAgICAgICByZXR1cm4gYXBpU2VydmljZV8xLkFwaVNlcnZpY2UuZ2V0KHR5cGVzXzEuUGF0aC53aW5uZXJzKTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZVdpbih0cmFuc2ZlciwgaGVhZGVycykge1xuICAgICAgICByZXR1cm4gYXBpU2VydmljZV8xLkFwaVNlcnZpY2UucG9zdCh0eXBlc18xLlBhdGgud2lubmVycywgdHJhbnNmZXIsIGhlYWRlcnMpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0V2luKGlkQ2FyKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5nZXQoYCR7dHlwZXNfMS5QYXRoLndpbm5lcnN9LyR7aWRDYXJ9YCk7XG4gICAgfVxuICAgIHN0YXRpYyBkZWxldGVXaW4oaWRDYXIpIHtcbiAgICAgICAgcmV0dXJuIGFwaVNlcnZpY2VfMS5BcGlTZXJ2aWNlLmRlbGV0ZShgJHt0eXBlc18xLlBhdGgud2lubmVyc30vJHtpZENhcn1gKTtcbiAgICB9XG4gICAgc3RhdGljIHVwZGF0ZVdpbihpZENhciwgdHJhbnNmZXIsIGhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIGFwaVNlcnZpY2VfMS5BcGlTZXJ2aWNlLnB1dChgJHt0eXBlc18xLlBhdGgud2lubmVyc30vJHtpZENhcn1gLCB0cmFuc2ZlciwgaGVhZGVycyk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRQYWdpbmF0aW9uKHZhbHVlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gYXBpU2VydmljZV8xLkFwaVNlcnZpY2UuZ2V0UGFnZXMoYCR7dHlwZXNfMS5QYXRoLndpbm5lcnN9P19wYWdlPSR7dmFsdWV9JiR7bGltaXQua2V5fT0ke2xpbWl0LnZhbHVlfWApO1xuICAgIH1cbiAgICBzdGF0aWMgc29ydFdpbih2YWx1ZSwgbGltaXQsIHR5cGVTb3J0LCBvcmRlcikge1xuICAgICAgICByZXR1cm4gYXBpU2VydmljZV8xLkFwaVNlcnZpY2Uuc29ydChgJHt0eXBlc18xLlBhdGgud2lubmVyc30/X3BhZ2U9JHt2YWx1ZX0mJHtsaW1pdC5rZXl9PSR7bGltaXQudmFsdWV9Jl9zb3J0PSR7dHlwZVNvcnR9Jl9vcmRlcj0ke29yZGVyfWApO1xuICAgIH1cbn1cbmV4cG9ydHMuQXBpV2lubmVyc1NlcnZpY2UgPSBBcGlXaW5uZXJzU2VydmljZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BcHAgPSB2b2lkIDA7XG5jb25zdCBoZWFkZXJfMSA9IHJlcXVpcmUoXCIuL2hlYWRlclwiKTtcbmNvbnN0IGdhcmFnZV8xID0gcmVxdWlyZShcIi4vZ2FyYWdlXCIpO1xuY29uc3Qgd2lubmVyc18xID0gcmVxdWlyZShcIi4vd2lubmVyc1wiKTtcbmNvbnN0IGNhcl8xID0gcmVxdWlyZShcIi4vY2FyXCIpO1xuY29uc3Qgdmlld18xID0gcmVxdWlyZShcIi4vdmlld1wiKTtcbmNsYXNzIEFwcCBleHRlbmRzIHZpZXdfMS5WaWV3IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5oZWFkZXIgPSBuZXcgaGVhZGVyXzEuSGVhZGVyKHRoaXMuZW1pdHRlcik7XG4gICAgICAgIHRoaXMuZ2FyYWdlID0gbmV3IGdhcmFnZV8xLkdhcmFnZSh0aGlzLmVtaXR0ZXIpO1xuICAgICAgICB0aGlzLndpbm5lcnMgPSBuZXcgd2lubmVyc18xLldpbm5lcnModGhpcy5lbWl0dGVyKTtcbiAgICAgICAgdGhpcy5jYXJzID0gbmV3IGNhcl8xLkNhcnModGhpcy5lbWl0dGVyKTtcbiAgICAgICAgdGhpcy5yb3V0ZXMgPSBbXG4gICAgICAgICAgICB7IHRpdGxlOiAnZ2FyYWdlJywgdXJsOiAnZ2FyYWdlJyB9LFxuICAgICAgICAgICAgeyB0aXRsZTogJ3dpbm5lcnMnLCB1cmw6ICd3aW5uZXJzJyB9LFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLnJvdXRlRWxlbWV0bnMgPSBbdGhpcy5nYXJhZ2UsIHRoaXMud2lubmVyc107XG4gICAgfVxuICAgIGFwcGVuZEVsZW1lbnQocGFyZW50KSB7XG4gICAgICAgIHRoaXMud3JhcHBlciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdtYWluLXdyYXBwZXInKTtcbiAgICAgICAgcGFyZW50LmFwcGVuZCh0aGlzLndyYXBwZXIpO1xuICAgICAgICB0aGlzLmdhcmFnZS5hcHBlbmRFbGVtZW50KHRoaXMud3JhcHBlcik7XG4gICAgICAgIHRoaXMuY2Fycy5hcHBlbmRFbGVtZW50KHRoaXMuZ2FyYWdlLndyYXBwZXIpO1xuICAgICAgICB0aGlzLmVtaXR0ZXIuc3Vic2NyaWJlKCdyb3V0ZUNoYW5nZWQnLCAocm91dGUpID0+IHRoaXMub25DaGFuZ2VSb3V0ZShyb3V0ZSkpO1xuICAgICAgICB0aGlzLmhlYWRlci5hcHBlbmRFbGVtZW50KHRoaXMud3JhcHBlcik7XG4gICAgICAgIHRoaXMud2lubmVycy5hcHBlbmRFbGVtZW50KHRoaXMud3JhcHBlcik7XG4gICAgfVxuICAgIG9uQ2hhbmdlUm91dGUocm91dGUpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlUGFnZSA9IHRoaXMucm91dGVFbGVtZXRucy5maW5kKChwYWdlKSA9PiBwYWdlLnVybCA9PT0gcm91dGUudXJsKTtcbiAgICAgICAgY29uc3QgaGlkZGVuUGFnZSA9IHRoaXMucm91dGVFbGVtZXRucy5maW5kKChwYWdlKSA9PiBwYWdlLnVybCAhPT0gcm91dGUudXJsKTtcbiAgICAgICAgYWN0aXZlUGFnZT8uc2hvdygpO1xuICAgICAgICBoaWRkZW5QYWdlPy5oaWRlKCk7XG4gICAgfVxufVxuZXhwb3J0cy5BcHAgPSBBcHA7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ2FycyA9IHZvaWQgMDtcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG5jb25zdCB2aWV3XzEgPSByZXF1aXJlKFwiLi92aWV3XCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL3R5cGVzXCIpO1xuY29uc3QgYXBpQ2FyU2VydmljZV8xID0gcmVxdWlyZShcIi4vYXBpL2FwaUNhclNlcnZpY2VcIik7XG5jb25zdCBhcGlXaW5uZXJzU2VydmljZV8xID0gcmVxdWlyZShcIi4vYXBpL2FwaVdpbm5lcnNTZXJ2aWNlXCIpO1xuY29uc3Qgc3ZnQ2FyID0gYDxzdmcgdmVyc2lvbj1cIjEuMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgIHdpZHRoPVwiMTI4MC4wMDAwMDBwdFwiIGhlaWdodD1cIjgwNi4wMDAwMDBwdFwiIHZpZXdCb3g9XCIwIDAgMTI4MC4wMDAwMDAgODA2LjAwMDAwMFwiXG4gICAgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaWRZTWlkIG1lZXRcIj5cbiAgIDxnIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgwLjAwMDAwMCw4MDYuMDAwMDAwKSBzY2FsZSgwLjEwMDAwMCwtMC4xMDAwMDApXCJcbiAgIGZpbGw9XCIwMDAwMDBcIiAgc3Ryb2tlPVwibm9uZVwiPlxuICAgPHBhdGggZD1cIk02ODQ1IDgwNTAgYy0zOCAtNSAtMTM1IC0xMyAtMjE1IC0yMCAtMzc2IC0zMCAtNzU0IC0xMDYgLTExMTUgLTIyNVxuICAgLTIzNyAtNzggLTM3NiAtMTM1IC02MTAgLTI1MCAtNTQwIC0yNjUgLTk2OCAtNTc3IC0xNDQxIC0xMDUwIC0yNTQgLTI1NCAtNDA3XG4gICAtNDI4IC02NzIgLTc2NSAtMzM5IC00MzEgLTU1MCAtNjE0IC04MDUgLTY5OCAtNTAgLTE3IC0xODAgLTQ5IC0yODcgLTcyIC0zMzdcbiAgIC03MyAtNTM3IC0xNDAgLTc2NSAtMjU4IC01NTAgLTI4NiAtODI4IC03NDggLTg5OSAtMTQ5NyAtNDMgLTQ1MyAtNDYgLTU4OVxuICAgLTE2IC03NjMgNTIgLTMwNCAxNDkgLTQ5NCAzNTQgLTY5NyAxMjIgLTEyMiAyMTkgLTE5MyAzNjQgLTI2NiBsOTUgLTQ5IDE4MCAwXG4gICAxODAgMCAtNyA1NSBjLTI5IDI1MCAtMjYgNDQ4IDEwIDY2MCAxMTMgNjczIDU0NyAxMjU4IDExNjAgMTU2NCA5MDggNDUzIDE5OThcbiAgIDIxOCAyNjQxIC01NzAgMzM3IC00MTMgNTE4IC05ODMgNDc0IC0xNDkzIC02IC03OCAtMTQgLTE1OSAtMTggLTE3OSBsLTYgLTM3XG4gICAxMjM2IDAgYzY4MCAwIDEyMzggMyAxMjQwIDcgMiA1IC0yIDU1IC05IDExMyAtNyA1OCAtMTMgMTYzIC0xNCAyMzMgLTIgOTc0XG4gICA2NjEgMTgzNiAxNjAyIDIwODEgMjA1IDU0IDMzNCA3MCA1NTMgNzAgMzUyIDAgNjI3IC02MiA5NDAgLTIxMyA1NTggLTI3MCA5NzNcbiAgIC03NjcgMTEzOCAtMTM2MSA1NCAtMTkyIDcwIC0zMTggNzEgLTUzNSAxIC0xMTAgLTIgLTIzMyAtNyAtMjczIGwtNyAtNzMgNDZcbiAgIDM4IGM2OSA1NyAxNzcgMTg1IDI1NSAzMDEgMTUyIDIyNyAyNDEgNDczIDI4NiA3OTIgMzAgMjE1IDIyIDQxNSAtMjggNjY0IC04MVxuICAgNDAyIC0yOTMgNzQzIC01OTggOTYzIC0yIDEgLTUgNDcgLTcgMTAwIC00IDE2OSAtNDggMzgxIC0xNDQgNjk4IC0xMjIgNDAxXG4gICAtMjQ2IDY1OSAtNDk3IDEwMjggLTIxNCAzMTYgLTQ5OCA2NjYgLTc2MyA5NDAgLTEwMiAxMDYgLTE0OSAxNDYgLTI1NiAyMTZcbiAgIC00MTUgMjc1IC0xMDQwIDUxMSAtMTcyNCA2NTAgLTM1OCA3MyAtNjkxIDExNyAtMTA4NSAxNDUgLTEyMSA5IC0yNzYgMjAgLTM0NVxuICAgMjYgLTE0MiAxMSAtMzgxIDExIC00ODUgMHogbTYwIC04MjQgYzIxMCAtNTkgMzg0IC0yMDMgNDc1IC0zOTEgNzIgLTE0OCA3M1xuICAgLTE1NyA3NyAtNTgwIDUgLTQxNCAtNyAtNzI3IC0zMiAtODUxIC0zMCAtMTQ2IC0xMDAgLTI1OSAtMTg5IC0zMDcgbC00MSAtMjJcbiAgIC0xNTQwIC0zIGMtMTE0NSAtMiAtMTU1NCAwIC0xNTk1IDkgLTEyMSAyNSAtMjIxIDk2IC0yNjEgMTgyIC0yNCA1MyAtMjUgMTcyXG4gICAtMyAyNDggNjEgMjA1IDMxMCA1MzYgNjkzIDkyMCAxMDggMTA3IDI0NiAyMzUgMzA2IDI4MyA0MTIgMzMwIDgwMyA0ODggMTMwNVxuICAgNTMwIDI1IDIgMjAzIDIgMzk1IDEgMjk0IC0xIDM2MCAtNCA0MTAgLTE5eiBtMjA2MCAtOTEgYzE1MiAtMzQgNDM1IC0xMjYgNTQzXG4gICAtMTc2IDM4OCAtMTc5IDc1OCAtNTY1IDk4MiAtMTAyNCAxNDYgLTMwMCAxOTQgLTUzMyAxMzkgLTY3OSAtMjggLTc2IC05OVxuICAgLTEzOSAtMTg2IC0xNjYgLTYzIC0xOSAtOTIgLTIwIC05OTEgLTIwIC05MjQgMCAtOTI2IDAgLTk3MCAyMSAtNTEgMjUgLTkzIDc5XG4gICAtMTE5IDE1MiAtMTcgNDkgLTE4IDEwNyAtMTggODc3IGwwIDgyNSAyMyA1NSBjMzkgOTUgNzggMTI4IDE4MCAxNTEgMTA5IDI1XG4gICAyNjEgMTkgNDE3IC0xNnpcIi8+XG4gICA8cGF0aCBkPVwiTTMxNDAgMzU2OSBjLTcxOCAtNjkgLTEzMzMgLTU4MyAtMTUzNiAtMTI4NSAtNTEgLTE3NCAtNjYgLTMxMCAtNjJcbiAgIC01MjkgNSAtMjI2IDI1IC0zNDQgODUgLTUyNCA5NSAtMjg1IDIzOCAtNTA4IDQ2NyAtNzI4IDI3OSAtMjY5IDYwMCAtNDIxXG4gICAxMDIwIC00ODIgMTc0IC0yNiAyMzggLTI2IDQxMiAwIDM1NSA1MiA2MDYgMTUyIDg2NiAzNDYgMzQzIDI1NSA1OTAgNjQyIDY3OFxuICAgMTA2MyA2MyAzMDUgNDQgNjMxIC01NSA5MjggLTI2NSA3OTIgLTEwMzggMTI5MiAtMTg3NSAxMjExeiBtMzU5IC05MzkgYzIwMVxuICAgLTQxIDM5OCAtMTY5IDUxNiAtMzM1IDI0MSAtMzM5IDIxMyAtNzg2IC02OSAtMTA4MiAtMTY2IC0xNzUgLTM0OCAtMjYwIC01ODBcbiAgIC0yNzEgLTIwMCAtOCAtMzYwIDM1IC01MTcgMTM5IC00NDQgMjk4IC01MTUgOTExIC0xNTAgMTMwMiAxOTkgMjEzIDUwNiAzMDhcbiAgIDgwMCAyNDd6XCIvPlxuICAgPHBhdGggZD1cIk05ODcxIDM1NjkgYy0yMTQgLTI0IC0zOTggLTc3IC01OTEgLTE3MCAtODA5IC0zOTAgLTEyMDEgLTEzMTQgLTkxOVxuICAgLTIxNjkgMTg5IC01NzUgNjg1IC0xMDMwIDEyNzQgLTExNzAgMTA4IC0yNiAzNDYgLTYwIDQxOSAtNjAgODEgMCAzMzAgMzcgNDQxXG4gICA2NSA3MDYgMTc5IDEyMzQgNzcyIDEzMzAgMTQ5MiAxMjggOTU4IC01MjggMTg0MCAtMTQ4NSAxOTk4IC0xMTkgMTkgLTM1OCAyN1xuICAgLTQ2OSAxNHogbTMxOSAtOTMwIGMzNTAgLTU2IDYzNSAtMzMwIDcwNSAtNjc4IDIzIC0xMTIgMTYgLTI5NCAtMTUgLTQwMSAtNjdcbiAgIC0yMzQgLTIzNSAtNDMxIC00NTUgLTUzNiAtMTQxIC02NyAtMTk2IC03OSAtMzcwIC03OSAtMTc1IDAgLTIzMSAxMyAtMzcxIDgwXG4gICAtMTc4IDg2IC0zMTMgMjIxIC0zOTkgMzk4IC02NyAxMzkgLTc5IDE5NyAtODAgMzY3IDAgMTUzIDEwIDIxMCA1OSAzMzIgMTA3XG4gICAyNjMgMzY1IDQ3MCA2NDggNTE3IDc1IDEyIDIwMiAxMyAyNzggMHpcIi8+XG4gICA8L2c+XG4gICA8L3N2Zz5cbiAgIGA7XG5jb25zdCBzdGFydFBhZ2UgPSAxO1xuY29uc3QgbGltaXQgPSB7XG4gICAga2V5OiAnX2xpbWl0JyxcbiAgICB2YWx1ZTogNyxcbn07XG5jbGFzcyBDYXJzIGV4dGVuZHMgdmlld18xLlZpZXcge1xuICAgIGNvbnN0cnVjdG9yKGVtaXR0ZXIpIHtcbiAgICAgICAgc3VwZXIoZW1pdHRlcik7XG4gICAgICAgIHRoaXMuZW1pdHRlciA9IGVtaXR0ZXI7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudFBhZ2UnKSA/IE51bWJlcihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudFBhZ2UnKSkgOiAxO1xuICAgICAgICB0aGlzLmdldENhcnModGhpcy5jdXJyZW50UGFnZSk7XG4gICAgICAgIHRoaXMub25TdWIoKTtcbiAgICAgICAgdGhpcy5nZXRDYXJzUXR5KCk7XG4gICAgfVxuICAgIGFzeW5jIGdldENhcnNRdHkoKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsQ2FycyA9IGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5nZXRBbGxDYXJzKCk7XG4gICAgICAgIHRoaXMucXR5Q2FycyA9IHRvdGFsQ2Fycy5sZW5ndGg7XG4gICAgICAgIHRoaXMuY2Fyc051bWJlcnMudGV4dENvbnRlbnQgPSBTdHJpbmcodGhpcy5xdHlDYXJzKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q2FycyhwYWdlR2FyYWdlID0gc3RhcnRQYWdlKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChgaHR0cDovLzEyNy4wLjAuMTozMDAwL2dhcmFnZT9fcGFnZT0ke3BhZ2VHYXJhZ2V9Jl9saW1pdD0ke2xpbWl0LnZhbHVlfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0b3RhbFF0eSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ1gtVG90YWwtQ291bnQnKTtcbiAgICAgICAgdGhpcy5kYXRhQ2FycyA9IGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5nZXRQYWdpbmF0aW9uKHBhZ2VHYXJhZ2UsIGxpbWl0KTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YUNhcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gTnVtYmVyKHRvdGFsUXR5KSAvIGxpbWl0LnZhbHVlIDwgMSA/IDEgOiBNYXRoLnJvdW5kKE51bWJlcih0b3RhbFF0eSkgLyBsaW1pdC52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmRhdGFDYXJzID0gYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLmdldFBhZ2luYXRpb24odGhpcy5jdXJyZW50UGFnZSwgbGltaXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFnZU51bWJlcnMudGV4dENvbnRlbnQgPSBTdHJpbmcodGhpcy5jdXJyZW50UGFnZSk7XG4gICAgICAgIHRoaXMucmVuZGVyQ2Fycyh0aGlzLmRhdGFDYXJzKTtcbiAgICB9XG4gICAgYXBwZW5kRWxlbWVudChwYXJlbnQpIHtcbiAgICAgICAgdGhpcy5jYXJMaXN0V3JhcHBlciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdjYXJzLWxpc3Qtd3JhcHBlcicpO1xuICAgICAgICB0aGlzLmNhcnNXcmFwcGVyID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ2NhcnMtcGFnaW5hdGlvbicpO1xuICAgICAgICB0aGlzLmdhcmFnZVN1YnRpdGxlID0gc3VwZXIucmVuZGVyRWxlbWVudCgnaDMnLCAndGl0bGUnLCB7IHRleHRDb250ZW50OiBgR2FyYWdlICNgIH0pO1xuICAgICAgICB0aGlzLmNhcnNOdW1iZXJzID0gc3VwZXIucmVuZGVyRWxlbWVudCgnc3BhbicsICd0aXRsZScpO1xuICAgICAgICB0aGlzLnBhZ2VTdWJ0aXRsZSA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2g0JywgJ3N1YnRpdGxlLXBhZ2UnLCB7IHRleHRDb250ZW50OiAnUGFnZXMgIycgfSk7XG4gICAgICAgIHRoaXMucGFnZU51bWJlcnMgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdzcGFuJywgJ3N1YnRpdGxlLXBhZ2UnKTtcbiAgICAgICAgY29uc3QgcGFnZUNvbnRhaW5lciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdwYWdlLXdyYXBwZXInKTtcbiAgICAgICAgdGhpcy5wcmV2QnRuID0gc3VwZXIucmVuZGVyRWxlbWVudCgnYnV0dG9uJywgJ3ByZXYtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICdwcmV2JyB9KTtcbiAgICAgICAgdGhpcy5uZXh0QnRuID0gc3VwZXIucmVuZGVyRWxlbWVudCgnYnV0dG9uJywgJ25leHQtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICduZXh0JyB9KTtcbiAgICAgICAgdGhpcy5jYXJzV3JhcHBlci5hcHBlbmQodGhpcy5nYXJhZ2VTdWJ0aXRsZSwgcGFnZUNvbnRhaW5lcik7XG4gICAgICAgIHBhZ2VDb250YWluZXIuYXBwZW5kKHRoaXMucGFnZVN1YnRpdGxlLCB0aGlzLnByZXZCdG4sIHRoaXMubmV4dEJ0bik7XG4gICAgICAgIHRoaXMuZ2FyYWdlU3VidGl0bGUuYXBwZW5kKHRoaXMuY2Fyc051bWJlcnMpO1xuICAgICAgICB0aGlzLnBhZ2VTdWJ0aXRsZS5hcHBlbmQodGhpcy5wYWdlTnVtYmVycyk7XG4gICAgICAgIHBhcmVudC5hcHBlbmQodGhpcy5jYXJzV3JhcHBlcik7XG4gICAgICAgIHBhcmVudC5hcHBlbmQodGhpcy5jYXJMaXN0V3JhcHBlcik7XG4gICAgICAgIHRoaXMubmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubmV4dFBhZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMucHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucHJldlBhZ2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHJlbmRlckNhcnMoY2Fycykge1xuICAgICAgICBjYXJzLmZvckVhY2goKGNhcikgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmFjZUNvbnRhaW5lciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdyYWNlLWNvbnRhaW5lcicsIHsgaWQ6IGNhci5pZCB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJDb250YWluZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAnY2FyLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhckJveFJvdzEgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAncm93MScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhckJveFJvdzIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAncm93MicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZ2luZUJ0biA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdlbmdpbmUtYnRuLWJveCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdENhciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2J1dHRvbicsICdzZWxlY3QtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICdzZWxlY3QnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZUNhciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2J1dHRvbicsICdyZW1vdmUtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICdyZW1vdmUnIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRDYXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdidXR0b24nLCAnc3RhcnQtYnRuIGVuZ2luZS1idG4nLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiAnQScsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wQ2FyID0gc3VwZXIucmVuZGVyRWxlbWVudCgnYnV0dG9uJywgJ3N0b3AtYnRuIGVuZ2luZS1idG4gZGlzYWJsZWQnLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiAnQicsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wQ2FyLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhck5hbWUgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdoNScsICdjYXItbmFtZScsIHsgdGV4dENvbnRlbnQ6IGNhci5uYW1lIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FySW1nQm94ID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ2Nhci1pbWctYm94Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXJJbWdCb3guaW5uZXJIVE1MID0gc3ZnQ2FyO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FySW1nQm94LnN0eWxlLmZpbGwgPSBjYXIuY29sb3I7XG4gICAgICAgICAgICAgICAgdGhpcy5mbGFnSW1nID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ2ZsYWcnKTtcbiAgICAgICAgICAgICAgICByYWNlQ29udGFpbmVyLmFwcGVuZChjYXJDb250YWluZXIsIHRoaXMuZmxhZ0ltZyk7XG4gICAgICAgICAgICAgICAgY2FyQ29udGFpbmVyLmFwcGVuZChjYXJCb3hSb3cxLCBjYXJCb3hSb3cyKTtcbiAgICAgICAgICAgICAgICBjYXJCb3hSb3cxLmFwcGVuZChzZWxlY3RDYXIsIHJlbW92ZUNhciwgdGhpcy5jYXJOYW1lKTtcbiAgICAgICAgICAgICAgICBjYXJCb3hSb3cyLmFwcGVuZChlbmdpbmVCdG4sIHRoaXMuY2FySW1nQm94KTtcbiAgICAgICAgICAgICAgICBlbmdpbmVCdG4uYXBwZW5kKHRoaXMuc3RhcnRDYXIsIHRoaXMuc3RvcENhcik7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXJMaXN0V3JhcHBlci5hcHBlbmQocmFjZUNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgc2VsZWN0Q2FyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblNlbGVjdENhci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICByZW1vdmVDYXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uUmVtb3ZlQ2FyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRDYXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnN0YXJ0T25lRW5naW4uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wQ2FyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5zdG9wT25lRW5naW4uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9LCAxMCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBvblNlbGVjdENhcihldmVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldElkQ2FyKGV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ2FyID0gYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLmdldENhcihpZCk7XG4gICAgICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXIub25FbWl0KCdvblNlbGVjdGVkQ2FyJywgc2VsZWN0ZWRDYXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5iUIGNhbm5vdCBzZWxlY3QgY2FyJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TdWIoKSB7XG4gICAgICAgIHRoaXMuZW1pdHRlci5zdWJzY3JpYmUoJ29uVXBkYXRlQ2FyJywgKGNhcikgPT4gdGhpcy5vblVwZGF0ZUNhcihjYXIpKTtcbiAgICAgICAgdGhpcy5lbWl0dGVyLnN1YnNjcmliZSgnb25DcmVhdGVkQ2FyJywgKCkgPT4gdGhpcy5vbkNyZWF0ZWRDYXIoKSk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5zdWJzY3JpYmUoJ29uU3RhcnRSYWNlJywgKCkgPT4gdGhpcy5zdGFydFJhY2UoKSk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5zdWJzY3JpYmUoJ29uU3RvcFJhY2UnLCAoKSA9PiB0aGlzLnN0b3BSYWNlKCkpO1xuICAgIH1cbiAgICBhc3luYyBvblJlbW92ZUNhcihldmVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldElkQ2FyKGV2ZW50KTtcbiAgICAgICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhciA9IGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5nZXRDYXIoaWQpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5kZWxldGVDYXIoaWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2Fyc1F0eSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FyTGlzdFdyYXBwZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDYXJzKHRoaXMuY3VycmVudFBhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlci5vbkVtaXQoJ2NsZWFySW5wdXRzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0dGVyLm9uRW1pdCgnb25SZW1vdmUnLCBjYXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5KjIGNhbm5vdCByZW1vdmUgY2FyJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25VcGRhdGVDYXIobmV3Y2FyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzZWFyY2hDYXIgPSBhd2FpdCBhcGlDYXJTZXJ2aWNlXzEuQ2Fyc0FwaVNlcnZpY2UuZ2V0Q2FyKG5ld2Nhci5pZCk7XG4gICAgICAgICAgICBpZiAoc2VhcmNoQ2FyLmlkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW1nQ2FyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7bmV3Y2FyLmlkfWApPy5jaGlsZHJlblswXS5jaGlsZHJlblsxXS5jaGlsZE5vZGVzWzFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVDYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtuZXdjYXIuaWR9YCk/LmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkTm9kZXNbMl07XG4gICAgICAgICAgICAgICAgaW1nQ2FyLnN0eWxlLmZpbGwgPSBuZXdjYXIuY29sb3I7XG4gICAgICAgICAgICAgICAgbmFtZUNhci50ZXh0Q29udGVudCA9IG5ld2Nhci5uYW1lO1xuICAgICAgICAgICAgICAgIHRoaXMuY2Fyc051bWJlcnMudGV4dENvbnRlbnQgPSBTdHJpbmcodGhpcy5xdHlDYXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2FyIGlzIG5vdCBleGlzdCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uQ3JlYXRlZENhcigpIHtcbiAgICAgICAgdGhpcy5kYXRhQ2FycyA9IGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5nZXRQYWdpbmF0aW9uKHRoaXMuY3VycmVudFBhZ2UsIGxpbWl0KTtcbiAgICAgICAgdGhpcy5jYXJMaXN0V3JhcHBlci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgdGhpcy5yZW5kZXJDYXJzKHRoaXMuZGF0YUNhcnMpO1xuICAgICAgICB0aGlzLmdldENhcnNRdHkoKTtcbiAgICB9XG4gICAgYXN5bmMgbmV4dFBhZ2UoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBtYXhQYWdlID0gdGhpcy5xdHlDYXJzIC8gbGltaXQudmFsdWU7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA8IG1heFBhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlICs9IDE7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRQYWdlJywgU3RyaW5nKHRoaXMuY3VycmVudFBhZ2UpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VOdW1iZXJzLnRleHRDb250ZW50ID0gU3RyaW5nKHRoaXMuY3VycmVudFBhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FyTGlzdFdyYXBwZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDYXJzKHRoaXMuY3VycmVudFBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMubmV4dEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkYHvuI/wn5GB77iPY2Fubm90IGdldCBuZXh0IHBhZ2UnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBwcmV2UGFnZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG1pblBhZ2UgPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPiBtaW5QYWdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSAtPSAxO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50UGFnZScsIFN0cmluZyh0aGlzLmN1cnJlbnRQYWdlKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlTnVtYmVycy50ZXh0Q29udGVudCA9IFN0cmluZyh0aGlzLmN1cnJlbnRQYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhckxpc3RXcmFwcGVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2Fycyh0aGlzLmN1cnJlbnRQYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkYHvuI/wn5GB77iPY2Fubm90IGdldCBwcmV2IHBhZ2UnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxpbmVzLXBlci1mdW5jdGlvblxuICAgIGFzeW5jIHN0YXJ0T25lRW5naW4oZXZlbnQpIHtcbiAgICAgICAgbGV0IGludGVydmFsQW5pbTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRJZENhcihldmVudCk7XG4gICAgICAgICAgICBjb25zdCBpbWdDYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpZH1gKT8uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0uY2hpbGROb2Rlc1sxXTtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZVRvU3RhcnQgPSBhd2FpdCBhcGlDYXJTZXJ2aWNlXzEuQ2Fyc0FwaVNlcnZpY2Uub25FbmdpbkNhcihpZCwgdHlwZXNfMS5FbmdpbmUuc3RhcnRlZCk7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRCdG4gPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVPbmVCdXR0b24odGFyZ2V0QnRuKTtcbiAgICAgICAgICAgIGNvbnN0IGZsYWdEaXN0ID0gd2luZG93LnNjcmVlbi53aWR0aCAtIHRoaXMuZmxhZ0ltZy5vZmZzZXRMZWZ0ICsgdGhpcy5mbGFnSW1nLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgbGV0IGxlZnREaXN0ID0gdGhpcy5jYXJJbWdCb3gub2Zmc2V0TGVmdCAtIHRoaXMuY2FySW1nQm94Lm9mZnNldFdpZHRoICsgNTtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxEaXMgPSB3aW5kb3cuc2NyZWVuLndpZHRoIC0gbGVmdERpc3QgLSBmbGFnRGlzdDsgLy9cbiAgICAgICAgICAgIGNvbnN0IHBhcnREaXMgPSAoZnVsbERpcyAtIGxlZnREaXN0KSAvICgoKGNoYW5nZVRvU3RhcnQudmVsb2NpdHkgKiA1MCkgLyAxMDAwKSAqIDYwKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdHRlci5zdWJzY3JpYmUoJ29uU3RvcENhcicsICgpID0+IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxBbmltKSk7XG4gICAgICAgICAgICBpbnRlcnZhbEFuaW0gPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGVmdERpc3QgKz0gcGFydERpcztcbiAgICAgICAgICAgICAgICBpZiAobGVmdERpc3QgPj0gZnVsbERpcykge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmVtaXR0ZXIuc3Vic2NyaWJlKCdvblN0b3BDYXInLCAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsQW5pbSkpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsQW5pbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGltZ0Nhci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke2xlZnREaXN0fXB4KWA7XG4gICAgICAgICAgICB9LCAxNik7XG4gICAgICAgICAgICBjb25zdCBydW5DYXIgPSBmZXRjaChgaHR0cDovLzEyNy4wLjAuMTozMDAwL2VuZ2luZT9pZD0ke2lkfSZzdGF0dXM9ZHJpdmVgLCB7IG1ldGhvZDogJ1BBVENIJyB9KTtcbiAgICAgICAgICAgIHJ1bkNhci50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpLmNhdGNoKChlcnJvcikgPT4gbmV3IEVycm9yKGVycm9yKSk7XG4gICAgICAgICAgICBjb25zdCBydW5TdGF0dXMgPSAoYXdhaXQgcnVuQ2FyKS5zdGF0dXM7XG4gICAgICAgICAgICBpZiAocnVuU3RhdHVzICE9PSAyMDApXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbEFuaW0pO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJ1bkNhcjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxBbmltKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign8J+SpSBFbmdpbmUgaXMgYnJva2VuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3RhcnRSYWNlRW5naW4oaWRDYXIpIHtcbiAgICAgICAgbGV0IGludGVydmFsQW5pbTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gaWRDYXI7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q2FyID0gYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLmdldENhcihpZCk7XG4gICAgICAgICAgICBjb25zdCBpbWdDYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpZH1gKT8uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0uY2hpbGROb2Rlc1sxXTtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZVRvU3RhcnQgPSBhd2FpdCBhcGlDYXJTZXJ2aWNlXzEuQ2Fyc0FwaVNlcnZpY2Uub25FbmdpbkNhcihpZCwgdHlwZXNfMS5FbmdpbmUuc3RhcnRlZCk7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVCdXR0b25zKCk7XG4gICAgICAgICAgICBjb25zdCBmbGFnRGlzdCA9IHdpbmRvdy5zY3JlZW4ud2lkdGggLSB0aGlzLmZsYWdJbWcub2Zmc2V0TGVmdCArIHRoaXMuZmxhZ0ltZy5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIGxldCBsZWZ0RGlzdCA9IHRoaXMuY2FySW1nQm94Lm9mZnNldExlZnQgLSB0aGlzLmNhckltZ0JveC5vZmZzZXRXaWR0aCArIDU7XG4gICAgICAgICAgICBjb25zdCBmdWxsRGlzID0gd2luZG93LnNjcmVlbi53aWR0aCAtIGxlZnREaXN0IC0gZmxhZ0Rpc3Q7IC8vXG4gICAgICAgICAgICBjb25zdCBwYXJ0RGlzID0gKGZ1bGxEaXMgLSBsZWZ0RGlzdCkgLyAoKChjaGFuZ2VUb1N0YXJ0LnZlbG9jaXR5ICogNTApIC8gMTAwMCkgKiA2MCk7XG4gICAgICAgICAgICB0aGlzLmVtaXR0ZXIuc3Vic2NyaWJlKCdvblN0b3BDYXInLCAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsQW5pbSkpO1xuICAgICAgICAgICAgaW50ZXJ2YWxBbmltID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxlZnREaXN0ICs9IHBhcnREaXM7XG4gICAgICAgICAgICAgICAgaWYgKGxlZnREaXN0ID49IGZ1bGxEaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5lbWl0dGVyLnN1YnNjcmliZSgnb25TdG9wQ2FyJywgKCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbEFuaW0pKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbEFuaW0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMud2lubmVyVGltZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aW5uZXJUaW1lID0gKygoZW5kIC0gc3RhcnQpIC8gMTAwMCkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkV2lubmVyKGlkLCB0aGlzLndpbm5lclRpbWUsIGN1cnJlbnRDYXIuY29sb3IsIGN1cnJlbnRDYXIubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dXaW5NZXNzYWdlKGlkLCBjdXJyZW50Q2FyLm5hbWUsIHRoaXMud2lubmVyVGltZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW1nQ2FyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7bGVmdERpc3R9cHgpYDtcbiAgICAgICAgICAgIH0sIDE2KTtcbiAgICAgICAgICAgIGNvbnN0IHJ1bkNhciA9IGZldGNoKGBodHRwOi8vMTI3LjAuMC4xOjMwMDAvZW5naW5lP2lkPSR7aWR9JnN0YXR1cz1kcml2ZWAsIHsgbWV0aG9kOiAnUEFUQ0gnIH0pO1xuICAgICAgICAgICAgcnVuQ2FyLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkuY2F0Y2goKGVycm9yKSA9PiBuZXcgRXJyb3IoZXJyb3IpKTtcbiAgICAgICAgICAgIGNvbnN0IHJ1blN0YXR1cyA9IChhd2FpdCBydW5DYXIpLnN0YXR1cztcbiAgICAgICAgICAgIGlmIChydW5TdGF0dXMgIT09IDIwMClcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsQW5pbSk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcnVuQ2FyO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbEFuaW0pO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfwn5KlIEVuZ2luZSBpcyBicm9rZW4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzdG9wT25lRW5naW4oZXZlbnQsIGlkQ2FyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGV2ZW50ID8gdGhpcy5nZXRJZENhcihldmVudCkgOiBpZENhcjtcbiAgICAgICAgICAgIGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5vbkVuZ2luQ2FyKGlkLCB0eXBlc18xLkVuZ2luZS5zdG9wcGVkKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdHRlci5vbkVtaXQoJ29uU3RvcENhcicpO1xuICAgICAgICAgICAgY29uc3QgaW1nQ2FyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7aWR9YCk/LmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdLmNoaWxkTm9kZXNbMV07XG4gICAgICAgICAgICBpbWdDYXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoMHB4KSc7XG4gICAgICAgICAgICBjb25zdCBzdGFydFJhY2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RhcnQtcmFjZS1idG4nKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJTdG9wQnRuID0gZXZlbnQ/LnRhcmdldDtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJTdGFydEJ0biA9IGN1cnJTdG9wQnRuLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICBjdXJyU3RhcnRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChzdGFydFJhY2VCdG4pXG4gICAgICAgICAgICAgICAgc3RhcnRSYWNlQnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBzdGFydFJhY2VCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIGN1cnJTdGFydEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgY29uc3Qgc3RvcEJ1dHRvbiA9IGV2ZW50Py50YXJnZXQ7XG4gICAgICAgICAgICBzdG9wQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHN0b3BCdXR0b24uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIC8vIGNvbnN0IHN0b3BCdG4gPSBidG4ubmV4dEVsZW1lbnRTaWJsaW5nIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc3RvcEJ0biwgYnRuKTtcbiAgICAgICAgICAgIC8vIHN0b3BCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIHN0b3BCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn8J+kkyBpIHdhcyB0cnlpbmcgdG8gc3RvcCBjYXInKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRJZENhcihldmVudCkge1xuICAgICAgICBjb25zdCBjdXJyID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBjb25zdCBjYXJDb250ID0gY3Vyci5jbG9zZXN0KCcucmFjZS1jb250YWluZXInKTtcbiAgICAgICAgY29uc3QgaWQgPSBOdW1iZXIoY2FyQ29udD8uaWQpO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0UmFjZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbnMoKTtcbiAgICAgICAgICAgIGNvbnN0IHdpbm5lcnMgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQYWdlQ2FycyA9IGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5nZXRQYWdpbmF0aW9uKHRoaXMuY3VycmVudFBhZ2UsIGxpbWl0KTtcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlQ2Fycy5mb3JFYWNoKGFzeW5jIChjYXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByYWNlQ2FyID0gYXdhaXQgdGhpcy5zdGFydFJhY2VFbmdpbihjYXIuaWQpO1xuICAgICAgICAgICAgICAgIGlmIChyYWNlQ2FyLnN0YXR1cyA9PT0gMjAwKVxuICAgICAgICAgICAgICAgICAgICB3aW5uZXJzLnB1c2gocmFjZUNhcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGltZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfmpcgY2Fubm90IHN0YXJ0IHJhY2UgJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3RvcFJhY2UoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UGFnZUNhcnMgPSBhd2FpdCBhcGlDYXJTZXJ2aWNlXzEuQ2Fyc0FwaVNlcnZpY2UuZ2V0UGFnaW5hdGlvbih0aGlzLmN1cnJlbnRQYWdlLCBsaW1pdCk7XG4gICAgICAgICAgICBjdXJyZW50UGFnZUNhcnMuZm9yRWFjaCgoY2FyKSA9PiB0aGlzLnN0b3BPbmVFbmdpbih1bmRlZmluZWQsIGNhci5pZCkpO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmV0ZUJ1dHRvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+kkyBpIHdhcyB0cnlpbmcgdG8gc3RvcCByYXNlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgYWRkV2lubmVyKGNhcklkLCB0aW1lLCBjb2xvckNhciwgbmFtZUNhcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY2hlY2tXaW5uZXIgPSAoYXdhaXQgYXBpV2lubmVyc1NlcnZpY2VfMS5BcGlXaW5uZXJzU2VydmljZS5nZXRBbGxXaW4oKSkuZmluZCgod2luKSA9PiB3aW4uY2FySWQgPT09IGNhcklkKTtcbiAgICAgICAgICAgIGlmIChjaGVja1dpbm5lcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3aW5uZXIgdXBkYXRlJywgY2FySWQpO1xuICAgICAgICAgICAgICAgIGNoZWNrV2lubmVyLndpbnMgKz0gMTtcbiAgICAgICAgICAgICAgICBjaGVja1dpbm5lci50aW1lID0gY2hlY2tXaW5uZXIudGltZSA8PSB0aW1lID8gY2hlY2tXaW5uZXIudGltZSA6IHRpbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlV2luID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lQ2FyLFxuICAgICAgICAgICAgICAgICAgICB3aW5zOiBjaGVja1dpbm5lci53aW5zLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBjaGVja1dpbm5lci50aW1lLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogY2hlY2tXaW5uZXIuY29sb3IsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcGlXaW5uZXJzU2VydmljZV8xLkFwaVdpbm5lcnNTZXJ2aWNlLnVwZGF0ZVdpbihjYXJJZCwgdXBkYXRlV2luLCB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB3aW5uZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNhcklkLFxuICAgICAgICAgICAgICAgICAgICB0aW1lLFxuICAgICAgICAgICAgICAgICAgICB3aW5zOiAxLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogY29sb3JDYXIsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWVDYXIsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcGlXaW5uZXJzU2VydmljZV8xLkFwaVdpbm5lcnNTZXJ2aWNlLmNyZWF0ZVdpbih3aW5uZXIsIHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdHRlci5vbkVtaXQoJ3JlbmRlcldpbm5lcnMnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdXaW5uZXIgaXMgbm90IGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2hvd1dpbk1lc3NhZ2UoaWQsIG5hbWUsIHRpbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBvcFVwV3JhcHBlciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdwb3B1cC13cmFwcGVyJyk7XG4gICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ292ZXJsYXknKTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VUZXh0ID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ3dpbi1tZXNzYWdlJywge1xuICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiBgQ2FyIGlkIyR7aWR9ICR7bmFtZX0gaXMgd2luIHdpdGggdGltZSAke3RpbWV9c2AsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKG92ZXJsYXkpO1xuICAgICAgICAgICAgb3ZlcmxheS5hcHBlbmQocG9wVXBXcmFwcGVyKTtcbiAgICAgICAgICAgIHBvcFVwV3JhcHBlci5hcHBlbmQobWVzc2FnZVRleHQpO1xuICAgICAgICAgICAgY29uc3Qgc2hvd1BvcHVwID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzaG93UG9wdXApO1xuICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RyeXNpbmcgdG8gZGVsZXRlIHBvcHVw8J+MmicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2FibGVCdXR0b25zKCkge1xuICAgICAgICBjb25zdCBzdGFydFJhY2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RhcnQtcmFjZS1idG4nKTtcbiAgICAgICAgY29uc3Qgc3RhcnRFbmdpbmVCdG5zID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGFydC1idG4nKV07XG4gICAgICAgIHN0YXJ0RW5naW5lQnRucy5mb3JFYWNoKChidG4pID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgYnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHN0YXJ0UmFjZUJ0bilcbiAgICAgICAgICAgIHN0YXJ0UmFjZUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHN0YXJ0UmFjZUJ0bi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgICBhY3RpdmV0ZUJ1dHRvbnMoKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0UmFjZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydC1yYWNlLWJ0bicpO1xuICAgICAgICBjb25zdCBzdGFydEVuZ2luZUJ0bnMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN0YXJ0LWJ0bicpXTtcbiAgICAgICAgc3RhcnRFbmdpbmVCdG5zLmZvckVhY2goKGJ0bikgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBidG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHN0YXJ0UmFjZUJ0bilcbiAgICAgICAgICAgIHN0YXJ0UmFjZUJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBzdGFydFJhY2VCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICB9XG4gICAgZGlzYWJsZU9uZUJ1dHRvbihidG4pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgICBjb25zdCBzdG9wQnRuID0gYnRuLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgc3RvcEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBzdG9wQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgICAgIGNvbnN0IHN0YXJ0UmFjZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydC1yYWNlLWJ0bicpO1xuICAgICAgICBzdGFydFJhY2VCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICB9XG59XG5leHBvcnRzLkNhcnMgPSBDYXJzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkV2ZW50RW1pdHRlciA9IHZvaWQgMDtcbmNsYXNzIEV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlck1hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBldmVudENhbGxiYWNrcyA9IHRoaXMuc3Vic2NyaWJlck1hcC5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBpZiAoIXRoaXMuc3Vic2NyaWJlck1hcC5oYXMoZXZlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJNYXAuc2V0KGV2ZW50LCBbY2FsbGJhY2tdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJNYXAuc2V0KGV2ZW50LCBbLi4uZXZlbnRDYWxsYmFja3MsIGNhbGxiYWNrXSk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBldmVudENhbGxiYWNrcyA9IHRoaXMuc3Vic2NyaWJlck1hcC5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpYmVyTWFwLmhhcyhldmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlck1hcC5zZXQoZXZlbnQsIGV2ZW50Q2FsbGJhY2tzLmZpbHRlcigoZm4pID0+IGZuICE9PSBjYWxsYmFjaykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uRW1pdChldmVudCwgcGFyYW0pIHtcbiAgICAgICAgY29uc3Qgc3Vic2NyaWJlciA9IHRoaXMuc3Vic2NyaWJlck1hcC5nZXQoZXZlbnQpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlcikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5mb3JFYWNoKChmbikgPT4gZm4ocGFyYW0pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkdhcmFnZSA9IHZvaWQgMDtcbmNvbnN0IHJvdXRlXzEgPSByZXF1aXJlKFwiLi9yb3V0ZXMvcm91dGVcIik7XG5jb25zdCBhcGlDYXJTZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9hcGkvYXBpQ2FyU2VydmljZVwiKTtcbmNvbnN0IGNhcnNCcmFuZF8xID0gcmVxdWlyZShcIi4vdXRpbHMvY2Fyc0JyYW5kXCIpO1xuY29uc3Qgc2V0Q29sb3JfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL3NldENvbG9yXCIpO1xuY2xhc3MgR2FyYWdlIGV4dGVuZHMgcm91dGVfMS5Sb3V0ZUVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnVybCA9ICdnYXJhZ2UnO1xuICAgIH1cbiAgICBhc3luYyBhcHBlbmRFbGVtZW50KHBhcmVudCkge1xuICAgICAgICBzdXBlci5yZW5kZXIocGFyZW50KTtcbiAgICAgICAgdGhpcy5jcmVhdGVCdG4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdidXR0b24nLCAnY3JlYXRlLWJ0biBidG4nLCB7IHRleHRDb250ZW50OiAnY3JlYXRlJyB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVCdG4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdidXR0b24nLCAndXBkYXRlLWJ0biBidG4nLCB7IHRleHRDb250ZW50OiAndXBkYXRlJyB9KTtcbiAgICAgICAgdGhpcy5jcmVhdGVJbnB1dCA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ3NlbGVjdCcsICdjcmVhdGUtaW5wdXQgaW5wdXQnKTtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZU1vZGVscygpO1xuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0ID0gc3VwZXIucmVuZGVyRWxlbWVudCgnaW5wdXQnLCAndXBkYXRlLWlucHV0IGlucHV0Jyk7XG4gICAgICAgIHRoaXMuY3JlYXRlUGlja2VyID0gc3VwZXIucmVuZGVyRWxlbWVudCgnaW5wdXQnLCAnY3JlYXRlLXBpY2tlciBwaWNrZXInLCB7IHR5cGU6ICdjb2xvcicgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlUGlja2VyID0gc3VwZXIucmVuZGVyRWxlbWVudCgnaW5wdXQnLCAndW9kYXRlLXBpY2tlciBwaWNrZXInLCB7IHR5cGU6ICdjb2xvcicgfSk7XG4gICAgICAgIHRoaXMuc3RhcnRCdG4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdidXR0b24nLCAnc3RhcnQtcmFjZS1idG4gYnRuJywgeyB0ZXh0Q29udGVudDogJ3N0YXJ0JyB9KTtcbiAgICAgICAgdGhpcy5zdG9wQnRuID0gc3VwZXIucmVuZGVyRWxlbWVudCgnYnV0dG9uJywgJ3N0b3AtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICdzdG9wJyB9KTtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUJ0biA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2J1dHRvbicsICd1cGRhdGUtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICdnZW5lcmF0ZSBjYXJzJyB9KTtcbiAgICAgICAgY29uc3QgY29udHJvbGxlcnNXcmFwcGVyID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ2NvbnRyb2xsZXJzLXdyYXBwZXInKTtcbiAgICAgICAgY29uc3QgY3JlYXRlQ29udGFpbmVyID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ2NyZWF0ZS1jb250YWluZXIgZ2FyYWdlLWlucHV0LWNvbnRhaW5lcicpO1xuICAgICAgICBjb25zdCB1cGRhdGVDb250YWluZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAndXBkYXRlLWNvbnRhaW5lciBnYXJhZ2UtaW5wdXQtY29udGFpbmVyJyk7XG4gICAgICAgIHRoaXMudXBkYXRlSW5wdXQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnVwZGF0ZVBpY2tlci5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMudXBkYXRlQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgY29udHJvbGxlcnNDb250YWluZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAnY29udHJvbGxlci1jb250YWluZXIgZ2FyYWdlLWlucHV0LWNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLndyYXBwZXIuYXBwZW5kKGNvbnRyb2xsZXJzV3JhcHBlcik7XG4gICAgICAgIGNvbnRyb2xsZXJzV3JhcHBlci5hcHBlbmQoY3JlYXRlQ29udGFpbmVyLCB1cGRhdGVDb250YWluZXIsIGNvbnRyb2xsZXJzQ29udGFpbmVyKTtcbiAgICAgICAgY3JlYXRlQ29udGFpbmVyLmFwcGVuZCh0aGlzLmNyZWF0ZUlucHV0LCB0aGlzLmNyZWF0ZVBpY2tlciwgdGhpcy5jcmVhdGVCdG4pO1xuICAgICAgICB1cGRhdGVDb250YWluZXIuYXBwZW5kKHRoaXMudXBkYXRlSW5wdXQsIHRoaXMudXBkYXRlUGlja2VyLCB0aGlzLnVwZGF0ZUJ0bik7XG4gICAgICAgIGNvbnRyb2xsZXJzQ29udGFpbmVyLmFwcGVuZCh0aGlzLnN0YXJ0QnRuLCB0aGlzLnN0b3BCdG4sIHRoaXMuZ2VuZXJhdGVCdG4pO1xuICAgICAgICB0aGlzLm9uVXBkYXRlTmFtZUNhcigpO1xuICAgICAgICB0aGlzLnVwZGF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZ2V0VXBkYXRlZENhci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ3JlYXRlQ2FyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkdlbmVyYXRlQ2Fycy5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5zdGFydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc3RhcnRSYWNlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnN0b3BCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnN0b3BSYWNlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmVtaXR0ZXIuc3Vic2NyaWJlKCdjbGVhcklucHV0cycsICgpID0+IHRoaXMuY2xlYXJJbnB1dHMoKSk7XG4gICAgfVxuICAgIG9uVXBkYXRlTmFtZUNhcigpIHtcbiAgICAgICAgdGhpcy5lbWl0dGVyLnN1YnNjcmliZSgnb25TZWxlY3RlZENhcicsIChjYXIpID0+IHRoaXMudXBkYXRlQ2FyKGNhcikpO1xuICAgIH1cbiAgICB1cGRhdGVDYXIoc29tZUNhcikge1xuICAgICAgICBpZiAoc29tZUNhcikge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VXBkYXRlQ2FyID0gc29tZUNhcjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzb21lJywgc29tZUNhcik7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUlucHV0LnZhbHVlID0gc29tZUNhci5uYW1lO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQaWNrZXIudmFsdWUgPSBzb21lQ2FyLmNvbG9yO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZFVwZGF0ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzYWJsZWRVcGRhdGUoaXNEaXNhYmxlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlSW5wdXQuZGlzYWJsZWQgPSBpc0Rpc2FibGU7XG4gICAgICAgIHRoaXMudXBkYXRlUGlja2VyLmRpc2FibGVkID0gaXNEaXNhYmxlO1xuICAgICAgICB0aGlzLnVwZGF0ZUJ0bi5kaXNhYmxlZCA9IGlzRGlzYWJsZTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0VXBkYXRlZENhcigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMuY3VycmVudFVwZGF0ZUNhcjtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NhciA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLnVwZGF0ZUlucHV0LnZhbHVlLFxuICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLnVwZGF0ZVBpY2tlci52YWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkQ2FyID0gYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLnVwZGF0ZUNhcihpZCwgbmV3Q2FyLCB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSk7XG4gICAgICAgICAgICBpZiAodXBkYXRlZENhci5pZClcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXIub25FbWl0KCdvblVwZGF0ZUNhcicsIHVwZGF0ZWRDYXIpO1xuICAgICAgICAgICAgdGhpcy5lbWl0dGVyLm9uRW1pdCgnb25VcGRhdGVXaW5uZXInLCB1cGRhdGVkQ2FyKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGlja2VyLnZhbHVlID0gJyMwMDAwMDAnO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZFVwZGF0ZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2FyIGlzIG5vdCBleGlzdCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uQ3JlYXRlQ2FyKCkge1xuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5jcmVhdGVJbnB1dC52YWx1ZSA/IHRoaXMuY3JlYXRlSW5wdXQudmFsdWUgOiAoMCwgY2Fyc0JyYW5kXzEuY3JlYXRlQ2FyTmFtZSkoKTtcbiAgICAgICAgY29uc3QgY29sb3IgPSB0aGlzLmNyZWF0ZVBpY2tlci52YWx1ZTtcbiAgICAgICAgY29uc3QgbmV3Q2FyID0ge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGNvbG9yLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjcmVhdGVkQ2FyID0gYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLmNyZWF0ZUNhcihuZXdDYXIsIHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcbiAgICAgICAgdGhpcy5lbWl0dGVyLm9uRW1pdCgnb25DcmVhdGVkQ2FyJywgY3JlYXRlZENhcik7XG4gICAgICAgIHRoaXMuY3JlYXRlSW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgdGhpcy5jcmVhdGVQaWNrZXIudmFsdWUgPSAnIzAwMDAwMCc7XG4gICAgfVxuICAgIGFzeW5jIG9uR2VuZXJhdGVDYXJzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbGVuZ3RoQmVmb3JlID0gKGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5nZXRBbGxDYXJzKCkpLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBuZXcgQXJyYXkoMTAwKS5maWxsKCcwJykubWFwKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gKDAsIGNhcnNCcmFuZF8xLmNyZWF0ZUNhck5hbWUpKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSAoMCwgc2V0Q29sb3JfMS5zZXRDYXJDb2xvcikoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdDYXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLmNyZWF0ZUNhcihuZXdDYXIsIHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3Q2FyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhcnIsIGxlbmd0aEJlZm9yZSk7XG4gICAgICAgICAgICBjb25zdCBjcmVhdGVkQ2FyID0gYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLmdldEFsbENhcnMoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdHRlci5vbkVtaXQoJ29uQ3JlYXRlZENhcicsIGNyZWF0ZWRDYXIuc2xpY2UobGVuZ3RoQmVmb3JlICsgMSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn6ugIGNhbm5vdCBnZW5lcmF0ZSBjYXJzJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXJJbnB1dHMoKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlSW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgdGhpcy5jcmVhdGVQaWNrZXIudmFsdWUgPSAnIzAwMDAwMCc7XG4gICAgICAgIHRoaXMudXBkYXRlSW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgdGhpcy51cGRhdGVQaWNrZXIudmFsdWUgPSAnIzAwMDAwMCc7XG4gICAgfVxuICAgIGdlbmVyYXRlTW9kZWxzKCkge1xuICAgICAgICBjb25zdCBjYXJOYW1lcyA9ICgwLCBjYXJzQnJhbmRfMS5zZWxlY3RDYXJOYW1lKSgpO1xuICAgICAgICBjYXJOYW1lcy51bnNoaWZ0KCcnKTtcbiAgICAgICAgY2FyTmFtZXMuZm9yRWFjaCgobmFtZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgIHZhbHVlLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBuYW1lKTtcbiAgICAgICAgICAgIHZhbHVlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlSW5wdXQuYXBwZW5kKHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXJ0UmFjZSgpIHtcbiAgICAgICAgdGhpcy5lbWl0dGVyLm9uRW1pdCgnb25TdGFydFJhY2UnKTtcbiAgICB9XG4gICAgc3RvcFJhY2UoKSB7XG4gICAgICAgIHRoaXMuZW1pdHRlci5vbkVtaXQoJ29uU3RvcFJhY2UnKTtcbiAgICB9XG59XG5leHBvcnRzLkdhcmFnZSA9IEdhcmFnZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5IZWFkZXIgPSB2b2lkIDA7XG5jb25zdCB2aWV3XzEgPSByZXF1aXJlKFwiLi92aWV3XCIpO1xuY2xhc3MgSGVhZGVyIGV4dGVuZHMgdmlld18xLlZpZXcge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm5hdkVsZW1lbnRzID0gW107XG4gICAgICAgIC8vIHByaXZhdGUgbmF2QnRuR2FyYWdlITogSFRNTEVsZW1lbnQ7XG4gICAgICAgIC8vIHByaXZhdGUgbmF2QnRuV2lubmVycyE6IEhUTUxFbGVtZW50O1xuICAgICAgICB0aGlzLnJvdXRlcyA9IFtcbiAgICAgICAgICAgIHsgdGl0bGU6ICdnYXJhZ2UnLCB1cmw6ICdnYXJhZ2UnIH0sXG4gICAgICAgICAgICB7IHRpdGxlOiAnd2lubmVycycsIHVybDogJ3dpbm5lcnMnIH0sXG4gICAgICAgIF07XG4gICAgfVxuICAgIGFwcGVuZEVsZW1lbnQocGFyZW50KSB7XG4gICAgICAgIGNvbnN0IGhlYWRlciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2hlYWRlcicsICdoZWFkZXInKTtcbiAgICAgICAgY29uc3QgaGVhZGluZyA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2gxJywgJ2hlYWRpbmcnLCB7IHRleHRDb250ZW50OiAnYXN5bmMtUmFjZScgfSk7XG4gICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAnaGVhZGVyLWNvbnRlbnQnKTtcbiAgICAgICAgY29uc3QgaGVhZGVyTmF2ID0gc3VwZXIucmVuZGVyRWxlbWVudCgnbmF2JywgJ25hdicpO1xuICAgICAgICB0aGlzLnN1YnRpdGxlID0gc3VwZXIucmVuZGVyRWxlbWVudCgnaDInLCAnc3VidGl0bGUnLCB7IHRleHRDb250ZW50OiAnYXN5bmMtUmFjZScgfSk7XG4gICAgICAgIGNvbnN0IHRleEJveCA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdoZWFkZXJfX3RleHQtd3JhcHB0ZXInKTtcbiAgICAgICAgcGFyZW50LmFwcGVuZChoZWFkZXIpO1xuICAgICAgICBoZWFkZXIuYXBwZW5kKGhlYWRpbmcsIHRleEJveCwgaGVhZGVyQ29udGVudCk7XG4gICAgICAgIGhlYWRlckNvbnRlbnQuYXBwZW5kKHRoaXMuc3VidGl0bGUsIGhlYWRlck5hdik7XG4gICAgICAgIHRoaXMucm91dGVzLmZvckVhY2goKHJvdXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYXZMaW5rID0gc3VwZXIucmVuZGVyRWxlbWVudCgnYScsIGAke3JvdXRlLnRpdGxlfS1saW5rIG5hdi1saW5rYCwgeyB0ZXh0Q29udGVudDogcm91dGUudGl0bGUgfSk7XG4gICAgICAgICAgICBuYXZMaW5rLnNldEF0dHJpYnV0ZSgndXJsJywgcm91dGUudXJsKTtcbiAgICAgICAgICAgIHRoaXMubmF2RWxlbWVudHMucHVzaChuYXZMaW5rKTtcbiAgICAgICAgICAgIGhlYWRlck5hdi5hcHBlbmQobmF2TGluayk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlUm91dGUodGhpcy5yb3V0ZXNbMF0pO1xuICAgICAgICBoZWFkZXJOYXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNoYW5nZVJvdXRlLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBvbkNoYW5nZVJvdXRlKHJvdXRlKSB7XG4gICAgICAgIHRoaXMuc3VidGl0bGUuaW5uZXJIVE1MID0gcm91dGUudGl0bGU7XG4gICAgICAgIHRoaXMuZW1pdHRlci5vbkVtaXQoJ3JvdXRlQ2hhbmdlZCcsIHJvdXRlKTtcbiAgICB9XG4gICAgY2hhbmdlUm91dGUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0TGluayA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgY29uc3QgdXJsID0gdGFyZ2V0TGluay5nZXRBdHRyaWJ1dGUoJ3VybCcpO1xuICAgICAgICBjb25zdCByb3V0ZSA9IHRoaXMucm91dGVzLmZpbmQoKGxpbmspID0+IGxpbmsudXJsID09PSB1cmwpO1xuICAgICAgICBpZiAocm91dGUpXG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlUm91dGUocm91dGUpO1xuICAgIH1cbn1cbmV4cG9ydHMuSGVhZGVyID0gSGVhZGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJvdXRlRWxlbWVudCA9IHZvaWQgMDtcbmNvbnN0IHZpZXdfMSA9IHJlcXVpcmUoXCIuLi92aWV3XCIpO1xuY2xhc3MgUm91dGVFbGVtZW50IGV4dGVuZHMgdmlld18xLlZpZXcge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlO1xuICAgIH1cbiAgICByZW5kZXIocGFyZW50KSB7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLndyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJyk7XG4gICAgICAgIHRoaXMud3JhcHBlci5jbGFzc05hbWUgPSBgJHt0aGlzLnVybH0td3JhcHBlcmA7XG4gICAgICAgIHRoaXMud3JhcHBlci5zZXRBdHRyaWJ1dGUoJ3VybCcsIHRoaXMudXJsKTtcbiAgICB9XG4gICAgc2hvdygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2hvdykge1xuICAgICAgICAgICAgdGhpcy5pc1Nob3cgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy53cmFwcGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoaWRlKCkge1xuICAgICAgICBpZiAodGhpcy5pc1Nob3cpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLndyYXBwZXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5Sb3V0ZUVsZW1lbnQgPSBSb3V0ZUVsZW1lbnQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2VsZWN0Q2FyTmFtZSA9IGV4cG9ydHMuY3JlYXRlQ2FyTmFtZSA9IGV4cG9ydHMubW9kZWxzID0gZXhwb3J0cy5icmFuZCA9IHZvaWQgMDtcbmV4cG9ydHMuYnJhbmQgPSBbXG4gICAgJ0F1ZGknLFxuICAgICdCZXRhIEp1bGlldGEnLFxuICAgICdCTVcnLFxuICAgICdDaXRyb2VuJyxcbiAgICAnSW5maW5pdGknLFxuICAgICdKZWVwJyxcbiAgICAnS2lhJyxcbiAgICAnTGV4dXMnLFxuICAgICdOaXNzYW4nLFxuICAgICdPcGVsJyxcbiAgICAnVm9sdm8nLFxuXTtcbmV4cG9ydHMubW9kZWxzID0gW1xuICAgICdBNCcsXG4gICAgJ1gyJyxcbiAgICAnQ0VFRCcsXG4gICAgJ0NFUkFUTycsXG4gICAgJ1JJTycsXG4gICAgJ0dFTkVTSVMnLFxuICAgICdHRVRaJyxcbiAgICAnR1JBTkRFVVInLFxuICAgICdNQVRSSVgnLFxuICAgICdYQ0VOVCcsXG4gICAgJ0FsZmEgUm9tZW8nLFxuXTtcbmNvbnN0IGNyZWF0ZUNhck5hbWUgPSAoKSA9PiB7XG4gICAgY29uc3QgcmFuZG9tTW9kZWwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBleHBvcnRzLm1vZGVscy5sZW5ndGgpO1xuICAgIGNvbnN0IHJhbmRvbUJyYW5kID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZXhwb3J0cy5icmFuZC5sZW5ndGgpO1xuICAgIHJldHVybiBgJHtleHBvcnRzLmJyYW5kW3JhbmRvbUJyYW5kXX0gJHtleHBvcnRzLm1vZGVsc1tyYW5kb21Nb2RlbF19IGA7XG59O1xuZXhwb3J0cy5jcmVhdGVDYXJOYW1lID0gY3JlYXRlQ2FyTmFtZTtcbmNvbnN0IHNlbGVjdENhck5hbWUgPSAoKSA9PiBBcnJheSg2KVxuICAgIC5maWxsKCcnKVxuICAgIC5tYXAoKCkgPT4gYCR7ZXhwb3J0cy5icmFuZFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBleHBvcnRzLmJyYW5kLmxlbmd0aCldfSAke2V4cG9ydHMubW9kZWxzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGV4cG9ydHMubW9kZWxzLmxlbmd0aCldfWApO1xuZXhwb3J0cy5zZWxlY3RDYXJOYW1lID0gc2VsZWN0Q2FyTmFtZTtcbmNvbnNvbGUubG9nKCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2V0Q2FyQ29sb3IgPSB2b2lkIDA7XG5jb25zdCBzZXRDb2xvciA9ICgpID0+IHtcbiAgICBjb25zdCBjb2xvciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NSkudG9TdHJpbmcoMTYpO1xuICAgIHJldHVybiBjb2xvci5sZW5ndGggPT09IDIgPyBjb2xvciA6IGNvbG9yLnBhZFN0YXJ0KDIsICcwJyk7XG59O1xuY29uc3Qgc2V0Q2FyQ29sb3IgPSAoKSA9PiBgIyR7c2V0Q29sb3IoKX0ke3NldENvbG9yKCl9JHtzZXRDb2xvcigpfWA7XG5leHBvcnRzLnNldENhckNvbG9yID0gc2V0Q2FyQ29sb3I7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU29ydE9yZGVyV2lubmVyID0gZXhwb3J0cy5Tb3J0V2lubmVyID0gZXhwb3J0cy5FbmdpbmUgPSBleHBvcnRzLlBhdGggPSB2b2lkIDA7XG52YXIgUGF0aDtcbihmdW5jdGlvbiAoUGF0aCkge1xuICAgIFBhdGhbXCJnYXJhZ2VcIl0gPSBcImdhcmFnZVwiO1xuICAgIFBhdGhbXCJlbmdpbmVcIl0gPSBcImVuZ2luZVwiO1xuICAgIFBhdGhbXCJ3aW5uZXJzXCJdID0gXCJ3aW5uZXJzXCI7XG59KShQYXRoIHx8IChleHBvcnRzLlBhdGggPSBQYXRoID0ge30pKTtcbnZhciBFbmdpbmU7XG4oZnVuY3Rpb24gKEVuZ2luZSkge1xuICAgIEVuZ2luZVtcInN0YXJ0ZWRcIl0gPSBcInN0YXJ0ZWRcIjtcbiAgICBFbmdpbmVbXCJzdG9wcGVkXCJdID0gXCJzdG9wcGVkXCI7XG4gICAgRW5naW5lW1wiZHJpdmVcIl0gPSBcImRyaXZlXCI7XG59KShFbmdpbmUgfHwgKGV4cG9ydHMuRW5naW5lID0gRW5naW5lID0ge30pKTtcbnZhciBTb3J0V2lubmVyO1xuKGZ1bmN0aW9uIChTb3J0V2lubmVyKSB7XG4gICAgU29ydFdpbm5lcltcImlkXCJdID0gXCJpZFwiO1xuICAgIFNvcnRXaW5uZXJbXCJ3aW5zXCJdID0gXCJ3aW5zXCI7XG4gICAgU29ydFdpbm5lcltcInRpbWVcIl0gPSBcInRpbWVcIjtcbn0pKFNvcnRXaW5uZXIgfHwgKGV4cG9ydHMuU29ydFdpbm5lciA9IFNvcnRXaW5uZXIgPSB7fSkpO1xudmFyIFNvcnRPcmRlcldpbm5lcjtcbihmdW5jdGlvbiAoU29ydE9yZGVyV2lubmVyKSB7XG4gICAgU29ydE9yZGVyV2lubmVyW1wiQVNDXCJdID0gXCJBU0NcIjtcbiAgICBTb3J0T3JkZXJXaW5uZXJbXCJERVNDXCJdID0gXCJERVNDXCI7XG59KShTb3J0T3JkZXJXaW5uZXIgfHwgKGV4cG9ydHMuU29ydE9yZGVyV2lubmVyID0gU29ydE9yZGVyV2lubmVyID0ge30pKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5WaWV3ID0gdm9pZCAwO1xuY2xhc3MgVmlldyB7XG4gICAgY29uc3RydWN0b3IoZW1pdHRlcikge1xuICAgICAgICB0aGlzLmVtaXR0ZXIgPSBlbWl0dGVyO1xuICAgIH1cbiAgICByZW5kZXJFbGVtZW50KHRhZywgY2xhc3NOYW1lLCBhdHRyaWJ1dGUpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICAgICAgaWYgKGNsYXNzTmFtZSlcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgICAgICBpZiAoYXR0cmlidXRlKVxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LCBhdHRyaWJ1dGUpO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG59XG5leHBvcnRzLlZpZXcgPSBWaWV3O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLldpbm5lcnMgPSB2b2lkIDA7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4vdXRpbHMvdHlwZXNcIik7XG5jb25zdCByb3V0ZV8xID0gcmVxdWlyZShcIi4vcm91dGVzL3JvdXRlXCIpO1xuY29uc3QgYXBpV2lubmVyc1NlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL2FwaS9hcGlXaW5uZXJzU2VydmljZVwiKTtcbmNvbnN0IHN2Z0NhciA9IGA8c3ZnIHZlcnNpb249XCIxLjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICB3aWR0aD1cIjEyODAuMDAwMDAwcHRcIiBoZWlnaHQ9XCI4MDYuMDAwMDAwcHRcIiB2aWV3Qm94PVwiMCAwIDEyODAuMDAwMDAwIDgwNi4wMDAwMDBcIlxuICAgIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWlkWU1pZCBtZWV0XCI+XG4gICA8ZyB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMC4wMDAwMDAsODA2LjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKVwiXG4gICBmaWxsPVwiMDAwMDAwXCIgIHN0cm9rZT1cIm5vbmVcIj5cbiAgIDxwYXRoIGQ9XCJNNjg0NSA4MDUwIGMtMzggLTUgLTEzNSAtMTMgLTIxNSAtMjAgLTM3NiAtMzAgLTc1NCAtMTA2IC0xMTE1IC0yMjVcbiAgIC0yMzcgLTc4IC0zNzYgLTEzNSAtNjEwIC0yNTAgLTU0MCAtMjY1IC05NjggLTU3NyAtMTQ0MSAtMTA1MCAtMjU0IC0yNTQgLTQwN1xuICAgLTQyOCAtNjcyIC03NjUgLTMzOSAtNDMxIC01NTAgLTYxNCAtODA1IC02OTggLTUwIC0xNyAtMTgwIC00OSAtMjg3IC03MiAtMzM3XG4gICAtNzMgLTUzNyAtMTQwIC03NjUgLTI1OCAtNTUwIC0yODYgLTgyOCAtNzQ4IC04OTkgLTE0OTcgLTQzIC00NTMgLTQ2IC01ODlcbiAgIC0xNiAtNzYzIDUyIC0zMDQgMTQ5IC00OTQgMzU0IC02OTcgMTIyIC0xMjIgMjE5IC0xOTMgMzY0IC0yNjYgbDk1IC00OSAxODAgMFxuICAgMTgwIDAgLTcgNTUgYy0yOSAyNTAgLTI2IDQ0OCAxMCA2NjAgMTEzIDY3MyA1NDcgMTI1OCAxMTYwIDE1NjQgOTA4IDQ1MyAxOTk4XG4gICAyMTggMjY0MSAtNTcwIDMzNyAtNDEzIDUxOCAtOTgzIDQ3NCAtMTQ5MyAtNiAtNzggLTE0IC0xNTkgLTE4IC0xNzkgbC02IC0zN1xuICAgMTIzNiAwIGM2ODAgMCAxMjM4IDMgMTI0MCA3IDIgNSAtMiA1NSAtOSAxMTMgLTcgNTggLTEzIDE2MyAtMTQgMjMzIC0yIDk3NFxuICAgNjYxIDE4MzYgMTYwMiAyMDgxIDIwNSA1NCAzMzQgNzAgNTUzIDcwIDM1MiAwIDYyNyAtNjIgOTQwIC0yMTMgNTU4IC0yNzAgOTczXG4gICAtNzY3IDExMzggLTEzNjEgNTQgLTE5MiA3MCAtMzE4IDcxIC01MzUgMSAtMTEwIC0yIC0yMzMgLTcgLTI3MyBsLTcgLTczIDQ2XG4gICAzOCBjNjkgNTcgMTc3IDE4NSAyNTUgMzAxIDE1MiAyMjcgMjQxIDQ3MyAyODYgNzkyIDMwIDIxNSAyMiA0MTUgLTI4IDY2NCAtODFcbiAgIDQwMiAtMjkzIDc0MyAtNTk4IDk2MyAtMiAxIC01IDQ3IC03IDEwMCAtNCAxNjkgLTQ4IDM4MSAtMTQ0IDY5OCAtMTIyIDQwMVxuICAgLTI0NiA2NTkgLTQ5NyAxMDI4IC0yMTQgMzE2IC00OTggNjY2IC03NjMgOTQwIC0xMDIgMTA2IC0xNDkgMTQ2IC0yNTYgMjE2XG4gICAtNDE1IDI3NSAtMTA0MCA1MTEgLTE3MjQgNjUwIC0zNTggNzMgLTY5MSAxMTcgLTEwODUgMTQ1IC0xMjEgOSAtMjc2IDIwIC0zNDVcbiAgIDI2IC0xNDIgMTEgLTM4MSAxMSAtNDg1IDB6IG02MCAtODI0IGMyMTAgLTU5IDM4NCAtMjAzIDQ3NSAtMzkxIDcyIC0xNDggNzNcbiAgIC0xNTcgNzcgLTU4MCA1IC00MTQgLTcgLTcyNyAtMzIgLTg1MSAtMzAgLTE0NiAtMTAwIC0yNTkgLTE4OSAtMzA3IGwtNDEgLTIyXG4gICAtMTU0MCAtMyBjLTExNDUgLTIgLTE1NTQgMCAtMTU5NSA5IC0xMjEgMjUgLTIyMSA5NiAtMjYxIDE4MiAtMjQgNTMgLTI1IDE3MlxuICAgLTMgMjQ4IDYxIDIwNSAzMTAgNTM2IDY5MyA5MjAgMTA4IDEwNyAyNDYgMjM1IDMwNiAyODMgNDEyIDMzMCA4MDMgNDg4IDEzMDVcbiAgIDUzMCAyNSAyIDIwMyAyIDM5NSAxIDI5NCAtMSAzNjAgLTQgNDEwIC0xOXogbTIwNjAgLTkxIGMxNTIgLTM0IDQzNSAtMTI2IDU0M1xuICAgLTE3NiAzODggLTE3OSA3NTggLTU2NSA5ODIgLTEwMjQgMTQ2IC0zMDAgMTk0IC01MzMgMTM5IC02NzkgLTI4IC03NiAtOTlcbiAgIC0xMzkgLTE4NiAtMTY2IC02MyAtMTkgLTkyIC0yMCAtOTkxIC0yMCAtOTI0IDAgLTkyNiAwIC05NzAgMjEgLTUxIDI1IC05MyA3OVxuICAgLTExOSAxNTIgLTE3IDQ5IC0xOCAxMDcgLTE4IDg3NyBsMCA4MjUgMjMgNTUgYzM5IDk1IDc4IDEyOCAxODAgMTUxIDEwOSAyNVxuICAgMjYxIDE5IDQxNyAtMTZ6XCIvPlxuICAgPHBhdGggZD1cIk0zMTQwIDM1NjkgYy03MTggLTY5IC0xMzMzIC01ODMgLTE1MzYgLTEyODUgLTUxIC0xNzQgLTY2IC0zMTAgLTYyXG4gICAtNTI5IDUgLTIyNiAyNSAtMzQ0IDg1IC01MjQgOTUgLTI4NSAyMzggLTUwOCA0NjcgLTcyOCAyNzkgLTI2OSA2MDAgLTQyMVxuICAgMTAyMCAtNDgyIDE3NCAtMjYgMjM4IC0yNiA0MTIgMCAzNTUgNTIgNjA2IDE1MiA4NjYgMzQ2IDM0MyAyNTUgNTkwIDY0MiA2NzhcbiAgIDEwNjMgNjMgMzA1IDQ0IDYzMSAtNTUgOTI4IC0yNjUgNzkyIC0xMDM4IDEyOTIgLTE4NzUgMTIxMXogbTM1OSAtOTM5IGMyMDFcbiAgIC00MSAzOTggLTE2OSA1MTYgLTMzNSAyNDEgLTMzOSAyMTMgLTc4NiAtNjkgLTEwODIgLTE2NiAtMTc1IC0zNDggLTI2MCAtNTgwXG4gICAtMjcxIC0yMDAgLTggLTM2MCAzNSAtNTE3IDEzOSAtNDQ0IDI5OCAtNTE1IDkxMSAtMTUwIDEzMDIgMTk5IDIxMyA1MDYgMzA4XG4gICA4MDAgMjQ3elwiLz5cbiAgIDxwYXRoIGQ9XCJNOTg3MSAzNTY5IGMtMjE0IC0yNCAtMzk4IC03NyAtNTkxIC0xNzAgLTgwOSAtMzkwIC0xMjAxIC0xMzE0IC05MTlcbiAgIC0yMTY5IDE4OSAtNTc1IDY4NSAtMTAzMCAxMjc0IC0xMTcwIDEwOCAtMjYgMzQ2IC02MCA0MTkgLTYwIDgxIDAgMzMwIDM3IDQ0MVxuICAgNjUgNzA2IDE3OSAxMjM0IDc3MiAxMzMwIDE0OTIgMTI4IDk1OCAtNTI4IDE4NDAgLTE0ODUgMTk5OCAtMTE5IDE5IC0zNTggMjdcbiAgIC00NjkgMTR6IG0zMTkgLTkzMCBjMzUwIC01NiA2MzUgLTMzMCA3MDUgLTY3OCAyMyAtMTEyIDE2IC0yOTQgLTE1IC00MDEgLTY3XG4gICAtMjM0IC0yMzUgLTQzMSAtNDU1IC01MzYgLTE0MSAtNjcgLTE5NiAtNzkgLTM3MCAtNzkgLTE3NSAwIC0yMzEgMTMgLTM3MSA4MFxuICAgLTE3OCA4NiAtMzEzIDIyMSAtMzk5IDM5OCAtNjcgMTM5IC03OSAxOTcgLTgwIDM2NyAwIDE1MyAxMCAyMTAgNTkgMzMyIDEwN1xuICAgMjYzIDM2NSA0NzAgNjQ4IDUxNyA3NSAxMiAyMDIgMTMgMjc4IDB6XCIvPlxuICAgPC9nPlxuICAgPC9zdmc+XG4gICBgO1xuY29uc3QgbGltaXQgPSB7XG4gICAga2V5OiAnX2xpbWl0JyxcbiAgICB2YWx1ZTogMTAsXG59O1xuY29uc3Qgc3RhcnRQYWdlID0gMTtcbmNsYXNzIFdpbm5lcnMgZXh0ZW5kcyByb3V0ZV8xLlJvdXRlRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoZW1pdHRlcikge1xuICAgICAgICBzdXBlcihlbWl0dGVyKTtcbiAgICAgICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgICAgICAgdGhpcy51cmwgPSAnd2lubmVycyc7XG4gICAgICAgIHRoaXMuY3VycmVudFdpbm5lclBhZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudFBhZ2VXaW5uZXInKVxuICAgICAgICAgICAgPyBOdW1iZXIobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRQYWdlV2lubmVyJykpXG4gICAgICAgICAgICA6IDE7XG4gICAgICAgIHRoaXMuZ2V0QWxsV2lubmVyc1BhZ2luYXRpb24odGhpcy5jdXJyZW50V2lubmVyUGFnZSk7XG4gICAgICAgIHRoaXMub25TdWJXaW4oKTtcbiAgICAgICAgdGhpcy5nZXRXaW5uZXJzUXR5KCk7XG4gICAgfVxuICAgIGFzeW5jIGdldFdpbm5lcnNRdHkoKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsQ2FycyA9IGF3YWl0IGFwaVdpbm5lcnNTZXJ2aWNlXzEuQXBpV2lubmVyc1NlcnZpY2UuZ2V0QWxsV2luKCk7XG4gICAgICAgIHRoaXMucXR5V2lucyA9IHRvdGFsQ2Fycy5sZW5ndGg7XG4gICAgICAgIHRoaXMuY2Fyc051bWJlcnMudGV4dENvbnRlbnQgPSBTdHJpbmcodGhpcy5xdHlXaW5zKTtcbiAgICB9XG4gICAgYXBwZW5kRWxlbWVudChwYXJlbnQpIHtcbiAgICAgICAgc3VwZXIucmVuZGVyKHBhcmVudCk7XG4gICAgICAgIHRoaXMubmV4dEJ0biA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2J1dHRvbicsICduZXh0LWJ0biBidG4gd2luLXBhZ2UtYnRuJywge1xuICAgICAgICAgICAgdGV4dENvbnRlbnQ6ICduZXh0JyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJldkJ0biA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2J1dHRvbicsICdwcmV2LWJ0biBidG4gd2luLXBhZ2UtYnRuJywge1xuICAgICAgICAgICAgdGV4dENvbnRlbnQ6ICdwcmV2JyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lcldpblBhZ2UgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAnd3JhcHBlci1wYWdlX2NvbnRyb2xsZXInKTtcbiAgICAgICAgdGhpcy53aW5ubmVyc0hlYWRlciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2gzJywgJ3RpdGxlJywgeyB0ZXh0Q29udGVudDogJ1dpbm5lcnMgIycgfSk7XG4gICAgICAgIHRoaXMuY2Fyc051bWJlcnMgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdzcGFuJywgJ3RpdGxlJyk7XG4gICAgICAgIHRoaXMucGFnZU51bWJlcnMgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdoNCcsICdzdWJ0aXRsZS1wYWdlJywgeyB0ZXh0Q29udGVudDogJ1BhZ2VzKGhlcmUgbnVtYmVyKScgfSk7XG4gICAgICAgIHRoaXMudGFibGVDb250YWluZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAndGFibGUtY29udGFpbmVyJyk7XG4gICAgICAgIHRoaXMud2luVGFibGVIZWFkID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ3RhYmxlLWhlYWQgdGFibGUtcm93Jyk7XG4gICAgICAgIHRoaXMuaWRXaW4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdzcGFuJywgJ3RhYmxlLWlkLXdpbm5lcicsIHsgdGV4dENvbnRlbnQ6ICdOdW1iZXInIH0pO1xuICAgICAgICB0aGlzLmNhckltZ1dpbiA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ3NwYW4nLCAndGFibGUtaW1nLXdpbm5lcicsIHsgdGV4dENvbnRlbnQ6ICdDYXInIH0pO1xuICAgICAgICB0aGlzLmNhck5hbWVXaW4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdzcGFuJywgJ3RhYmxlLW5hbWUtd2lubmVyJywgeyB0ZXh0Q29udGVudDogJ05hbWUnIH0pO1xuICAgICAgICB0aGlzLm51bWJuZXJXaW5zID0gc3VwZXIucmVuZGVyRWxlbWVudCgnc3BhbicsICd0YWJsZS1udW1iZXJzLXdpbnMnLCB7IHRleHRDb250ZW50OiAnV2lucycgfSk7XG4gICAgICAgIHRoaXMudGltZVdpbiA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ3NwYW4nLCAndGFibGUtdGltZS13aW5zJywgeyB0ZXh0Q29udGVudDogJ0Jlc3QgdGltZScgfSk7XG4gICAgICAgIHRoaXMud3JhcHBlci5hcHBlbmQodGhpcy53aW5ubmVyc0hlYWRlciwgY29udGFpbmVyV2luUGFnZSwgdGhpcy50YWJsZUNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMud2lubm5lcnNIZWFkZXIuYXBwZW5kKHRoaXMuY2Fyc051bWJlcnMpO1xuICAgICAgICBjb250YWluZXJXaW5QYWdlLmFwcGVuZCh0aGlzLnBhZ2VOdW1iZXJzLCB0aGlzLnByZXZCdG4sIHRoaXMubmV4dEJ0bik7XG4gICAgICAgIHRoaXMudGFibGVDb250YWluZXIuYXBwZW5kKHRoaXMud2luVGFibGVIZWFkKTtcbiAgICAgICAgdGhpcy53aW5UYWJsZUhlYWQuYXBwZW5kKHRoaXMuaWRXaW4sIHRoaXMuY2FySW1nV2luLCB0aGlzLmNhck5hbWVXaW4sIHRoaXMubnVtYm5lcldpbnMsIHRoaXMudGltZVdpbik7XG4gICAgICAgIHRoaXMubnVtYm5lcldpbnMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnNvcnRCeVF0eVdpbnMuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMudGltZVdpbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc29ydEJ5VGltZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5uZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5uZXh0UGFnZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5wcmV2QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5wcmV2UGFnZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0QWxsV2lubmVyc1BhZ2luYXRpb24ocGFnZSA9IHN0YXJ0UGFnZSkge1xuICAgICAgICB0aGlzLmRhdGFXaW5uZXJzID0gYXdhaXQgYXBpV2lubmVyc1NlcnZpY2VfMS5BcGlXaW5uZXJzU2VydmljZS5nZXRQYWdpbmF0aW9uKHBhZ2UsIGxpbWl0KTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVdpbm5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRXaW5uZXJQYWdlIC09IDE7XG4gICAgICAgICAgICB0aGlzLmRhdGFXaW5uZXJzID0gYXdhaXQgYXBpV2lubmVyc1NlcnZpY2VfMS5BcGlXaW5uZXJzU2VydmljZS5nZXRQYWdpbmF0aW9uKHRoaXMuY3VycmVudFdpbm5lclBhZ2UsIGxpbWl0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhZ2VOdW1iZXJzLnRleHRDb250ZW50ID0gU3RyaW5nKHRoaXMuY3VycmVudFdpbm5lclBhZ2UpO1xuICAgICAgICB0aGlzLnJlbmRlcldpbm5lcih0aGlzLmRhdGFXaW5uZXJzKTtcbiAgICB9XG4gICAgcmVuZGVyV2lubmVyKHdpbm5lckxpc3QpIHtcbiAgICAgICAgdGhpcy5jb250ZW50VGFibGUgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAndGFibGUtY29udGVudCcpO1xuICAgICAgICB0aGlzLmNvbnRlbnRUYWJsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgdGhpcy50YWJsZUNvbnRhaW5lci5hcHBlbmQodGhpcy5jb250ZW50VGFibGUpO1xuICAgICAgICB3aW5uZXJMaXN0LmZvckVhY2goKHdpbm5lciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd2luVGFibGVIZWFkID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ3RhYmxlLWhlYWQgdGFibGUtcm93Jyk7XG4gICAgICAgICAgICBjb25zdCBpZFdpbiA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ3NwYW4nLCAndGFibGUtaWQtd2lubmVyJywgeyB0ZXh0Q29udGVudDogYCR7aSArIDF9YCB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNhckltZ1dpbiA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ3NwYW4nLCAndGFibGUtaW1nLXdpbm5lcicsIHsgdGV4dENvbnRlbnQ6IHdpbm5lci5jb2xvciB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNhck5hbWVXaW4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdzcGFuJywgJ3RhYmxlLW5hbWUtd2lubmVyJywgeyB0ZXh0Q29udGVudDogd2lubmVyLm5hbWUgfSk7XG4gICAgICAgICAgICBjb25zdCBudW1ibmVyV2lucyA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ3NwYW4nLCAndGFibGUtbnVtYmVycy13aW5zJywgeyB0ZXh0Q29udGVudDogd2lubmVyLndpbnMgfSk7XG4gICAgICAgICAgICBjb25zdCB0aW1lV2luID0gc3VwZXIucmVuZGVyRWxlbWVudCgnc3BhbicsICd0YWJsZS10aW1lLXdpbnMnLCB7IHRleHRDb250ZW50OiB3aW5uZXIudGltZSB9KTtcbiAgICAgICAgICAgIGNhckltZ1dpbi5pbm5lckhUTUwgPSBzdmdDYXI7XG4gICAgICAgICAgICBjYXJJbWdXaW4uc3R5bGUuZmlsbCA9IHdpbm5lci5jb2xvcjtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlLmFwcGVuZCh3aW5UYWJsZUhlYWQpO1xuICAgICAgICAgICAgd2luVGFibGVIZWFkLmFwcGVuZChpZFdpbiwgY2FySW1nV2luLCBjYXJOYW1lV2luLCBudW1ibmVyV2lucywgdGltZVdpbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBuZXh0UGFnZSgpIHtcbiAgICAgICAgY29uc3QgbWF4UGFnZSA9IHRoaXMucXR5V2lucyAvIGxpbWl0LnZhbHVlO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50V2lubmVyUGFnZSA8IG1heFBhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcmV2QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRXaW5uZXJQYWdlICs9IDE7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFBhZ2VXaW5uZXInLCBTdHJpbmcodGhpcy5jdXJyZW50V2lubmVyUGFnZSkpO1xuICAgICAgICAgICAgdGhpcy5wYWdlTnVtYmVycy50ZXh0Q29udGVudCA9IFN0cmluZyh0aGlzLmN1cnJlbnRXaW5uZXJQYWdlKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgY29uc3QgbmV3bGlzdCA9IGF3YWl0IHRoaXMuZ2V0QWxsV2lubmVyc1BhZ2luYXRpb24odGhpcy5jdXJyZW50V2lubmVyUGFnZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdsaXN0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLm5leHRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBwcmV2UGFnZSgpIHtcbiAgICAgICAgY29uc3QgbWluUGFnZSA9IDE7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRXaW5uZXJQYWdlID4gbWluUGFnZSkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50V2lubmVyUGFnZSAtPSAxO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRQYWdlV2lubmVyJywgU3RyaW5nKHRoaXMuY3VycmVudFdpbm5lclBhZ2UpKTtcbiAgICAgICAgICAgIHRoaXMucGFnZU51bWJlcnMudGV4dENvbnRlbnQgPSBTdHJpbmcodGhpcy5jdXJyZW50V2lubmVyUGFnZSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRUYWJsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0QWxsV2lubmVyc1BhZ2luYXRpb24odGhpcy5jdXJyZW50V2lubmVyUGFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5wcmV2QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgb25TdWJXaW4oKSB7XG4gICAgICAgIHRoaXMuZW1pdHRlci5zdWJzY3JpYmUoJ29uUmVtb3ZlJywgKGNhcikgPT4gdGhpcy5vblJlbW92ZVdpbihjYXIpKTtcbiAgICAgICAgdGhpcy5lbWl0dGVyLnN1YnNjcmliZSgncmVuZGVyV2lubmVycycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5nZXRBbGxXaW5uZXJzUGFnaW5hdGlvbih0aGlzLmN1cnJlbnRXaW5uZXJQYWdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIG9uUmVtb3ZlV2luKGNhcikge1xuICAgICAgICBpZiAoY2FyKSB7XG4gICAgICAgICAgICBjb25zdCB7IGlkIH0gPSBjYXI7XG4gICAgICAgICAgICBjb25zdCB0b3RhbENhcnMgPSBhd2FpdCBhcGlXaW5uZXJzU2VydmljZV8xLkFwaVdpbm5lcnNTZXJ2aWNlLmdldEFsbFdpbigpO1xuICAgICAgICAgICAgY29uc3Qgd2lubmVyVG9EZWxldGUgPSB0b3RhbENhcnMuZmluZCgod2luKSA9PiB3aW4uY2FySWQgPT09IGlkKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3aW5uZXJUb0RlbGV0ZScsIHdpbm5lclRvRGVsZXRlKTtcbiAgICAgICAgICAgIGlmICh3aW5uZXJUb0RlbGV0ZSlcbiAgICAgICAgICAgICAgICBhd2FpdCBhcGlXaW5uZXJzU2VydmljZV8xLkFwaVdpbm5lcnNTZXJ2aWNlLmRlbGV0ZVdpbih3aW5uZXJUb0RlbGV0ZS5pZCk7XG4gICAgICAgICAgICB0aGlzLmdldFdpbm5lcnNRdHkoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5nZXRBbGxXaW5uZXJzUGFnaW5hdGlvbih0aGlzLmN1cnJlbnRXaW5uZXJQYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzb3J0QnlRdHlXaW5zKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMubnVtYm5lcldpbnMudGV4dENvbnRlbnQgPT09ICdXaW5zIOKsh++4jycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWQgPSBhd2FpdCBhcGlXaW5uZXJzU2VydmljZV8xLkFwaVdpbm5lcnNTZXJ2aWNlLnNvcnRXaW4odGhpcy5jdXJyZW50V2lubmVyUGFnZSwgbGltaXQsIHR5cGVzXzEuU29ydFdpbm5lci53aW5zLCB0eXBlc18xLlNvcnRPcmRlcldpbm5lci5ERVNDKTtcbiAgICAgICAgICAgICAgICB0aGlzLm51bWJuZXJXaW5zLnRleHRDb250ZW50ID0gJ1dpbnMg4qyG77iPJztcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRUYWJsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcldpbm5lcihzb3J0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkID0gYXdhaXQgYXBpV2lubmVyc1NlcnZpY2VfMS5BcGlXaW5uZXJzU2VydmljZS5zb3J0V2luKHRoaXMuY3VycmVudFdpbm5lclBhZ2UsIGxpbWl0LCB0eXBlc18xLlNvcnRXaW5uZXIud2lucywgdHlwZXNfMS5Tb3J0T3JkZXJXaW5uZXIuQVNDKTtcbiAgICAgICAgICAgICAgICB0aGlzLm51bWJuZXJXaW5zLnRleHRDb250ZW50ID0gJ1dpbnMg4qyH77iPJztcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRUYWJsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcldpbm5lcihzb3J0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjYW5ub3Qgc29ydCB3aW5uZXJz8J+YrycpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNvcnRCeVRpbWUoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy50aW1lV2luLnRleHRDb250ZW50ID09PSAnQmVzdFRpbWUg4qyH77iPJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IGF3YWl0IGFwaVdpbm5lcnNTZXJ2aWNlXzEuQXBpV2lubmVyc1NlcnZpY2Uuc29ydFdpbih0aGlzLmN1cnJlbnRXaW5uZXJQYWdlLCBsaW1pdCwgdHlwZXNfMS5Tb3J0V2lubmVyLnRpbWUsIHR5cGVzXzEuU29ydE9yZGVyV2lubmVyLkRFU0MpO1xuICAgICAgICAgICAgICAgIHRoaXMudGltZVdpbi50ZXh0Q29udGVudCA9ICdCZXN0VGltZSDirIbvuI8nO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyV2lubmVyKHNvcnRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWQgPSBhd2FpdCBhcGlXaW5uZXJzU2VydmljZV8xLkFwaVdpbm5lcnNTZXJ2aWNlLnNvcnRXaW4odGhpcy5jdXJyZW50V2lubmVyUGFnZSwgbGltaXQsIHR5cGVzXzEuU29ydFdpbm5lci50aW1lLCB0eXBlc18xLlNvcnRPcmRlcldpbm5lci5BU0MpO1xuICAgICAgICAgICAgICAgIHRoaXMudGltZVdpbi50ZXh0Q29udGVudCA9ICdCZXN0VGltZSDirIfvuI8nO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyV2lubmVyKHNvcnRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Nhbm5vdCBzb3J0IHdpbm5lcnMg8J+YrycpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5XaW5uZXJzID0gV2lubmVycztcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGFwcF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9hcHBcIik7XG5jb25zdCBlbWl0dGVyXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2VtaXR0ZXJcIik7XG5jb25zdCBlbWl0dGVyID0gbmV3IGVtaXR0ZXJfMS5FdmVudEVtaXR0ZXIoKTtcbmNvbnN0IGFwcCA9IG5ldyBhcHBfMS5BcHAoZW1pdHRlcik7XG5hcHAuYXBwZW5kRWxlbWVudChkb2N1bWVudC5ib2R5KTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNhcnNBcGlTZXJ2aWNlIiwidHlwZXNfMSIsImFwaVNlcnZpY2VfMSIsInN0YXRpYyIsIkFwaVNlcnZpY2UiLCJnZXQiLCJQYXRoIiwiZ2FyYWdlIiwidHJhbnNmZXIiLCJoZWFkZXJzIiwicG9zdCIsImlkQ2FyIiwiZGVsZXRlIiwicHV0IiwibGltaXQiLCJnZXRQYWdlcyIsImtleSIsInN0YXR1cyIsInJ1bkVuZ2luZSIsImVuZ2luZSIsInBhZ2UiLCJtZXRob2QiLCJib2R5IiwidXJsIiwidGhpcyIsImJhc2VVcmwiLCJyZXNwb25zZSIsImZldGNoIiwiSlNPTiIsInN0cmluZ2lmeSIsImpzb24iLCJlbGVtZW50IiwiZmV0Y2hSZXF1ZXN0IiwiQXBpV2lubmVyc1NlcnZpY2UiLCJ3aW5uZXJzIiwidHlwZVNvcnQiLCJvcmRlciIsInNvcnQiLCJBcHAiLCJoZWFkZXJfMSIsImdhcmFnZV8xIiwid2lubmVyc18xIiwiY2FyXzEiLCJ2aWV3XzEiLCJWaWV3IiwiY29uc3RydWN0b3IiLCJzdXBlciIsImFyZ3VtZW50cyIsImhlYWRlciIsIkhlYWRlciIsImVtaXR0ZXIiLCJHYXJhZ2UiLCJXaW5uZXJzIiwiY2FycyIsIkNhcnMiLCJyb3V0ZXMiLCJ0aXRsZSIsInJvdXRlRWxlbWV0bnMiLCJhcHBlbmRFbGVtZW50IiwicGFyZW50Iiwid3JhcHBlciIsInJlbmRlckVsZW1lbnQiLCJhcHBlbmQiLCJzdWJzY3JpYmUiLCJyb3V0ZSIsIm9uQ2hhbmdlUm91dGUiLCJhY3RpdmVQYWdlIiwiZmluZCIsImhpZGRlblBhZ2UiLCJzaG93IiwiaGlkZSIsImFwaUNhclNlcnZpY2VfMSIsImFwaVdpbm5lcnNTZXJ2aWNlXzEiLCJjdXJyZW50UGFnZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJOdW1iZXIiLCJnZXRDYXJzIiwib25TdWIiLCJnZXRDYXJzUXR5IiwiYXN5bmMiLCJ0b3RhbENhcnMiLCJnZXRBbGxDYXJzIiwicXR5Q2FycyIsImxlbmd0aCIsImNhcnNOdW1iZXJzIiwidGV4dENvbnRlbnQiLCJTdHJpbmciLCJwYWdlR2FyYWdlIiwidG90YWxRdHkiLCJkYXRhQ2FycyIsImdldFBhZ2luYXRpb24iLCJNYXRoIiwicm91bmQiLCJwYWdlTnVtYmVycyIsInJlbmRlckNhcnMiLCJjYXJMaXN0V3JhcHBlciIsImNhcnNXcmFwcGVyIiwiZ2FyYWdlU3VidGl0bGUiLCJwYWdlU3VidGl0bGUiLCJwYWdlQ29udGFpbmVyIiwicHJldkJ0biIsIm5leHRCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwibmV4dFBhZ2UiLCJiaW5kIiwicHJldlBhZ2UiLCJmb3JFYWNoIiwiY2FyIiwic2V0VGltZW91dCIsInJhY2VDb250YWluZXIiLCJpZCIsImNhckNvbnRhaW5lciIsImNhckJveFJvdzEiLCJjYXJCb3hSb3cyIiwiZW5naW5lQnRuIiwic2VsZWN0Q2FyIiwicmVtb3ZlQ2FyIiwic3RhcnRDYXIiLCJzdG9wQ2FyIiwiZGlzYWJsZWQiLCJjYXJOYW1lIiwibmFtZSIsImNhckltZ0JveCIsImlubmVySFRNTCIsInN0eWxlIiwiZmlsbCIsImNvbG9yIiwiZmxhZ0ltZyIsIm9uU2VsZWN0Q2FyIiwib25SZW1vdmVDYXIiLCJzdGFydE9uZUVuZ2luIiwic3RvcE9uZUVuZ2luIiwiZXZlbnQiLCJnZXRJZENhciIsInNlbGVjdGVkQ2FyIiwiZ2V0Q2FyIiwib25FbWl0IiwiY29uc29sZSIsImxvZyIsIm9uVXBkYXRlQ2FyIiwib25DcmVhdGVkQ2FyIiwic3RhcnRSYWNlIiwic3RvcFJhY2UiLCJkZWxldGVDYXIiLCJuZXdjYXIiLCJpbWdDYXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGRyZW4iLCJjaGlsZE5vZGVzIiwibmFtZUNhciIsIm1heFBhZ2UiLCJzZXRJdGVtIiwibWluUGFnZSIsImludGVydmFsQW5pbSIsImNoYW5nZVRvU3RhcnQiLCJvbkVuZ2luQ2FyIiwiRW5naW5lIiwic3RhcnRlZCIsInRhcmdldEJ0biIsInRhcmdldCIsImRpc2FibGVPbmVCdXR0b24iLCJmbGFnRGlzdCIsIndpbmRvdyIsInNjcmVlbiIsIndpZHRoIiwib2Zmc2V0TGVmdCIsIm9mZnNldFdpZHRoIiwibGVmdERpc3QiLCJmdWxsRGlzIiwicGFydERpcyIsInZlbG9jaXR5IiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwidHJhbnNmb3JtIiwicnVuQ2FyIiwidGhlbiIsInJlcyIsImNhdGNoIiwiZXJyb3IiLCJFcnJvciIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsImN1cnJlbnRDYXIiLCJkaXNhYmxlQnV0dG9ucyIsImVuZCIsIndpbm5lclRpbWUiLCJ0b0ZpeGVkIiwiYWRkV2lubmVyIiwic2hvd1dpbk1lc3NhZ2UiLCJzdG9wcGVkIiwic3RhcnRSYWNlQnRuIiwicXVlcnlTZWxlY3RvciIsImN1cnJTdG9wQnRuIiwiY3VyclN0YXJ0QnRuIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsInN0b3BCdXR0b24iLCJhZGQiLCJjYXJDb250IiwiY2xvc2VzdCIsInJhY2VDYXIiLCJzdGFydFJhY2VFbmdpbiIsInB1c2giLCJ1bmRlZmluZWQiLCJhY3RpdmV0ZUJ1dHRvbnMiLCJjYXJJZCIsInRpbWUiLCJjb2xvckNhciIsImNoZWNrV2lubmVyIiwiZ2V0QWxsV2luIiwid2luIiwid2lucyIsInVwZGF0ZVdpbiIsIndpbm5lciIsImNyZWF0ZVdpbiIsInBvcFVwV3JhcHBlciIsIm92ZXJsYXkiLCJtZXNzYWdlVGV4dCIsInNob3dQb3B1cCIsInJlbW92ZUNoaWxkIiwicXVlcnlTZWxlY3RvckFsbCIsImJ0biIsInN0b3BCdG4iLCJuZXh0RWxlbWVudFNpYmxpbmciLCJFdmVudEVtaXR0ZXIiLCJzdWJzY3JpYmVyTWFwIiwiTWFwIiwiY2FsbGJhY2siLCJldmVudENhbGxiYWNrcyIsImhhcyIsInNldCIsInVuc3Vic2NyaWJlIiwiZmlsdGVyIiwiZm4iLCJwYXJhbSIsInN1YnNjcmliZXIiLCJyb3V0ZV8xIiwiY2Fyc0JyYW5kXzEiLCJzZXRDb2xvcl8xIiwiUm91dGVFbGVtZW50IiwicmVuZGVyIiwiY3JlYXRlQnRuIiwidXBkYXRlQnRuIiwiY3JlYXRlSW5wdXQiLCJnZW5lcmF0ZU1vZGVscyIsInVwZGF0ZUlucHV0IiwiY3JlYXRlUGlja2VyIiwidHlwZSIsInVwZGF0ZVBpY2tlciIsInN0YXJ0QnRuIiwiZ2VuZXJhdGVCdG4iLCJjb250cm9sbGVyc1dyYXBwZXIiLCJjcmVhdGVDb250YWluZXIiLCJ1cGRhdGVDb250YWluZXIiLCJjb250cm9sbGVyc0NvbnRhaW5lciIsIm9uVXBkYXRlTmFtZUNhciIsImdldFVwZGF0ZWRDYXIiLCJvbkNyZWF0ZUNhciIsIm9uR2VuZXJhdGVDYXJzIiwiY2xlYXJJbnB1dHMiLCJ1cGRhdGVDYXIiLCJzb21lQ2FyIiwiY3VycmVudFVwZGF0ZUNhciIsImRpc2FibGVkVXBkYXRlIiwiaXNEaXNhYmxlIiwibmV3Q2FyIiwidXBkYXRlZENhciIsImNyZWF0ZUNhck5hbWUiLCJjcmVhdGVkQ2FyIiwiY3JlYXRlQ2FyIiwibGVuZ3RoQmVmb3JlIiwiYXJyIiwiQXJyYXkiLCJtYXAiLCJzZXRDYXJDb2xvciIsInNsaWNlIiwiY2FyTmFtZXMiLCJzZWxlY3RDYXJOYW1lIiwidW5zaGlmdCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJuYXZFbGVtZW50cyIsImhlYWRpbmciLCJoZWFkZXJDb250ZW50IiwiaGVhZGVyTmF2Iiwic3VidGl0bGUiLCJ0ZXhCb3giLCJuYXZMaW5rIiwiY2hhbmdlUm91dGUiLCJnZXRBdHRyaWJ1dGUiLCJsaW5rIiwiaXNTaG93IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJtb2RlbHMiLCJicmFuZCIsInJhbmRvbU1vZGVsIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21CcmFuZCIsInNldENvbG9yIiwidG9TdHJpbmciLCJwYWRTdGFydCIsIlNvcnRXaW5uZXIiLCJTb3J0T3JkZXJXaW5uZXIiLCJ0YWciLCJhdHRyaWJ1dGUiLCJhc3NpZ24iLCJjdXJyZW50V2lubmVyUGFnZSIsImdldEFsbFdpbm5lcnNQYWdpbmF0aW9uIiwib25TdWJXaW4iLCJnZXRXaW5uZXJzUXR5IiwicXR5V2lucyIsImNvbnRhaW5lcldpblBhZ2UiLCJ3aW5ubmVyc0hlYWRlciIsInRhYmxlQ29udGFpbmVyIiwid2luVGFibGVIZWFkIiwiaWRXaW4iLCJjYXJJbWdXaW4iLCJjYXJOYW1lV2luIiwibnVtYm5lcldpbnMiLCJ0aW1lV2luIiwic29ydEJ5UXR5V2lucyIsInNvcnRCeVRpbWUiLCJkYXRhV2lubmVycyIsInJlbmRlcldpbm5lciIsIndpbm5lckxpc3QiLCJjb250ZW50VGFibGUiLCJpIiwibmV3bGlzdCIsIm9uUmVtb3ZlV2luIiwid2lubmVyVG9EZWxldGUiLCJkZWxldGVXaW4iLCJzb3J0ZWQiLCJzb3J0V2luIiwiREVTQyIsIkFTQyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJhcHBfMSJdLCJzb3VyY2VSb290IjoiIn0=