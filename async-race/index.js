(()=>{"use strict";var e={121:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarsApiService=void 0;const r=n(567),i=n(147);t.CarsApiService=class{static getAllCars(){return i.ApiService.get(r.Path.garage)}static createCar(e,t){return i.ApiService.post(r.Path.garage,e,t)}static getCar(e){return i.ApiService.get(`${r.Path.garage}/${e}`)}static deleteCar(e){return i.ApiService.delete(`${r.Path.garage}/${e}`)}static updateCar(e,t,n){return i.ApiService.put(`${r.Path.garage}/${e}`,t,n)}static getPagination(e,t){return i.ApiService.getPages(`${r.Path.garage}?_page=${e}&${t.key}=${t.value}`)}static onEnginCar(e,t){return i.ApiService.runEngine(`${r.Path.engine}?id=${e}&status=${t}`)}static onRunCar(e,t){return i.ApiService.runEngine(`${r.Path.engine}?id=${e}&status=${t}`)}}},147:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiService=void 0;class n{static async fetchRequest(e,t,n,r){const i=`${this.baseUrl}${e}`,s=await fetch(i,{method:t,body:n?JSON.stringify(n):null,headers:r});return await s.json()}static delete(e){return this.fetchRequest(e,"DELETE")}static get(e){return this.fetchRequest(e,"GET")}static post(e,t,n){return this.fetchRequest(e,"POST",t,n)}static put(e,t,n){return this.fetchRequest(e,"PUT",t,n)}static getPages(e){return this.fetchRequest(e,"GET")}static runEngine(e){return this.fetchRequest(e,"PATCH")}}t.ApiService=n,n.baseUrl="http://127.0.0.1:3000/"},116:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiWinnersService=void 0;const r=n(567),i=n(147);t.ApiWinnersService=class{static getAllWin(){return i.ApiService.get(r.Path.winners)}static createWin(e,t){return i.ApiService.post(r.Path.winners,e,t)}static getWin(e){return i.ApiService.get(`${r.Path.winners}/${e}`)}static deleteWin(e){return i.ApiService.delete(`${r.Path.winners}/${e}`)}static updateWin(e,t,n){return i.ApiService.put(`${r.Path.winners}/${e}`,t,n)}static getPagination(e,t){return i.ApiService.getPages(`${r.Path.winners}?_page=${e}&${t.key}=${t.value}`)}static sortWin(e,t){return i.ApiService.runEngine(`${r.Path.winners}?_sort=${e}&_order=${t}`)}}},77:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=n(199),i=n(198),s=n(796),a=n(125),c=n(423);class o extends c.View{constructor(){super(...arguments),this.header=new r.Header(this.emitter),this.garage=new i.Garage(this.emitter),this.winners=new s.Winners(this.emitter),this.cars=new a.Cars(this.emitter),this.routes=[{title:"garage",url:"garage"},{title:"winners",url:"winners"}],this.routeElemetns=[this.garage,this.winners]}appendElement(e){this.wrapper=super.renderElement("div","main-wrapper"),e.append(this.wrapper),this.garage.appendElement(this.wrapper),this.cars.appendElement(this.garage.wrapper),this.emitter.subscribe("routeChanged",(e=>this.onChangeRoute(e))),this.header.appendElement(this.wrapper),this.winners.appendElement(this.wrapper)}onChangeRoute(e){const t=this.routeElemetns.find((t=>t.url===e.url)),n=this.routeElemetns.find((t=>t.url!==e.url));t?.show(),n?.hide()}}t.App=o},125:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cars=void 0;const r=n(423),i=n(567),s=n(121),a=n(116),c={key:"_limit",value:7};class o extends r.View{constructor(e){super(e),this.emitter=e,this.currentPage=localStorage.getItem("currentPage")?Number(localStorage.getItem("currentPage")):1,this.getCars(this.currentPage),this.onSub(),this.getCarsQty()}async getCarsQty(){const e=await s.CarsApiService.getAllCars();this.qtyCars=e.length,this.carsNumbers.textContent=String(this.qtyCars)}async getCars(e=1){const t=(await fetch(`http://127.0.0.1:3000/garage?_page=${e}&_limit=${c.value}`,{method:"GET"})).headers.get("X-Total-Count");this.dataCars=await s.CarsApiService.getPagination(e,c),0===this.dataCars.length&&(this.currentPage=Number(t)/c.value<1?1:Math.round(Number(t)/c.value),this.dataCars=await s.CarsApiService.getPagination(this.currentPage,c)),this.pageNumbers.textContent=String(this.currentPage),this.renderCars(this.dataCars)}appendElement(e){this.carListWrapper=super.renderElement("div","cars-list-wrapper"),this.carsWrapper=super.renderElement("div","cars-pagination"),this.garageSubtitle=super.renderElement("h3","title",{textContent:"Garage #"}),this.carsNumbers=super.renderElement("span","title"),this.pageSubtitle=super.renderElement("h4","subtitle-page",{textContent:"Pages #"}),this.pageNumbers=super.renderElement("span","subtitle-page");const t=super.renderElement("div","page-wrapper");this.prevBtn=super.renderElement("button","prev-btn btn",{textContent:"prev"}),this.nextBtn=super.renderElement("button","next-btn btn",{textContent:"next"}),this.carsWrapper.append(this.garageSubtitle,t),t.append(this.pageSubtitle,this.prevBtn,this.nextBtn),this.garageSubtitle.append(this.carsNumbers),this.pageSubtitle.append(this.pageNumbers),e.append(this.carsWrapper),e.append(this.carListWrapper),this.nextBtn.addEventListener("click",this.nextPage.bind(this)),this.prevBtn.addEventListener("click",this.prevPage.bind(this))}renderCars(e){e.forEach((e=>{setTimeout((()=>{const t=super.renderElement("div","race-container",{id:e.id}),n=super.renderElement("div","car-container"),r=super.renderElement("div","row1"),i=super.renderElement("div","row2"),s=super.renderElement("div","engine-btn-box"),a=super.renderElement("button","select-btn btn",{textContent:"select"}),c=super.renderElement("button","remove-btn btn",{textContent:"remove"});this.startCar=super.renderElement("button","start-btn engine-btn",{textContent:"A"}),this.stopCar=super.renderElement("button","stop-btn engine-btn",{textContent:"B"}),this.carName=super.renderElement("h5","car-name",{textContent:e.name}),this.carImgBox=super.renderElement("div","car-img-box"),this.carImgBox.innerHTML='<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n    width="1280.000000pt" height="806.000000pt" viewBox="0 0 1280.000000 806.000000"\n    preserveAspectRatio="xMidYMid meet">\n   <g transform="translate(0.000000,806.000000) scale(0.100000,-0.100000)"\n   fill="000000"  stroke="none">\n   <path d="M6845 8050 c-38 -5 -135 -13 -215 -20 -376 -30 -754 -106 -1115 -225\n   -237 -78 -376 -135 -610 -250 -540 -265 -968 -577 -1441 -1050 -254 -254 -407\n   -428 -672 -765 -339 -431 -550 -614 -805 -698 -50 -17 -180 -49 -287 -72 -337\n   -73 -537 -140 -765 -258 -550 -286 -828 -748 -899 -1497 -43 -453 -46 -589\n   -16 -763 52 -304 149 -494 354 -697 122 -122 219 -193 364 -266 l95 -49 180 0\n   180 0 -7 55 c-29 250 -26 448 10 660 113 673 547 1258 1160 1564 908 453 1998\n   218 2641 -570 337 -413 518 -983 474 -1493 -6 -78 -14 -159 -18 -179 l-6 -37\n   1236 0 c680 0 1238 3 1240 7 2 5 -2 55 -9 113 -7 58 -13 163 -14 233 -2 974\n   661 1836 1602 2081 205 54 334 70 553 70 352 0 627 -62 940 -213 558 -270 973\n   -767 1138 -1361 54 -192 70 -318 71 -535 1 -110 -2 -233 -7 -273 l-7 -73 46\n   38 c69 57 177 185 255 301 152 227 241 473 286 792 30 215 22 415 -28 664 -81\n   402 -293 743 -598 963 -2 1 -5 47 -7 100 -4 169 -48 381 -144 698 -122 401\n   -246 659 -497 1028 -214 316 -498 666 -763 940 -102 106 -149 146 -256 216\n   -415 275 -1040 511 -1724 650 -358 73 -691 117 -1085 145 -121 9 -276 20 -345\n   26 -142 11 -381 11 -485 0z m60 -824 c210 -59 384 -203 475 -391 72 -148 73\n   -157 77 -580 5 -414 -7 -727 -32 -851 -30 -146 -100 -259 -189 -307 l-41 -22\n   -1540 -3 c-1145 -2 -1554 0 -1595 9 -121 25 -221 96 -261 182 -24 53 -25 172\n   -3 248 61 205 310 536 693 920 108 107 246 235 306 283 412 330 803 488 1305\n   530 25 2 203 2 395 1 294 -1 360 -4 410 -19z m2060 -91 c152 -34 435 -126 543\n   -176 388 -179 758 -565 982 -1024 146 -300 194 -533 139 -679 -28 -76 -99\n   -139 -186 -166 -63 -19 -92 -20 -991 -20 -924 0 -926 0 -970 21 -51 25 -93 79\n   -119 152 -17 49 -18 107 -18 877 l0 825 23 55 c39 95 78 128 180 151 109 25\n   261 19 417 -16z"/>\n   <path d="M3140 3569 c-718 -69 -1333 -583 -1536 -1285 -51 -174 -66 -310 -62\n   -529 5 -226 25 -344 85 -524 95 -285 238 -508 467 -728 279 -269 600 -421\n   1020 -482 174 -26 238 -26 412 0 355 52 606 152 866 346 343 255 590 642 678\n   1063 63 305 44 631 -55 928 -265 792 -1038 1292 -1875 1211z m359 -939 c201\n   -41 398 -169 516 -335 241 -339 213 -786 -69 -1082 -166 -175 -348 -260 -580\n   -271 -200 -8 -360 35 -517 139 -444 298 -515 911 -150 1302 199 213 506 308\n   800 247z"/>\n   <path d="M9871 3569 c-214 -24 -398 -77 -591 -170 -809 -390 -1201 -1314 -919\n   -2169 189 -575 685 -1030 1274 -1170 108 -26 346 -60 419 -60 81 0 330 37 441\n   65 706 179 1234 772 1330 1492 128 958 -528 1840 -1485 1998 -119 19 -358 27\n   -469 14z m319 -930 c350 -56 635 -330 705 -678 23 -112 16 -294 -15 -401 -67\n   -234 -235 -431 -455 -536 -141 -67 -196 -79 -370 -79 -175 0 -231 13 -371 80\n   -178 86 -313 221 -399 398 -67 139 -79 197 -80 367 0 153 10 210 59 332 107\n   263 365 470 648 517 75 12 202 13 278 0z"/>\n   </g>\n   </svg>\n   ',this.carImgBox.style.fill=e.color,this.flagImg=super.renderElement("div","flag"),t.append(n,this.flagImg),n.append(r,i),r.append(a,c,this.carName),i.append(s,this.carImgBox),s.append(this.startCar,this.stopCar),this.carListWrapper.append(t),a.addEventListener("click",this.onSelectCar.bind(this)),c.addEventListener("click",this.onRemoveCar.bind(this)),this.startCar.addEventListener("click",this.startOneEngin.bind(this)),this.stopCar.addEventListener("click",this.stopOneEngin.bind(this))}),10)}))}async onSelectCar(e){try{const t=this.getIdCar(e),n=await s.CarsApiService.getCar(t);t&&this.emitter.onEmit("onSelectedCar",n)}catch{console.log("😔 cannot select car")}}onSub(){this.emitter.subscribe("onUpdateCar",(e=>this.onUpdateCar(e))),this.emitter.subscribe("onCreatedCar",(()=>this.onCreatedCar())),this.emitter.subscribe("onStartRace",(()=>this.startRace())),this.emitter.subscribe("onStopRace",(()=>this.stopRace()))}async onRemoveCar(e){try{const t=this.getIdCar(e);if(t){const e=await s.CarsApiService.getCar(t);await s.CarsApiService.deleteCar(t),this.getCarsQty(),this.carListWrapper.innerHTML="",this.getCars(this.currentPage),this.emitter.onEmit("clearInputs"),this.emitter.onEmit("onRemove",e)}}catch{console.log("💣 cannot remove car")}}async onUpdateCar(e){try{if((await s.CarsApiService.getCar(e.id)).id){const t=document.getElementById(`${e.id}`)?.children[0].children[1].childNodes[1],n=document.getElementById(`${e.id}`)?.children[0].children[0].childNodes[2];t.style.fill=e.color,n.textContent=e.name,this.carsNumbers.textContent=String(this.qtyCars)}}catch{console.log("car is not exist")}}async onCreatedCar(){this.dataCars=await s.CarsApiService.getPagination(this.currentPage,c),this.carListWrapper.innerHTML="",this.renderCars(this.dataCars),this.getCarsQty()}async nextPage(){try{const e=this.qtyCars/c.value;this.currentPage<e?(this.nextBtn.disabled=!1,this.prevBtn.disabled=!1,this.currentPage+=1,localStorage.setItem("currentPage",String(this.currentPage)),this.pageNumbers.textContent=String(this.currentPage),this.carListWrapper.innerHTML="",this.getCars(this.currentPage)):this.nextBtn.disabled=!0}catch{console.log("👁️👁️cannot get next page")}}async prevPage(){try{const e=1;this.currentPage>e?(this.prevBtn.disabled=!1,this.nextBtn.disabled=!1,this.currentPage-=1,localStorage.setItem("currentPage",String(this.currentPage)),this.pageNumbers.textContent=String(this.currentPage),this.carListWrapper.innerHTML="",this.getCars(this.currentPage)):this.prevBtn.disabled=!0}catch{console.log("👁️👁️cannot get prev page")}}async startOneEngin(e,t){let n;try{const r=e?this.getIdCar(e):t,a=Date.now(),c=await s.CarsApiService.getCar(r),o=document.getElementById(`${r}`)?.children[0].children[1].childNodes[1],d=await s.CarsApiService.onEnginCar(r,i.Engine.started);e||this.disableButtons();const l=window.screen.width-this.flagImg.offsetLeft+this.flagImg.offsetWidth;let p=this.carImgBox.offsetLeft-this.carImgBox.offsetWidth+5;const h=window.screen.width-p-l,u=(h-p)/(50*d.velocity/1e3*60);this.emitter.subscribe("onStopCar",(()=>clearInterval(n))),n=setInterval((()=>{if(p+=u,p>=h){const t=Date.now();this.emitter.subscribe("onStopCar",(()=>clearInterval(n))),clearInterval(n),e||this.winnerTime||(this.winnerTime=+((t-a)/1e3).toFixed(2),this.addWinner(r,this.winnerTime,c.color,c.name),this.showWinMessage(r,c.name,this.winnerTime))}o.style.transform=`translateX(${p}px)`}),16);const g=fetch(`http://127.0.0.1:3000/engine?id=${r}&status=drive`,{method:"PATCH"});return g.then((e=>e.json())).catch((e=>new Error(e))),200!==(await g).status&&clearInterval(n),await g}catch(e){throw clearInterval(n),new Error("💥 Engine is broken")}}async stopOneEngin(e,t){try{this.activeteButtons();const n=e?this.getIdCar(e):t,r=document.querySelector(".start-race-btn");this.startCar.disabled=!1,r&&(r.disabled=!1),r.classList.remove("disabled"),this.startCar.classList.remove("disabled"),await s.CarsApiService.onEnginCar(n,i.Engine.stopped),this.emitter.onEmit("onStopCar");const a=document.getElementById(`${n}`)?.children[0].children[1].childNodes[1];a.style.transform="translateX(0px)"}catch{console.log("🤓 i was trying to stop car")}}getIdCar(e){const t=e.target.closest(".race-container");return Number(t?.id)}async startRace(){try{this.disableButtons();const e=[];(await s.CarsApiService.getPagination(this.currentPage,c)).forEach((async t=>{const n=await this.startOneEngin(void 0,t.id);200===n.status&&e.push(n)})),this.winnerTime=0}catch{console.log("🚗 cannot start race ")}}async stopRace(){try{(await s.CarsApiService.getPagination(this.currentPage,c)).forEach((e=>this.stopOneEngin(void 0,e.id))),this.activeteButtons()}catch{console.log("🤓 i was trying to stop rase")}}async addWinner(e,t,n,r){try{const i=(await a.ApiWinnersService.getAllWin()).find((t=>t.carId===e));if(i){console.log("winner update",e),i.wins+=1,i.time=i.time<=t?i.time:t;const n={name:r,wins:i.wins,time:i.time,color:i.color};await a.ApiWinnersService.updateWin(e,n,{"Content-Type":"application/json"})}else{const i={carId:e,time:t,wins:1,color:n,name:r};await a.ApiWinnersService.createWin(i,{"Content-Type":"application/json"})}this.emitter.onEmit("renderWinners")}catch{console.error("Winner is not found")}}showWinMessage(e,t,n){const r=super.renderElement("div","popup-wrapper"),i=super.renderElement("div","overlay"),s=super.renderElement("div","win-message",{textContent:`Car id#${e} ${t} is win with time ${n}s`});document.body.append(i),i.append(r),r.append(s);const a=setInterval((()=>{document.querySelector(".overlay")?document.body.removeChild(i):clearInterval(a)}),3e3)}disableButtons(){const e=document.querySelector(".start-race-btn");[...document.querySelectorAll(".start-btn")].forEach((e=>{e.disabled=!0,e.classList.add("disabled")})),e&&(e.disabled=!0),e.classList.add("disabled")}activeteButtons(){const e=document.querySelector(".start-race-btn");[...document.querySelectorAll(".start-btn")].forEach((e=>{e.disabled=!1,e.classList.remove("disabled")})),e&&(e.disabled=!1),e.classList.remove("disabled")}}t.Cars=o},504:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this.subscriberMap=new Map}subscribe(e,t){const n=this.subscriberMap.get(e)||[];this.subscriberMap.has(e)?this.subscriberMap.set(e,[...n,t]):this.subscriberMap.set(e,[t])}unsubscribe(e,t){const n=this.subscriberMap.get(e)||[];this.subscriberMap.has(e)&&this.subscriberMap.set(e,n.filter((e=>e!==t)))}onEmit(e,t){const n=this.subscriberMap.get(e);n&&n.forEach((e=>e(t)))}}},198:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Garage=void 0;const r=n(919),i=n(121),s=n(992),a=n(956);class c extends r.RouteElement{constructor(){super(...arguments),this.url="garage"}async appendElement(e){super.render(e),this.createBtn=super.renderElement("button","create-btn btn",{textContent:"create"}),this.updateBtn=super.renderElement("button","update-btn btn",{textContent:"update"}),this.createInput=super.renderElement("select","create-input input"),this.generateModels(),this.updateInput=super.renderElement("input","update-input input"),this.createPicker=super.renderElement("input","create-picker picker",{type:"color"}),this.updatePicker=super.renderElement("input","uodate-picker picker",{type:"color"}),this.startBtn=super.renderElement("button","start-race-btn btn",{textContent:"start"}),this.stopBtn=super.renderElement("button","stop-btn btn",{textContent:"stop"}),this.generateBtn=super.renderElement("button","update-btn btn",{textContent:"generate cars"});const t=super.renderElement("div","controllers-wrapper"),n=super.renderElement("div","create-container garage-input-container"),r=super.renderElement("div","update-container garage-input-container");this.updateInput.disabled=!0,this.updatePicker.disabled=!0,this.updateBtn.disabled=!0;const i=super.renderElement("div","controller-container garage-input-container");this.wrapper.append(t),t.append(n,r,i),n.append(this.createInput,this.createPicker,this.createBtn),r.append(this.updateInput,this.updatePicker,this.updateBtn),i.append(this.startBtn,this.stopBtn,this.generateBtn),this.onUpdateNameCar(),this.updateBtn.addEventListener("click",this.getUpdatedCar.bind(this)),this.createBtn.addEventListener("click",this.onCreateCar.bind(this)),this.generateBtn.addEventListener("click",this.onGenerateCars.bind(this)),this.startBtn.addEventListener("click",this.startRace.bind(this)),this.stopBtn.addEventListener("click",this.stopRace.bind(this)),this.emitter.subscribe("clearInputs",(()=>this.clearInputs()))}onUpdateNameCar(){this.emitter.subscribe("onSelectedCar",(e=>this.updateCar(e)))}updateCar(e){e&&(this.currentUpdateCar=e,console.log("some",e),this.updateInput.value=e.name,this.updatePicker.value=e.color,this.disabledUpdate(!1))}disabledUpdate(e){this.updateInput.disabled=e,this.updatePicker.disabled=e,this.updateBtn.disabled=e}async getUpdatedCar(){try{const{id:e}=this.currentUpdateCar,t={name:this.updateInput.value,color:this.updatePicker.value};await i.CarsApiService.updateCar(e,t,{"Content-Type":"application/json"});const n=await i.CarsApiService.getCar(e);n.id&&this.emitter.onEmit("onUpdateCar",n),this.updateInput.value="",this.updatePicker.value="#000000",this.disabledUpdate(!0)}catch{console.log("car is not exist")}}async onCreateCar(){const e={name:this.createInput.value?this.createInput.value:(0,s.createCarName)(),color:this.createPicker.value},t=await i.CarsApiService.createCar(e,{"Content-Type":"application/json"});this.emitter.onEmit("onCreatedCar",t),this.createInput.value="",this.createPicker.value="#000000"}async onGenerateCars(){try{const e=(await i.CarsApiService.getAllCars()).length-1,t=new Array(100).fill("0").map((async()=>{const e={name:(0,s.createCarName)(),color:(0,a.setCarColor)()};return await i.CarsApiService.createCar(e,{"Content-Type":"application/json"}),e}));console.log(t,e);const n=await i.CarsApiService.getAllCars();this.emitter.onEmit("onCreatedCar",n.slice(e+1))}catch{console.log("🫠 cannot generate cars")}}clearInputs(){this.createInput.value="",this.createPicker.value="#000000",this.updateInput.value="",this.updatePicker.value="#000000"}generateModels(){const e=(0,s.selectCarName)();e.unshift(""),e.forEach((e=>{const t=document.createElement("option");t.setAttribute("value",e),t.textContent=e,this.createInput.append(t)}))}startRace(){this.emitter.onEmit("onStartRace")}stopRace(){this.emitter.onEmit("onStopRace")}}t.Garage=c},199:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const r=n(423);class i extends r.View{constructor(){super(...arguments),this.navElements=[],this.routes=[{title:"garage",url:"garage"},{title:"winners",url:"winners"}]}appendElement(e){const t=super.renderElement("header","header"),n=super.renderElement("h1","heading",{textContent:"async-Race"}),r=super.renderElement("div","header-content"),i=super.renderElement("nav","nav");this.subtitle=super.renderElement("h2","subtitle",{textContent:"async-Race"});const s=super.renderElement("div","header__text-wrappter");e.append(t),t.append(n,s,r),r.append(this.subtitle,i),this.routes.forEach((e=>{const t=super.renderElement("a",`${e.title}-link nav-link`,{textContent:e.title});t.setAttribute("url",e.url),this.navElements.push(t),i.append(t)})),this.onChangeRoute(this.routes[0]),i.addEventListener("click",this.changeRoute.bind(this))}onChangeRoute(e){this.subtitle.innerHTML=e.title,this.emitter.onEmit("routeChanged",e)}changeRoute(e){const t=e.target.getAttribute("url"),n=this.routes.find((e=>e.url===t));n&&this.onChangeRoute(n)}}t.Header=i},919:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RouteElement=void 0;const r=n(423);class i extends r.View{constructor(){super(...arguments),this.isShow=!1}render(e){this.parent=e,this.wrapper=document.createElement("section"),this.wrapper.className=`${this.url}-wrapper`,this.wrapper.setAttribute("url",this.url)}show(){this.isShow||(this.isShow=!0,this.parent.appendChild(this.wrapper))}hide(){this.isShow&&(this.isShow=!1,this.parent.removeChild(this.wrapper))}}t.RouteElement=i},992:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.selectCarName=t.createCarName=t.models=t.brand=void 0,t.brand=["Audi","Beta Julieta","BMW","Citroen","Infiniti","Jeep","Kia","Lexus","Nissan","Opel","Volvo"],t.models=["A4","X2","CEED","CERATO","RIO","GENESIS","GETZ","GRANDEUR","MATRIX","XCENT","Alfa Romeo"],t.createCarName=()=>{const e=Math.floor(Math.random()*t.models.length),n=Math.floor(Math.random()*t.brand.length);return`${t.brand[n]} ${t.models[e]} `},t.selectCarName=()=>Array(6).fill("").map((()=>`${t.brand[Math.floor(Math.random()*t.brand.length)]} ${t.models[Math.floor(Math.random()*t.models.length)]}`)),console.log()},956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setCarColor=void 0;const n=()=>{const e=Math.floor(255*Math.random()).toString(16);return 2===e.length?e:e.padStart(2,"0")};t.setCarColor=()=>`#${n()}${n()}${n()}`},567:(e,t)=>{var n,r,i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.SortOrderWinner=t.SortWinner=t.Engine=t.Path=void 0,function(e){e.garage="garage",e.engine="engine",e.winners="winners"}(n||(t.Path=n={})),function(e){e.started="started",e.stopped="stopped",e.drive="drive"}(r||(t.Engine=r={})),function(e){e.id="id",e.wins="wins",e.time="time"}(i||(t.SortWinner=i={})),function(e){e.ASC="ASC",e.DESC="DESC"}(s||(t.SortOrderWinner=s={}))},423:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0,t.View=class{constructor(e){this.emitter=e}renderElement(e,t,n){const r=document.createElement(e);return t&&(r.className=t),n&&Object.assign(r,n),r}}},796:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Winners=void 0;const r=n(919),i=n(116),s={key:"_limit",value:10};class a extends r.RouteElement{constructor(e){super(e),this.emitter=e,this.url="winners",this.currentWinnerPage=localStorage.getItem("currentPageWinner")?Number(localStorage.getItem("currentPageWinner")):1,this.getAllWinnersPagination(this.currentWinnerPage),this.onSubWin(),this.getWinnersQty()}async getWinnersQty(){const e=await i.ApiWinnersService.getAllWin();this.qtyWins=e.length,this.carsNumbers.textContent=String(this.qtyWins)}appendElement(e){super.render(e),this.nextBtn=super.renderElement("button","next-btn btn win-page-btn",{textContent:"next"}),this.prevBtn=super.renderElement("button","prev-btn btn win-page-btn",{textContent:"prev"});const t=super.renderElement("div","wrapper-page_controller");this.winnnersHeader=super.renderElement("h3","title",{textContent:"Winners #"}),this.carsNumbers=super.renderElement("span","title"),this.pageNumbers=super.renderElement("h4","subtitle-page",{textContent:"Pages(here number)"}),this.tableContainer=super.renderElement("div","table-container"),this.winTableHead=super.renderElement("div","table-head table-row"),this.idWin=super.renderElement("span","table-id-winner",{textContent:"Number"}),this.carImgWin=super.renderElement("span","table-img-winner",{textContent:"Car"}),this.carNameWin=super.renderElement("span","table-name-winner",{textContent:"Name"}),this.numbnerWins=super.renderElement("span","table-numbers-wins",{textContent:"Wins"}),this.timeWin=super.renderElement("span","table-time-wins",{textContent:"Best time"}),this.wrapper.append(this.winnnersHeader,t,this.tableContainer),this.winnnersHeader.append(this.carsNumbers),t.append(this.pageNumbers,this.prevBtn,this.nextBtn),this.tableContainer.append(this.winTableHead),this.winTableHead.append(this.idWin,this.carImgWin,this.carNameWin,this.numbnerWins,this.timeWin),this.nextBtn.addEventListener("click",this.nextPage.bind(this)),this.prevBtn.addEventListener("click",this.prevPage.bind(this))}async getAllWinnersPagination(e=1){this.dataWinners=await i.ApiWinnersService.getPagination(e,s),0===this.dataWinners.length&&(this.currentWinnerPage-=1,this.dataWinners=await i.ApiWinnersService.getPagination(this.currentWinnerPage,s)),this.pageNumbers.textContent=String(this.currentWinnerPage),this.renderWinner(this.dataWinners)}renderWinner(e){this.contentTable=super.renderElement("div","table-content"),this.tableContainer.append(this.contentTable),e.forEach((e=>{const t=super.renderElement("div","table-head table-row"),n=super.renderElement("span","table-id-winner",{textContent:e.id}),r=super.renderElement("span","table-img-winner",{textContent:e.color}),i=super.renderElement("span","table-name-winner",{textContent:e.name}),s=super.renderElement("span","table-numbers-wins",{textContent:e.wins}),a=super.renderElement("span","table-time-wins",{textContent:e.time});r.innerHTML='<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n    width="1280.000000pt" height="806.000000pt" viewBox="0 0 1280.000000 806.000000"\n    preserveAspectRatio="xMidYMid meet">\n   <g transform="translate(0.000000,806.000000) scale(0.100000,-0.100000)"\n   fill="000000"  stroke="none">\n   <path d="M6845 8050 c-38 -5 -135 -13 -215 -20 -376 -30 -754 -106 -1115 -225\n   -237 -78 -376 -135 -610 -250 -540 -265 -968 -577 -1441 -1050 -254 -254 -407\n   -428 -672 -765 -339 -431 -550 -614 -805 -698 -50 -17 -180 -49 -287 -72 -337\n   -73 -537 -140 -765 -258 -550 -286 -828 -748 -899 -1497 -43 -453 -46 -589\n   -16 -763 52 -304 149 -494 354 -697 122 -122 219 -193 364 -266 l95 -49 180 0\n   180 0 -7 55 c-29 250 -26 448 10 660 113 673 547 1258 1160 1564 908 453 1998\n   218 2641 -570 337 -413 518 -983 474 -1493 -6 -78 -14 -159 -18 -179 l-6 -37\n   1236 0 c680 0 1238 3 1240 7 2 5 -2 55 -9 113 -7 58 -13 163 -14 233 -2 974\n   661 1836 1602 2081 205 54 334 70 553 70 352 0 627 -62 940 -213 558 -270 973\n   -767 1138 -1361 54 -192 70 -318 71 -535 1 -110 -2 -233 -7 -273 l-7 -73 46\n   38 c69 57 177 185 255 301 152 227 241 473 286 792 30 215 22 415 -28 664 -81\n   402 -293 743 -598 963 -2 1 -5 47 -7 100 -4 169 -48 381 -144 698 -122 401\n   -246 659 -497 1028 -214 316 -498 666 -763 940 -102 106 -149 146 -256 216\n   -415 275 -1040 511 -1724 650 -358 73 -691 117 -1085 145 -121 9 -276 20 -345\n   26 -142 11 -381 11 -485 0z m60 -824 c210 -59 384 -203 475 -391 72 -148 73\n   -157 77 -580 5 -414 -7 -727 -32 -851 -30 -146 -100 -259 -189 -307 l-41 -22\n   -1540 -3 c-1145 -2 -1554 0 -1595 9 -121 25 -221 96 -261 182 -24 53 -25 172\n   -3 248 61 205 310 536 693 920 108 107 246 235 306 283 412 330 803 488 1305\n   530 25 2 203 2 395 1 294 -1 360 -4 410 -19z m2060 -91 c152 -34 435 -126 543\n   -176 388 -179 758 -565 982 -1024 146 -300 194 -533 139 -679 -28 -76 -99\n   -139 -186 -166 -63 -19 -92 -20 -991 -20 -924 0 -926 0 -970 21 -51 25 -93 79\n   -119 152 -17 49 -18 107 -18 877 l0 825 23 55 c39 95 78 128 180 151 109 25\n   261 19 417 -16z"/>\n   <path d="M3140 3569 c-718 -69 -1333 -583 -1536 -1285 -51 -174 -66 -310 -62\n   -529 5 -226 25 -344 85 -524 95 -285 238 -508 467 -728 279 -269 600 -421\n   1020 -482 174 -26 238 -26 412 0 355 52 606 152 866 346 343 255 590 642 678\n   1063 63 305 44 631 -55 928 -265 792 -1038 1292 -1875 1211z m359 -939 c201\n   -41 398 -169 516 -335 241 -339 213 -786 -69 -1082 -166 -175 -348 -260 -580\n   -271 -200 -8 -360 35 -517 139 -444 298 -515 911 -150 1302 199 213 506 308\n   800 247z"/>\n   <path d="M9871 3569 c-214 -24 -398 -77 -591 -170 -809 -390 -1201 -1314 -919\n   -2169 189 -575 685 -1030 1274 -1170 108 -26 346 -60 419 -60 81 0 330 37 441\n   65 706 179 1234 772 1330 1492 128 958 -528 1840 -1485 1998 -119 19 -358 27\n   -469 14z m319 -930 c350 -56 635 -330 705 -678 23 -112 16 -294 -15 -401 -67\n   -234 -235 -431 -455 -536 -141 -67 -196 -79 -370 -79 -175 0 -231 13 -371 80\n   -178 86 -313 221 -399 398 -67 139 -79 197 -80 367 0 153 10 210 59 332 107\n   263 365 470 648 517 75 12 202 13 278 0z"/>\n   </g>\n   </svg>\n   ',r.style.fill=e.color,this.contentTable.append(t),t.append(n,r,i,s,a)}))}async nextPage(){const e=this.qtyWins/s.value;if(this.currentWinnerPage<e){this.nextBtn.disabled=!1,this.prevBtn.disabled=!1,this.currentWinnerPage+=1,localStorage.setItem("currentPageWinner",String(this.currentWinnerPage)),this.pageNumbers.textContent=String(this.currentWinnerPage),this.contentTable.innerHTML="";const e=await this.getAllWinnersPagination(this.currentWinnerPage);console.log(e)}else this.nextBtn.disabled=!0}async prevPage(){this.currentWinnerPage>1?(this.prevBtn.disabled=!1,this.nextBtn.disabled=!1,this.currentWinnerPage-=1,localStorage.setItem("currentPageWinner",String(this.currentWinnerPage)),this.pageNumbers.textContent=String(this.currentWinnerPage),this.contentTable.innerHTML="",await this.getAllWinnersPagination(this.currentWinnerPage)):this.prevBtn.disabled=!0}onSubWin(){this.emitter.subscribe("onRemove",(e=>this.onRemoveWin(e))),this.emitter.subscribe("renderWinners",(()=>{this.contentTable.innerHTML="",this.getAllWinnersPagination(this.currentWinnerPage)}))}async onRemoveWin(e){if(e){const{id:t}=e,n=(await i.ApiWinnersService.getAllWin()).find((e=>e.carId===t));console.log("winnerToDelete",n),n&&await i.ApiWinnersService.deleteWin(n.id),this.getWinnersQty(),this.contentTable.innerHTML="",this.getAllWinnersPagination(this.currentWinnerPage)}}}t.Winners=a}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{const e=n(77),t=new(n(504).EventEmitter);new e.App(t).appendElement(document.body)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d0JBQXdCdlIsS0FBS3NSLGtCQUFrQixHQUU1RCxDQUNBL04sa0JBQWtCNEIsR0FDZCxHQUFJQSxFQUFLLENBQ0wsTUFBTSxHQUFFRyxHQUFPSCxFQUVUdU4sU0FEa0IzUCxFQUFvQnRDLGtCQUFrQjJLLGFBQzdCMUksTUFBTTJJLEdBQVFBLEVBQUlMLFFBQVUxRixJQUM3RDBCLFFBQVFDLElBQUksaUJBQWtCeUwsR0FDMUJBLFNBQ00zUCxFQUFvQnRDLGtCQUFrQmtTLFVBQVVELEVBQWVwTixJQUN6RXRGLEtBQUt5UixnQkFDTHpSLEtBQUt1UyxhQUFhck0sVUFBWSxHQUM5QmxHLEtBQUt1Uix3QkFBd0J2UixLQUFLc1Isa0JBQ3RDLENBQ0osRUFFSmhULEVBQVFxRCxRQUFVQSxDLEdDN0tkaVIsRUFBMkIsQ0FBQyxFQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCaEksSUFBakJpSSxFQUNILE9BQU9BLEVBQWF6VSxRQUdyQixJQUFJMFUsRUFBU0osRUFBeUJFLEdBQVksQ0FHakR4VSxRQUFTLENBQUMsR0FPWCxPQUhBMlUsRUFBb0JILEdBQVVFLEVBQVFBLEVBQU8xVSxRQUFTdVUsR0FHL0NHLEVBQU8xVSxPQUNmLEMsTUNwQkEsTUFBTTRVLEVBQVEsRUFBUSxJQUVoQnpSLEVBQVUsSUFERSxFQUFRLEtBQ0l5SyxjQUNsQixJQUFJZ0gsRUFBTXJTLElBQUlZLEdBQ3RCUSxjQUFjd0YsU0FBUzNILEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3luYy1yYWNlLy4vc3JjL2NvbXBvbmVudHMvYXBpL2FwaUNhclNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vYXN5bmMtcmFjZS8uL3NyYy9jb21wb25lbnRzL2FwaS9hcGlTZXJ2aWNlLnRzIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvY29tcG9uZW50cy9hcGkvYXBpV2lubmVyc1NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vYXN5bmMtcmFjZS8uL3NyYy9jb21wb25lbnRzL2FwcC50cyIsIndlYnBhY2s6Ly9hc3luYy1yYWNlLy4vc3JjL2NvbXBvbmVudHMvY2FyLnRzIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvY29tcG9uZW50cy9lbWl0dGVyLnRzIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvY29tcG9uZW50cy9nYXJhZ2UudHMiLCJ3ZWJwYWNrOi8vYXN5bmMtcmFjZS8uL3NyYy9jb21wb25lbnRzL2hlYWRlci50cyIsIndlYnBhY2s6Ly9hc3luYy1yYWNlLy4vc3JjL2NvbXBvbmVudHMvcm91dGVzL3JvdXRlLnRzIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvY29tcG9uZW50cy91dGlscy9jYXJzQnJhbmQudHMiLCJ3ZWJwYWNrOi8vYXN5bmMtcmFjZS8uL3NyYy9jb21wb25lbnRzL3V0aWxzL3NldENvbG9yLnRzIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvY29tcG9uZW50cy91dGlscy90eXBlcy50cyIsIndlYnBhY2s6Ly9hc3luYy1yYWNlLy4vc3JjL2NvbXBvbmVudHMvdmlldy50cyIsIndlYnBhY2s6Ly9hc3luYy1yYWNlLy4vc3JjL2NvbXBvbmVudHMvd2lubmVycy50cyIsIndlYnBhY2s6Ly9hc3luYy1yYWNlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FzeW5jLXJhY2UvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNhcnNBcGlTZXJ2aWNlID0gdm9pZCAwO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy90eXBlc1wiKTtcbmNvbnN0IGFwaVNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL2FwaVNlcnZpY2VcIik7XG5jbGFzcyBDYXJzQXBpU2VydmljZSB7XG4gICAgc3RhdGljIGdldEFsbENhcnMoKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5nZXQodHlwZXNfMS5QYXRoLmdhcmFnZSk7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGVDYXIodHJhbnNmZXIsIGhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIGFwaVNlcnZpY2VfMS5BcGlTZXJ2aWNlLnBvc3QodHlwZXNfMS5QYXRoLmdhcmFnZSwgdHJhbnNmZXIsIGhlYWRlcnMpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0Q2FyKGlkQ2FyKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5nZXQoYCR7dHlwZXNfMS5QYXRoLmdhcmFnZX0vJHtpZENhcn1gKTtcbiAgICB9XG4gICAgc3RhdGljIGRlbGV0ZUNhcihpZENhcikge1xuICAgICAgICByZXR1cm4gYXBpU2VydmljZV8xLkFwaVNlcnZpY2UuZGVsZXRlKGAke3R5cGVzXzEuUGF0aC5nYXJhZ2V9LyR7aWRDYXJ9YCk7XG4gICAgfVxuICAgIHN0YXRpYyB1cGRhdGVDYXIoaWRDYXIsIHRyYW5zZmVyLCBoZWFkZXJzKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5wdXQoYCR7dHlwZXNfMS5QYXRoLmdhcmFnZX0vJHtpZENhcn1gLCB0cmFuc2ZlciwgaGVhZGVycyk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRQYWdpbmF0aW9uKHZhbHVlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gYXBpU2VydmljZV8xLkFwaVNlcnZpY2UuZ2V0UGFnZXMoYCR7dHlwZXNfMS5QYXRoLmdhcmFnZX0/X3BhZ2U9JHt2YWx1ZX0mJHtsaW1pdC5rZXl9PSR7bGltaXQudmFsdWV9YCk7XG4gICAgfVxuICAgIHN0YXRpYyBvbkVuZ2luQ2FyKGlkQ2FyLCBzdGF0dXMpIHtcbiAgICAgICAgcmV0dXJuIGFwaVNlcnZpY2VfMS5BcGlTZXJ2aWNlLnJ1bkVuZ2luZShgJHt0eXBlc18xLlBhdGguZW5naW5lfT9pZD0ke2lkQ2FyfSZzdGF0dXM9JHtzdGF0dXN9YCk7XG4gICAgfVxuICAgIHN0YXRpYyBvblJ1bkNhcihpZENhciwgc3RhdHVzKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5ydW5FbmdpbmUoYCR7dHlwZXNfMS5QYXRoLmVuZ2luZX0/aWQ9JHtpZENhcn0mc3RhdHVzPSR7c3RhdHVzfWApO1xuICAgIH1cbn1cbmV4cG9ydHMuQ2Fyc0FwaVNlcnZpY2UgPSBDYXJzQXBpU2VydmljZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BcGlTZXJ2aWNlID0gdm9pZCAwO1xuY2xhc3MgQXBpU2VydmljZSB7XG4gICAgc3RhdGljIGFzeW5jIGZldGNoUmVxdWVzdChwYWdlLCBtZXRob2QsIGJvZHksIGhlYWRlcnMpIHtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7cGFnZX1gO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgYm9keTogYm9keSA/IEpTT04uc3RyaW5naWZ5KGJvZHkpIDogbnVsbCxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgc3RhdGljIGRlbGV0ZShlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChlbGVtZW50LCAnREVMRVRFJyk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QoZWxlbWVudCwgJ0dFVCcpO1xuICAgIH1cbiAgICBzdGF0aWMgcG9zdChlbGVtZW50LCBib2R5LCBoZWFkZXJzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChlbGVtZW50LCAnUE9TVCcsIGJvZHksIGhlYWRlcnMpO1xuICAgIH1cbiAgICBzdGF0aWMgcHV0KGVsZW1lbnQsIGJvZHksIGhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0KGVsZW1lbnQsICdQVVQnLCBib2R5LCBoZWFkZXJzKTtcbiAgICB9XG4gICAgc3RhdGljIGdldFBhZ2VzKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0KGVsZW1lbnQsICdHRVQnKTtcbiAgICB9XG4gICAgc3RhdGljIHJ1bkVuZ2luZShlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChlbGVtZW50LCAnUEFUQ0gnKTtcbiAgICB9XG59XG5leHBvcnRzLkFwaVNlcnZpY2UgPSBBcGlTZXJ2aWNlO1xuQXBpU2VydmljZS5iYXNlVXJsID0gJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMC8nO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFwaVdpbm5lcnNTZXJ2aWNlID0gdm9pZCAwO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy90eXBlc1wiKTtcbmNvbnN0IGFwaVNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL2FwaVNlcnZpY2VcIik7XG5jbGFzcyBBcGlXaW5uZXJzU2VydmljZSB7XG4gICAgc3RhdGljIGdldEFsbFdpbigpIHtcbiAgICAgICAgcmV0dXJuIGFwaVNlcnZpY2VfMS5BcGlTZXJ2aWNlLmdldCh0eXBlc18xLlBhdGgud2lubmVycyk7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGVXaW4odHJhbnNmZXIsIGhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIGFwaVNlcnZpY2VfMS5BcGlTZXJ2aWNlLnBvc3QodHlwZXNfMS5QYXRoLndpbm5lcnMsIHRyYW5zZmVyLCBoZWFkZXJzKTtcbiAgICB9XG4gICAgc3RhdGljIGdldFdpbihpZENhcikge1xuICAgICAgICByZXR1cm4gYXBpU2VydmljZV8xLkFwaVNlcnZpY2UuZ2V0KGAke3R5cGVzXzEuUGF0aC53aW5uZXJzfS8ke2lkQ2FyfWApO1xuICAgIH1cbiAgICBzdGF0aWMgZGVsZXRlV2luKGlkQ2FyKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5kZWxldGUoYCR7dHlwZXNfMS5QYXRoLndpbm5lcnN9LyR7aWRDYXJ9YCk7XG4gICAgfVxuICAgIHN0YXRpYyB1cGRhdGVXaW4oaWRDYXIsIHRyYW5zZmVyLCBoZWFkZXJzKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5wdXQoYCR7dHlwZXNfMS5QYXRoLndpbm5lcnN9LyR7aWRDYXJ9YCwgdHJhbnNmZXIsIGhlYWRlcnMpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0UGFnaW5hdGlvbih2YWx1ZSwgbGltaXQpIHtcbiAgICAgICAgcmV0dXJuIGFwaVNlcnZpY2VfMS5BcGlTZXJ2aWNlLmdldFBhZ2VzKGAke3R5cGVzXzEuUGF0aC53aW5uZXJzfT9fcGFnZT0ke3ZhbHVlfSYke2xpbWl0LmtleX09JHtsaW1pdC52YWx1ZX1gKTtcbiAgICB9XG4gICAgc3RhdGljIHNvcnRXaW4odHlwZVNvcnQsIG9yZGVyKSB7XG4gICAgICAgIHJldHVybiBhcGlTZXJ2aWNlXzEuQXBpU2VydmljZS5ydW5FbmdpbmUoYCR7dHlwZXNfMS5QYXRoLndpbm5lcnN9P19zb3J0PSR7dHlwZVNvcnR9Jl9vcmRlcj0ke29yZGVyfWApO1xuICAgIH1cbn1cbmV4cG9ydHMuQXBpV2lubmVyc1NlcnZpY2UgPSBBcGlXaW5uZXJzU2VydmljZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BcHAgPSB2b2lkIDA7XG5jb25zdCBoZWFkZXJfMSA9IHJlcXVpcmUoXCIuL2hlYWRlclwiKTtcbmNvbnN0IGdhcmFnZV8xID0gcmVxdWlyZShcIi4vZ2FyYWdlXCIpO1xuY29uc3Qgd2lubmVyc18xID0gcmVxdWlyZShcIi4vd2lubmVyc1wiKTtcbmNvbnN0IGNhcl8xID0gcmVxdWlyZShcIi4vY2FyXCIpO1xuY29uc3Qgdmlld18xID0gcmVxdWlyZShcIi4vdmlld1wiKTtcbmNsYXNzIEFwcCBleHRlbmRzIHZpZXdfMS5WaWV3IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5oZWFkZXIgPSBuZXcgaGVhZGVyXzEuSGVhZGVyKHRoaXMuZW1pdHRlcik7XG4gICAgICAgIHRoaXMuZ2FyYWdlID0gbmV3IGdhcmFnZV8xLkdhcmFnZSh0aGlzLmVtaXR0ZXIpO1xuICAgICAgICB0aGlzLndpbm5lcnMgPSBuZXcgd2lubmVyc18xLldpbm5lcnModGhpcy5lbWl0dGVyKTtcbiAgICAgICAgdGhpcy5jYXJzID0gbmV3IGNhcl8xLkNhcnModGhpcy5lbWl0dGVyKTtcbiAgICAgICAgdGhpcy5yb3V0ZXMgPSBbXG4gICAgICAgICAgICB7IHRpdGxlOiAnZ2FyYWdlJywgdXJsOiAnZ2FyYWdlJyB9LFxuICAgICAgICAgICAgeyB0aXRsZTogJ3dpbm5lcnMnLCB1cmw6ICd3aW5uZXJzJyB9LFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLnJvdXRlRWxlbWV0bnMgPSBbdGhpcy5nYXJhZ2UsIHRoaXMud2lubmVyc107XG4gICAgfVxuICAgIGFwcGVuZEVsZW1lbnQocGFyZW50KSB7XG4gICAgICAgIHRoaXMud3JhcHBlciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdtYWluLXdyYXBwZXInKTtcbiAgICAgICAgcGFyZW50LmFwcGVuZCh0aGlzLndyYXBwZXIpO1xuICAgICAgICB0aGlzLmdhcmFnZS5hcHBlbmRFbGVtZW50KHRoaXMud3JhcHBlcik7XG4gICAgICAgIHRoaXMuY2Fycy5hcHBlbmRFbGVtZW50KHRoaXMuZ2FyYWdlLndyYXBwZXIpO1xuICAgICAgICB0aGlzLmVtaXR0ZXIuc3Vic2NyaWJlKCdyb3V0ZUNoYW5nZWQnLCAocm91dGUpID0+IHRoaXMub25DaGFuZ2VSb3V0ZShyb3V0ZSkpO1xuICAgICAgICB0aGlzLmhlYWRlci5hcHBlbmRFbGVtZW50KHRoaXMud3JhcHBlcik7XG4gICAgICAgIHRoaXMud2lubmVycy5hcHBlbmRFbGVtZW50KHRoaXMud3JhcHBlcik7XG4gICAgfVxuICAgIG9uQ2hhbmdlUm91dGUocm91dGUpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlUGFnZSA9IHRoaXMucm91dGVFbGVtZXRucy5maW5kKChwYWdlKSA9PiBwYWdlLnVybCA9PT0gcm91dGUudXJsKTtcbiAgICAgICAgY29uc3QgaGlkZGVuUGFnZSA9IHRoaXMucm91dGVFbGVtZXRucy5maW5kKChwYWdlKSA9PiBwYWdlLnVybCAhPT0gcm91dGUudXJsKTtcbiAgICAgICAgYWN0aXZlUGFnZT8uc2hvdygpO1xuICAgICAgICBoaWRkZW5QYWdlPy5oaWRlKCk7XG4gICAgfVxufVxuZXhwb3J0cy5BcHAgPSBBcHA7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ2FycyA9IHZvaWQgMDtcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG5jb25zdCB2aWV3XzEgPSByZXF1aXJlKFwiLi92aWV3XCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL3R5cGVzXCIpO1xuY29uc3QgYXBpQ2FyU2VydmljZV8xID0gcmVxdWlyZShcIi4vYXBpL2FwaUNhclNlcnZpY2VcIik7XG5jb25zdCBhcGlXaW5uZXJzU2VydmljZV8xID0gcmVxdWlyZShcIi4vYXBpL2FwaVdpbm5lcnNTZXJ2aWNlXCIpO1xuY29uc3Qgc3ZnQ2FyID0gYDxzdmcgdmVyc2lvbj1cIjEuMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgIHdpZHRoPVwiMTI4MC4wMDAwMDBwdFwiIGhlaWdodD1cIjgwNi4wMDAwMDBwdFwiIHZpZXdCb3g9XCIwIDAgMTI4MC4wMDAwMDAgODA2LjAwMDAwMFwiXG4gICAgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaWRZTWlkIG1lZXRcIj5cbiAgIDxnIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgwLjAwMDAwMCw4MDYuMDAwMDAwKSBzY2FsZSgwLjEwMDAwMCwtMC4xMDAwMDApXCJcbiAgIGZpbGw9XCIwMDAwMDBcIiAgc3Ryb2tlPVwibm9uZVwiPlxuICAgPHBhdGggZD1cIk02ODQ1IDgwNTAgYy0zOCAtNSAtMTM1IC0xMyAtMjE1IC0yMCAtMzc2IC0zMCAtNzU0IC0xMDYgLTExMTUgLTIyNVxuICAgLTIzNyAtNzggLTM3NiAtMTM1IC02MTAgLTI1MCAtNTQwIC0yNjUgLTk2OCAtNTc3IC0xNDQxIC0xMDUwIC0yNTQgLTI1NCAtNDA3XG4gICAtNDI4IC02NzIgLTc2NSAtMzM5IC00MzEgLTU1MCAtNjE0IC04MDUgLTY5OCAtNTAgLTE3IC0xODAgLTQ5IC0yODcgLTcyIC0zMzdcbiAgIC03MyAtNTM3IC0xNDAgLTc2NSAtMjU4IC01NTAgLTI4NiAtODI4IC03NDggLTg5OSAtMTQ5NyAtNDMgLTQ1MyAtNDYgLTU4OVxuICAgLTE2IC03NjMgNTIgLTMwNCAxNDkgLTQ5NCAzNTQgLTY5NyAxMjIgLTEyMiAyMTkgLTE5MyAzNjQgLTI2NiBsOTUgLTQ5IDE4MCAwXG4gICAxODAgMCAtNyA1NSBjLTI5IDI1MCAtMjYgNDQ4IDEwIDY2MCAxMTMgNjczIDU0NyAxMjU4IDExNjAgMTU2NCA5MDggNDUzIDE5OThcbiAgIDIxOCAyNjQxIC01NzAgMzM3IC00MTMgNTE4IC05ODMgNDc0IC0xNDkzIC02IC03OCAtMTQgLTE1OSAtMTggLTE3OSBsLTYgLTM3XG4gICAxMjM2IDAgYzY4MCAwIDEyMzggMyAxMjQwIDcgMiA1IC0yIDU1IC05IDExMyAtNyA1OCAtMTMgMTYzIC0xNCAyMzMgLTIgOTc0XG4gICA2NjEgMTgzNiAxNjAyIDIwODEgMjA1IDU0IDMzNCA3MCA1NTMgNzAgMzUyIDAgNjI3IC02MiA5NDAgLTIxMyA1NTggLTI3MCA5NzNcbiAgIC03NjcgMTEzOCAtMTM2MSA1NCAtMTkyIDcwIC0zMTggNzEgLTUzNSAxIC0xMTAgLTIgLTIzMyAtNyAtMjczIGwtNyAtNzMgNDZcbiAgIDM4IGM2OSA1NyAxNzcgMTg1IDI1NSAzMDEgMTUyIDIyNyAyNDEgNDczIDI4NiA3OTIgMzAgMjE1IDIyIDQxNSAtMjggNjY0IC04MVxuICAgNDAyIC0yOTMgNzQzIC01OTggOTYzIC0yIDEgLTUgNDcgLTcgMTAwIC00IDE2OSAtNDggMzgxIC0xNDQgNjk4IC0xMjIgNDAxXG4gICAtMjQ2IDY1OSAtNDk3IDEwMjggLTIxNCAzMTYgLTQ5OCA2NjYgLTc2MyA5NDAgLTEwMiAxMDYgLTE0OSAxNDYgLTI1NiAyMTZcbiAgIC00MTUgMjc1IC0xMDQwIDUxMSAtMTcyNCA2NTAgLTM1OCA3MyAtNjkxIDExNyAtMTA4NSAxNDUgLTEyMSA5IC0yNzYgMjAgLTM0NVxuICAgMjYgLTE0MiAxMSAtMzgxIDExIC00ODUgMHogbTYwIC04MjQgYzIxMCAtNTkgMzg0IC0yMDMgNDc1IC0zOTEgNzIgLTE0OCA3M1xuICAgLTE1NyA3NyAtNTgwIDUgLTQxNCAtNyAtNzI3IC0zMiAtODUxIC0zMCAtMTQ2IC0xMDAgLTI1OSAtMTg5IC0zMDcgbC00MSAtMjJcbiAgIC0xNTQwIC0zIGMtMTE0NSAtMiAtMTU1NCAwIC0xNTk1IDkgLTEyMSAyNSAtMjIxIDk2IC0yNjEgMTgyIC0yNCA1MyAtMjUgMTcyXG4gICAtMyAyNDggNjEgMjA1IDMxMCA1MzYgNjkzIDkyMCAxMDggMTA3IDI0NiAyMzUgMzA2IDI4MyA0MTIgMzMwIDgwMyA0ODggMTMwNVxuICAgNTMwIDI1IDIgMjAzIDIgMzk1IDEgMjk0IC0xIDM2MCAtNCA0MTAgLTE5eiBtMjA2MCAtOTEgYzE1MiAtMzQgNDM1IC0xMjYgNTQzXG4gICAtMTc2IDM4OCAtMTc5IDc1OCAtNTY1IDk4MiAtMTAyNCAxNDYgLTMwMCAxOTQgLTUzMyAxMzkgLTY3OSAtMjggLTc2IC05OVxuICAgLTEzOSAtMTg2IC0xNjYgLTYzIC0xOSAtOTIgLTIwIC05OTEgLTIwIC05MjQgMCAtOTI2IDAgLTk3MCAyMSAtNTEgMjUgLTkzIDc5XG4gICAtMTE5IDE1MiAtMTcgNDkgLTE4IDEwNyAtMTggODc3IGwwIDgyNSAyMyA1NSBjMzkgOTUgNzggMTI4IDE4MCAxNTEgMTA5IDI1XG4gICAyNjEgMTkgNDE3IC0xNnpcIi8+XG4gICA8cGF0aCBkPVwiTTMxNDAgMzU2OSBjLTcxOCAtNjkgLTEzMzMgLTU4MyAtMTUzNiAtMTI4NSAtNTEgLTE3NCAtNjYgLTMxMCAtNjJcbiAgIC01MjkgNSAtMjI2IDI1IC0zNDQgODUgLTUyNCA5NSAtMjg1IDIzOCAtNTA4IDQ2NyAtNzI4IDI3OSAtMjY5IDYwMCAtNDIxXG4gICAxMDIwIC00ODIgMTc0IC0yNiAyMzggLTI2IDQxMiAwIDM1NSA1MiA2MDYgMTUyIDg2NiAzNDYgMzQzIDI1NSA1OTAgNjQyIDY3OFxuICAgMTA2MyA2MyAzMDUgNDQgNjMxIC01NSA5MjggLTI2NSA3OTIgLTEwMzggMTI5MiAtMTg3NSAxMjExeiBtMzU5IC05MzkgYzIwMVxuICAgLTQxIDM5OCAtMTY5IDUxNiAtMzM1IDI0MSAtMzM5IDIxMyAtNzg2IC02OSAtMTA4MiAtMTY2IC0xNzUgLTM0OCAtMjYwIC01ODBcbiAgIC0yNzEgLTIwMCAtOCAtMzYwIDM1IC01MTcgMTM5IC00NDQgMjk4IC01MTUgOTExIC0xNTAgMTMwMiAxOTkgMjEzIDUwNiAzMDhcbiAgIDgwMCAyNDd6XCIvPlxuICAgPHBhdGggZD1cIk05ODcxIDM1NjkgYy0yMTQgLTI0IC0zOTggLTc3IC01OTEgLTE3MCAtODA5IC0zOTAgLTEyMDEgLTEzMTQgLTkxOVxuICAgLTIxNjkgMTg5IC01NzUgNjg1IC0xMDMwIDEyNzQgLTExNzAgMTA4IC0yNiAzNDYgLTYwIDQxOSAtNjAgODEgMCAzMzAgMzcgNDQxXG4gICA2NSA3MDYgMTc5IDEyMzQgNzcyIDEzMzAgMTQ5MiAxMjggOTU4IC01MjggMTg0MCAtMTQ4NSAxOTk4IC0xMTkgMTkgLTM1OCAyN1xuICAgLTQ2OSAxNHogbTMxOSAtOTMwIGMzNTAgLTU2IDYzNSAtMzMwIDcwNSAtNjc4IDIzIC0xMTIgMTYgLTI5NCAtMTUgLTQwMSAtNjdcbiAgIC0yMzQgLTIzNSAtNDMxIC00NTUgLTUzNiAtMTQxIC02NyAtMTk2IC03OSAtMzcwIC03OSAtMTc1IDAgLTIzMSAxMyAtMzcxIDgwXG4gICAtMTc4IDg2IC0zMTMgMjIxIC0zOTkgMzk4IC02NyAxMzkgLTc5IDE5NyAtODAgMzY3IDAgMTUzIDEwIDIxMCA1OSAzMzIgMTA3XG4gICAyNjMgMzY1IDQ3MCA2NDggNTE3IDc1IDEyIDIwMiAxMyAyNzggMHpcIi8+XG4gICA8L2c+XG4gICA8L3N2Zz5cbiAgIGA7XG5jb25zdCBzdGFydFBhZ2UgPSAxO1xuY29uc3QgbGltaXQgPSB7XG4gICAga2V5OiAnX2xpbWl0JyxcbiAgICB2YWx1ZTogNyxcbn07XG5jbGFzcyBDYXJzIGV4dGVuZHMgdmlld18xLlZpZXcge1xuICAgIGNvbnN0cnVjdG9yKGVtaXR0ZXIpIHtcbiAgICAgICAgc3VwZXIoZW1pdHRlcik7XG4gICAgICAgIHRoaXMuZW1pdHRlciA9IGVtaXR0ZXI7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudFBhZ2UnKSA/IE51bWJlcihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudFBhZ2UnKSkgOiAxO1xuICAgICAgICB0aGlzLmdldENhcnModGhpcy5jdXJyZW50UGFnZSk7XG4gICAgICAgIHRoaXMub25TdWIoKTtcbiAgICAgICAgdGhpcy5nZXRDYXJzUXR5KCk7XG4gICAgfVxuICAgIGFzeW5jIGdldENhcnNRdHkoKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsQ2FycyA9IGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5nZXRBbGxDYXJzKCk7XG4gICAgICAgIHRoaXMucXR5Q2FycyA9IHRvdGFsQ2Fycy5sZW5ndGg7XG4gICAgICAgIHRoaXMuY2Fyc051bWJlcnMudGV4dENvbnRlbnQgPSBTdHJpbmcodGhpcy5xdHlDYXJzKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q2FycyhwYWdlR2FyYWdlID0gc3RhcnRQYWdlKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChgaHR0cDovLzEyNy4wLjAuMTozMDAwL2dhcmFnZT9fcGFnZT0ke3BhZ2VHYXJhZ2V9Jl9saW1pdD0ke2xpbWl0LnZhbHVlfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0b3RhbFF0eSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ1gtVG90YWwtQ291bnQnKTtcbiAgICAgICAgdGhpcy5kYXRhQ2FycyA9IGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5nZXRQYWdpbmF0aW9uKHBhZ2VHYXJhZ2UsIGxpbWl0KTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YUNhcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gTnVtYmVyKHRvdGFsUXR5KSAvIGxpbWl0LnZhbHVlIDwgMSA/IDEgOiBNYXRoLnJvdW5kKE51bWJlcih0b3RhbFF0eSkgLyBsaW1pdC52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmRhdGFDYXJzID0gYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLmdldFBhZ2luYXRpb24odGhpcy5jdXJyZW50UGFnZSwgbGltaXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFnZU51bWJlcnMudGV4dENvbnRlbnQgPSBTdHJpbmcodGhpcy5jdXJyZW50UGFnZSk7XG4gICAgICAgIHRoaXMucmVuZGVyQ2Fycyh0aGlzLmRhdGFDYXJzKTtcbiAgICB9XG4gICAgYXBwZW5kRWxlbWVudChwYXJlbnQpIHtcbiAgICAgICAgdGhpcy5jYXJMaXN0V3JhcHBlciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdjYXJzLWxpc3Qtd3JhcHBlcicpO1xuICAgICAgICB0aGlzLmNhcnNXcmFwcGVyID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ2NhcnMtcGFnaW5hdGlvbicpO1xuICAgICAgICB0aGlzLmdhcmFnZVN1YnRpdGxlID0gc3VwZXIucmVuZGVyRWxlbWVudCgnaDMnLCAndGl0bGUnLCB7IHRleHRDb250ZW50OiBgR2FyYWdlICNgIH0pO1xuICAgICAgICB0aGlzLmNhcnNOdW1iZXJzID0gc3VwZXIucmVuZGVyRWxlbWVudCgnc3BhbicsICd0aXRsZScpO1xuICAgICAgICB0aGlzLnBhZ2VTdWJ0aXRsZSA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2g0JywgJ3N1YnRpdGxlLXBhZ2UnLCB7IHRleHRDb250ZW50OiAnUGFnZXMgIycgfSk7XG4gICAgICAgIHRoaXMucGFnZU51bWJlcnMgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdzcGFuJywgJ3N1YnRpdGxlLXBhZ2UnKTtcbiAgICAgICAgY29uc3QgcGFnZUNvbnRhaW5lciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdwYWdlLXdyYXBwZXInKTtcbiAgICAgICAgdGhpcy5wcmV2QnRuID0gc3VwZXIucmVuZGVyRWxlbWVudCgnYnV0dG9uJywgJ3ByZXYtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICdwcmV2JyB9KTtcbiAgICAgICAgdGhpcy5uZXh0QnRuID0gc3VwZXIucmVuZGVyRWxlbWVudCgnYnV0dG9uJywgJ25leHQtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICduZXh0JyB9KTtcbiAgICAgICAgdGhpcy5jYXJzV3JhcHBlci5hcHBlbmQodGhpcy5nYXJhZ2VTdWJ0aXRsZSwgcGFnZUNvbnRhaW5lcik7XG4gICAgICAgIHBhZ2VDb250YWluZXIuYXBwZW5kKHRoaXMucGFnZVN1YnRpdGxlLCB0aGlzLnByZXZCdG4sIHRoaXMubmV4dEJ0bik7XG4gICAgICAgIHRoaXMuZ2FyYWdlU3VidGl0bGUuYXBwZW5kKHRoaXMuY2Fyc051bWJlcnMpO1xuICAgICAgICB0aGlzLnBhZ2VTdWJ0aXRsZS5hcHBlbmQodGhpcy5wYWdlTnVtYmVycyk7XG4gICAgICAgIHBhcmVudC5hcHBlbmQodGhpcy5jYXJzV3JhcHBlcik7XG4gICAgICAgIHBhcmVudC5hcHBlbmQodGhpcy5jYXJMaXN0V3JhcHBlcik7XG4gICAgICAgIHRoaXMubmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubmV4dFBhZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMucHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucHJldlBhZ2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHJlbmRlckNhcnMoY2Fycykge1xuICAgICAgICBjYXJzLmZvckVhY2goKGNhcikgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmFjZUNvbnRhaW5lciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdyYWNlLWNvbnRhaW5lcicsIHsgaWQ6IGNhci5pZCB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJDb250YWluZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAnY2FyLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhckJveFJvdzEgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAncm93MScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhckJveFJvdzIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAncm93MicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZ2luZUJ0biA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdlbmdpbmUtYnRuLWJveCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdENhciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2J1dHRvbicsICdzZWxlY3QtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICdzZWxlY3QnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZUNhciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2J1dHRvbicsICdyZW1vdmUtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICdyZW1vdmUnIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRDYXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdidXR0b24nLCAnc3RhcnQtYnRuIGVuZ2luZS1idG4nLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiAnQScsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wQ2FyID0gc3VwZXIucmVuZGVyRWxlbWVudCgnYnV0dG9uJywgJ3N0b3AtYnRuIGVuZ2luZS1idG4nLCB7IHRleHRDb250ZW50OiAnQicgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXJOYW1lID0gc3VwZXIucmVuZGVyRWxlbWVudCgnaDUnLCAnY2FyLW5hbWUnLCB7IHRleHRDb250ZW50OiBjYXIubmFtZSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhckltZ0JveCA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdjYXItaW1nLWJveCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FySW1nQm94LmlubmVySFRNTCA9IHN2Z0NhcjtcbiAgICAgICAgICAgICAgICB0aGlzLmNhckltZ0JveC5zdHlsZS5maWxsID0gY2FyLmNvbG9yO1xuICAgICAgICAgICAgICAgIHRoaXMuZmxhZ0ltZyA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdmbGFnJyk7XG4gICAgICAgICAgICAgICAgcmFjZUNvbnRhaW5lci5hcHBlbmQoY2FyQ29udGFpbmVyLCB0aGlzLmZsYWdJbWcpO1xuICAgICAgICAgICAgICAgIGNhckNvbnRhaW5lci5hcHBlbmQoY2FyQm94Um93MSwgY2FyQm94Um93Mik7XG4gICAgICAgICAgICAgICAgY2FyQm94Um93MS5hcHBlbmQoc2VsZWN0Q2FyLCByZW1vdmVDYXIsIHRoaXMuY2FyTmFtZSk7XG4gICAgICAgICAgICAgICAgY2FyQm94Um93Mi5hcHBlbmQoZW5naW5lQnRuLCB0aGlzLmNhckltZ0JveCk7XG4gICAgICAgICAgICAgICAgZW5naW5lQnRuLmFwcGVuZCh0aGlzLnN0YXJ0Q2FyLCB0aGlzLnN0b3BDYXIpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FyTGlzdFdyYXBwZXIuYXBwZW5kKHJhY2VDb250YWluZXIpO1xuICAgICAgICAgICAgICAgIHNlbGVjdENhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25TZWxlY3RDYXIuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2FyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblJlbW92ZUNhci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0Q2FyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5zdGFydE9uZUVuZ2luLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcENhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc3RvcE9uZUVuZ2luLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgb25TZWxlY3RDYXIoZXZlbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRJZENhcihldmVudCk7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZENhciA9IGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5nZXRDYXIoaWQpO1xuICAgICAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0dGVyLm9uRW1pdCgnb25TZWxlY3RlZENhcicsIHNlbGVjdGVkQ2FyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+YlCBjYW5ub3Qgc2VsZWN0IGNhcicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uU3ViKCkge1xuICAgICAgICB0aGlzLmVtaXR0ZXIuc3Vic2NyaWJlKCdvblVwZGF0ZUNhcicsIChjYXIpID0+IHRoaXMub25VcGRhdGVDYXIoY2FyKSk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5zdWJzY3JpYmUoJ29uQ3JlYXRlZENhcicsICgpID0+IHRoaXMub25DcmVhdGVkQ2FyKCkpO1xuICAgICAgICB0aGlzLmVtaXR0ZXIuc3Vic2NyaWJlKCdvblN0YXJ0UmFjZScsICgpID0+IHRoaXMuc3RhcnRSYWNlKCkpO1xuICAgICAgICB0aGlzLmVtaXR0ZXIuc3Vic2NyaWJlKCdvblN0b3BSYWNlJywgKCkgPT4gdGhpcy5zdG9wUmFjZSgpKTtcbiAgICB9XG4gICAgYXN5bmMgb25SZW1vdmVDYXIoZXZlbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRJZENhcihldmVudCk7XG4gICAgICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXIgPSBhd2FpdCBhcGlDYXJTZXJ2aWNlXzEuQ2Fyc0FwaVNlcnZpY2UuZ2V0Q2FyKGlkKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcGlDYXJTZXJ2aWNlXzEuQ2Fyc0FwaVNlcnZpY2UuZGVsZXRlQ2FyKGlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldENhcnNRdHkoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhckxpc3RXcmFwcGVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2Fycyh0aGlzLmN1cnJlbnRQYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXIub25FbWl0KCdjbGVhcklucHV0cycpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlci5vbkVtaXQoJ29uUmVtb3ZlJywgY2FyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+SoyBjYW5ub3QgcmVtb3ZlIGNhcicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uVXBkYXRlQ2FyKG5ld2Nhcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2VhcmNoQ2FyID0gYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLmdldENhcihuZXdjYXIuaWQpO1xuICAgICAgICAgICAgaWYgKHNlYXJjaENhci5pZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGltZ0NhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke25ld2Nhci5pZH1gKT8uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0uY2hpbGROb2Rlc1sxXTtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lQ2FyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7bmV3Y2FyLmlkfWApPy5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZE5vZGVzWzJdO1xuICAgICAgICAgICAgICAgIGltZ0Nhci5zdHlsZS5maWxsID0gbmV3Y2FyLmNvbG9yO1xuICAgICAgICAgICAgICAgIG5hbWVDYXIudGV4dENvbnRlbnQgPSBuZXdjYXIubmFtZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhcnNOdW1iZXJzLnRleHRDb250ZW50ID0gU3RyaW5nKHRoaXMucXR5Q2Fycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhciBpcyBub3QgZXhpc3QnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvbkNyZWF0ZWRDYXIoKSB7XG4gICAgICAgIHRoaXMuZGF0YUNhcnMgPSBhd2FpdCBhcGlDYXJTZXJ2aWNlXzEuQ2Fyc0FwaVNlcnZpY2UuZ2V0UGFnaW5hdGlvbih0aGlzLmN1cnJlbnRQYWdlLCBsaW1pdCk7XG4gICAgICAgIHRoaXMuY2FyTGlzdFdyYXBwZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHRoaXMucmVuZGVyQ2Fycyh0aGlzLmRhdGFDYXJzKTtcbiAgICAgICAgdGhpcy5nZXRDYXJzUXR5KCk7XG4gICAgfVxuICAgIGFzeW5jIG5leHRQYWdlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbWF4UGFnZSA9IHRoaXMucXR5Q2FycyAvIGxpbWl0LnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPCBtYXhQYWdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSArPSAxO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50UGFnZScsIFN0cmluZyh0aGlzLmN1cnJlbnRQYWdlKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlTnVtYmVycy50ZXh0Q29udGVudCA9IFN0cmluZyh0aGlzLmN1cnJlbnRQYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhckxpc3RXcmFwcGVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2Fycyh0aGlzLmN1cnJlbnRQYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5GB77iP8J+Rge+4j2Nhbm5vdCBnZXQgbmV4dCBwYWdlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcHJldlBhZ2UoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBtaW5QYWdlID0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlID4gbWluUGFnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldkJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgLT0gMTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFBhZ2UnLCBTdHJpbmcodGhpcy5jdXJyZW50UGFnZSkpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZU51bWJlcnMudGV4dENvbnRlbnQgPSBTdHJpbmcodGhpcy5jdXJyZW50UGFnZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXJMaXN0V3JhcHBlci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmdldENhcnModGhpcy5jdXJyZW50UGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5GB77iP8J+Rge+4j2Nhbm5vdCBnZXQgcHJldiBwYWdlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3RhcnRPbmVFbmdpbihldmVudCwgaWRDYXIpIHtcbiAgICAgICAgbGV0IGludGVydmFsQW5pbTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZXZlbnQgPyB0aGlzLmdldElkQ2FyKGV2ZW50KSA6IGlkQ2FyO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudENhciA9IGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5nZXRDYXIoaWQpO1xuICAgICAgICAgICAgY29uc3QgaW1nQ2FyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7aWR9YCk/LmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdLmNoaWxkTm9kZXNbMV07XG4gICAgICAgICAgICBjb25zdCBjaGFuZ2VUb1N0YXJ0ID0gYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLm9uRW5naW5DYXIoaWQsIHR5cGVzXzEuRW5naW5lLnN0YXJ0ZWQpO1xuICAgICAgICAgICAgaWYgKCFldmVudClcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVCdXR0b25zKCk7XG4gICAgICAgICAgICBjb25zdCBmbGFnRGlzdCA9IHdpbmRvdy5zY3JlZW4ud2lkdGggLSB0aGlzLmZsYWdJbWcub2Zmc2V0TGVmdCArIHRoaXMuZmxhZ0ltZy5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIGxldCBsZWZ0RGlzdCA9IHRoaXMuY2FySW1nQm94Lm9mZnNldExlZnQgLSB0aGlzLmNhckltZ0JveC5vZmZzZXRXaWR0aCArIDU7XG4gICAgICAgICAgICBjb25zdCBmdWxsRGlzID0gd2luZG93LnNjcmVlbi53aWR0aCAtIGxlZnREaXN0IC0gZmxhZ0Rpc3Q7XG4gICAgICAgICAgICBjb25zdCBwYXJ0RGlzID0gKGZ1bGxEaXMgLSBsZWZ0RGlzdCkgLyAoKChjaGFuZ2VUb1N0YXJ0LnZlbG9jaXR5ICogNTApIC8gMTAwMCkgKiA2MCk7XG4gICAgICAgICAgICB0aGlzLmVtaXR0ZXIuc3Vic2NyaWJlKCdvblN0b3BDYXInLCAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsQW5pbSkpO1xuICAgICAgICAgICAgaW50ZXJ2YWxBbmltID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxlZnREaXN0ICs9IHBhcnREaXM7XG4gICAgICAgICAgICAgICAgaWYgKGxlZnREaXN0ID49IGZ1bGxEaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0dGVyLnN1YnNjcmliZSgnb25TdG9wQ2FyJywgKCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbEFuaW0pKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbEFuaW0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMud2lubmVyVGltZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lubmVyVGltZSA9ICsoKGVuZCAtIHN0YXJ0KSAvIDEwMDApLnRvRml4ZWQoMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRXaW5uZXIoaWQsIHRoaXMud2lubmVyVGltZSwgY3VycmVudENhci5jb2xvciwgY3VycmVudENhci5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dXaW5NZXNzYWdlKGlkLCBjdXJyZW50Q2FyLm5hbWUsIHRoaXMud2lubmVyVGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW1nQ2FyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7bGVmdERpc3R9cHgpYDtcbiAgICAgICAgICAgIH0sIDE2KTtcbiAgICAgICAgICAgIGNvbnN0IHJ1bkNhciA9IGZldGNoKGBodHRwOi8vMTI3LjAuMC4xOjMwMDAvZW5naW5lP2lkPSR7aWR9JnN0YXR1cz1kcml2ZWAsIHsgbWV0aG9kOiAnUEFUQ0gnIH0pO1xuICAgICAgICAgICAgcnVuQ2FyLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkuY2F0Y2goKGVycm9yKSA9PiBuZXcgRXJyb3IoZXJyb3IpKTtcbiAgICAgICAgICAgIGNvbnN0IHJ1blN0YXR1cyA9IChhd2FpdCBydW5DYXIpLnN0YXR1cztcbiAgICAgICAgICAgIGlmIChydW5TdGF0dXMgIT09IDIwMClcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsQW5pbSk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcnVuQ2FyO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbEFuaW0pO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfwn5KlIEVuZ2luZSBpcyBicm9rZW4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzdG9wT25lRW5naW4oZXZlbnQsIGlkQ2FyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZXRlQnV0dG9ucygpO1xuICAgICAgICAgICAgY29uc3QgaWQgPSBldmVudCA/IHRoaXMuZ2V0SWRDYXIoZXZlbnQpIDogaWRDYXI7XG4gICAgICAgICAgICBjb25zdCBzdGFydFJhY2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RhcnQtcmFjZS1idG4nKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRDYXIuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChzdGFydFJhY2VCdG4pXG4gICAgICAgICAgICAgICAgc3RhcnRSYWNlQnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBzdGFydFJhY2VCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRDYXIuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5vbkVuZ2luQ2FyKGlkLCB0eXBlc18xLkVuZ2luZS5zdG9wcGVkKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdHRlci5vbkVtaXQoJ29uU3RvcENhcicpO1xuICAgICAgICAgICAgY29uc3QgaW1nQ2FyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7aWR9YCk/LmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdLmNoaWxkTm9kZXNbMV07XG4gICAgICAgICAgICBpbWdDYXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoMHB4KSc7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfpJMgaSB3YXMgdHJ5aW5nIHRvIHN0b3AgY2FyJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0SWRDYXIoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgY3VyciA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgY29uc3QgY2FyQ29udCA9IGN1cnIuY2xvc2VzdCgnLnJhY2UtY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnN0IGlkID0gTnVtYmVyKGNhckNvbnQ/LmlkKTtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cbiAgICBhc3luYyBzdGFydFJhY2UoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVCdXR0b25zKCk7XG4gICAgICAgICAgICBjb25zdCB3aW5uZXJzID0gW107XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UGFnZUNhcnMgPSBhd2FpdCBhcGlDYXJTZXJ2aWNlXzEuQ2Fyc0FwaVNlcnZpY2UuZ2V0UGFnaW5hdGlvbih0aGlzLmN1cnJlbnRQYWdlLCBsaW1pdCk7XG4gICAgICAgICAgICBjdXJyZW50UGFnZUNhcnMuZm9yRWFjaChhc3luYyAoY2FyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmFjZUNhciA9IGF3YWl0IHRoaXMuc3RhcnRPbmVFbmdpbih1bmRlZmluZWQsIGNhci5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKHJhY2VDYXIuc3RhdHVzID09PSAyMDApXG4gICAgICAgICAgICAgICAgICAgIHdpbm5lcnMucHVzaChyYWNlQ2FyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+alyBjYW5ub3Qgc3RhcnQgcmFjZSAnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzdG9wUmFjZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQYWdlQ2FycyA9IGF3YWl0IGFwaUNhclNlcnZpY2VfMS5DYXJzQXBpU2VydmljZS5nZXRQYWdpbmF0aW9uKHRoaXMuY3VycmVudFBhZ2UsIGxpbWl0KTtcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlQ2Fycy5mb3JFYWNoKChjYXIpID0+IHRoaXMuc3RvcE9uZUVuZ2luKHVuZGVmaW5lZCwgY2FyLmlkKSk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZXRlQnV0dG9ucygpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn6STIGkgd2FzIHRyeWluZyB0byBzdG9wIHJhc2UnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBhZGRXaW5uZXIoY2FySWQsIHRpbWUsIGNvbG9yQ2FyLCBuYW1lQ2FyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjaGVja1dpbm5lciA9IChhd2FpdCBhcGlXaW5uZXJzU2VydmljZV8xLkFwaVdpbm5lcnNTZXJ2aWNlLmdldEFsbFdpbigpKS5maW5kKCh3aW4pID0+IHdpbi5jYXJJZCA9PT0gY2FySWQpO1xuICAgICAgICAgICAgaWYgKGNoZWNrV2lubmVyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3dpbm5lciB1cGRhdGUnLCBjYXJJZCk7XG4gICAgICAgICAgICAgICAgY2hlY2tXaW5uZXIud2lucyArPSAxO1xuICAgICAgICAgICAgICAgIGNoZWNrV2lubmVyLnRpbWUgPSBjaGVja1dpbm5lci50aW1lIDw9IHRpbWUgPyBjaGVja1dpbm5lci50aW1lIDogdGltZTtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVXaW4gPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWVDYXIsXG4gICAgICAgICAgICAgICAgICAgIHdpbnM6IGNoZWNrV2lubmVyLndpbnMsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGNoZWNrV2lubmVyLnRpbWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBjaGVja1dpbm5lci5jb2xvcixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwaVdpbm5lcnNTZXJ2aWNlXzEuQXBpV2lubmVyc1NlcnZpY2UudXBkYXRlV2luKGNhcklkLCB1cGRhdGVXaW4sIHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdpbm5lciA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2FySWQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWUsXG4gICAgICAgICAgICAgICAgICAgIHdpbnM6IDEsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvckNhcixcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZUNhcixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwaVdpbm5lcnNTZXJ2aWNlXzEuQXBpV2lubmVyc1NlcnZpY2UuY3JlYXRlV2luKHdpbm5lciwgeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbWl0dGVyLm9uRW1pdCgncmVuZGVyV2lubmVycycpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dpbm5lciBpcyBub3QgZm91bmQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzaG93V2luTWVzc2FnZShpZCwgbmFtZSwgdGltZSkge1xuICAgICAgICBjb25zdCBwb3BVcFdyYXBwZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAncG9wdXAtd3JhcHBlcicpO1xuICAgICAgICBjb25zdCBvdmVybGF5ID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ292ZXJsYXknKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZVRleHQgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAnd2luLW1lc3NhZ2UnLCB7XG4gICAgICAgICAgICB0ZXh0Q29udGVudDogYENhciBpZCMke2lkfSAke25hbWV9IGlzIHdpbiB3aXRoIHRpbWUgJHt0aW1lfXNgLFxuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQob3ZlcmxheSk7XG4gICAgICAgIG92ZXJsYXkuYXBwZW5kKHBvcFVwV3JhcHBlcik7XG4gICAgICAgIHBvcFVwV3JhcHBlci5hcHBlbmQobWVzc2FnZVRleHQpO1xuICAgICAgICBjb25zdCBzaG93UG9wdXAgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm92ZXJsYXknKSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzaG93UG9wdXApO1xuICAgICAgICB9LCAzMDAwKTtcbiAgICB9XG4gICAgZGlzYWJsZUJ1dHRvbnMoKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0UmFjZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydC1yYWNlLWJ0bicpO1xuICAgICAgICBjb25zdCBzdGFydEVuZ2luZUJ0bnMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN0YXJ0LWJ0bicpXTtcbiAgICAgICAgc3RhcnRFbmdpbmVCdG5zLmZvckVhY2goKGJ0bikgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBidG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc3RhcnRSYWNlQnRuKVxuICAgICAgICAgICAgc3RhcnRSYWNlQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgc3RhcnRSYWNlQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgfVxuICAgIGFjdGl2ZXRlQnV0dG9ucygpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRSYWNlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXJ0LXJhY2UtYnRuJyk7XG4gICAgICAgIGNvbnN0IHN0YXJ0RW5naW5lQnRucyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhcnQtYnRuJyldO1xuICAgICAgICBzdGFydEVuZ2luZUJ0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc3RhcnRSYWNlQnRuKVxuICAgICAgICAgICAgc3RhcnRSYWNlQnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHN0YXJ0UmFjZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgIH1cbn1cbmV4cG9ydHMuQ2FycyA9IENhcnM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRXZlbnRFbWl0dGVyID0gdm9pZCAwO1xuY2xhc3MgRXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyTWFwID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50Q2FsbGJhY2tzID0gdGhpcy5zdWJzY3JpYmVyTWFwLmdldChldmVudCkgfHwgW107XG4gICAgICAgIGlmICghdGhpcy5zdWJzY3JpYmVyTWFwLmhhcyhldmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlck1hcC5zZXQoZXZlbnQsIFtjYWxsYmFja10pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlck1hcC5zZXQoZXZlbnQsIFsuLi5ldmVudENhbGxiYWNrcywgY2FsbGJhY2tdKTtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmUoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50Q2FsbGJhY2tzID0gdGhpcy5zdWJzY3JpYmVyTWFwLmdldChldmVudCkgfHwgW107XG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmliZXJNYXAuaGFzKGV2ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVyTWFwLnNldChldmVudCwgZXZlbnRDYWxsYmFja3MuZmlsdGVyKChmbikgPT4gZm4gIT09IGNhbGxiYWNrKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25FbWl0KGV2ZW50LCBwYXJhbSkge1xuICAgICAgICBjb25zdCBzdWJzY3JpYmVyID0gdGhpcy5zdWJzY3JpYmVyTWFwLmdldChldmVudCk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmZvckVhY2goKGZuKSA9PiBmbihwYXJhbSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuR2FyYWdlID0gdm9pZCAwO1xuY29uc3Qgcm91dGVfMSA9IHJlcXVpcmUoXCIuL3JvdXRlcy9yb3V0ZVwiKTtcbmNvbnN0IGFwaUNhclNlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL2FwaS9hcGlDYXJTZXJ2aWNlXCIpO1xuY29uc3QgY2Fyc0JyYW5kXzEgPSByZXF1aXJlKFwiLi91dGlscy9jYXJzQnJhbmRcIik7XG5jb25zdCBzZXRDb2xvcl8xID0gcmVxdWlyZShcIi4vdXRpbHMvc2V0Q29sb3JcIik7XG5jbGFzcyBHYXJhZ2UgZXh0ZW5kcyByb3V0ZV8xLlJvdXRlRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMudXJsID0gJ2dhcmFnZSc7XG4gICAgfVxuICAgIGFzeW5jIGFwcGVuZEVsZW1lbnQocGFyZW50KSB7XG4gICAgICAgIHN1cGVyLnJlbmRlcihwYXJlbnQpO1xuICAgICAgICB0aGlzLmNyZWF0ZUJ0biA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2J1dHRvbicsICdjcmVhdGUtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICdjcmVhdGUnIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZUJ0biA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2J1dHRvbicsICd1cGRhdGUtYnRuIGJ0bicsIHsgdGV4dENvbnRlbnQ6ICd1cGRhdGUnIH0pO1xuICAgICAgICB0aGlzLmNyZWF0ZUlucHV0ID0gc3VwZXIucmVuZGVyRWxlbWVudCgnc2VsZWN0JywgJ2NyZWF0ZS1pbnB1dCBpbnB1dCcpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlTW9kZWxzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlSW5wdXQgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdpbnB1dCcsICd1cGRhdGUtaW5wdXQgaW5wdXQnKTtcbiAgICAgICAgdGhpcy5jcmVhdGVQaWNrZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdpbnB1dCcsICdjcmVhdGUtcGlja2VyIHBpY2tlcicsIHsgdHlwZTogJ2NvbG9yJyB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVQaWNrZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdpbnB1dCcsICd1b2RhdGUtcGlja2VyIHBpY2tlcicsIHsgdHlwZTogJ2NvbG9yJyB9KTtcbiAgICAgICAgdGhpcy5zdGFydEJ0biA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2J1dHRvbicsICdzdGFydC1yYWNlLWJ0biBidG4nLCB7IHRleHRDb250ZW50OiAnc3RhcnQnIH0pO1xuICAgICAgICB0aGlzLnN0b3BCdG4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdidXR0b24nLCAnc3RvcC1idG4gYnRuJywgeyB0ZXh0Q29udGVudDogJ3N0b3AnIH0pO1xuICAgICAgICB0aGlzLmdlbmVyYXRlQnRuID0gc3VwZXIucmVuZGVyRWxlbWVudCgnYnV0dG9uJywgJ3VwZGF0ZS1idG4gYnRuJywgeyB0ZXh0Q29udGVudDogJ2dlbmVyYXRlIGNhcnMnIH0pO1xuICAgICAgICBjb25zdCBjb250cm9sbGVyc1dyYXBwZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAnY29udHJvbGxlcnMtd3JhcHBlcicpO1xuICAgICAgICBjb25zdCBjcmVhdGVDb250YWluZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAnY3JlYXRlLWNvbnRhaW5lciBnYXJhZ2UtaW5wdXQtY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZUNvbnRhaW5lciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICd1cGRhdGUtY29udGFpbmVyIGdhcmFnZS1pbnB1dC1jb250YWluZXInKTtcbiAgICAgICAgdGhpcy51cGRhdGVJbnB1dC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMudXBkYXRlUGlja2VyLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCBjb250cm9sbGVyc0NvbnRhaW5lciA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICdjb250cm9sbGVyLWNvbnRhaW5lciBnYXJhZ2UtaW5wdXQtY29udGFpbmVyJyk7XG4gICAgICAgIHRoaXMud3JhcHBlci5hcHBlbmQoY29udHJvbGxlcnNXcmFwcGVyKTtcbiAgICAgICAgY29udHJvbGxlcnNXcmFwcGVyLmFwcGVuZChjcmVhdGVDb250YWluZXIsIHVwZGF0ZUNvbnRhaW5lciwgY29udHJvbGxlcnNDb250YWluZXIpO1xuICAgICAgICBjcmVhdGVDb250YWluZXIuYXBwZW5kKHRoaXMuY3JlYXRlSW5wdXQsIHRoaXMuY3JlYXRlUGlja2VyLCB0aGlzLmNyZWF0ZUJ0bik7XG4gICAgICAgIHVwZGF0ZUNvbnRhaW5lci5hcHBlbmQodGhpcy51cGRhdGVJbnB1dCwgdGhpcy51cGRhdGVQaWNrZXIsIHRoaXMudXBkYXRlQnRuKTtcbiAgICAgICAgY29udHJvbGxlcnNDb250YWluZXIuYXBwZW5kKHRoaXMuc3RhcnRCdG4sIHRoaXMuc3RvcEJ0biwgdGhpcy5nZW5lcmF0ZUJ0bik7XG4gICAgICAgIHRoaXMub25VcGRhdGVOYW1lQ2FyKCk7XG4gICAgICAgIHRoaXMudXBkYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5nZXRVcGRhdGVkQ2FyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNyZWF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DcmVhdGVDYXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uR2VuZXJhdGVDYXJzLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5zdGFydFJhY2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuc3RvcEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc3RvcFJhY2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5zdWJzY3JpYmUoJ2NsZWFySW5wdXRzJywgKCkgPT4gdGhpcy5jbGVhcklucHV0cygpKTtcbiAgICB9XG4gICAgb25VcGRhdGVOYW1lQ2FyKCkge1xuICAgICAgICB0aGlzLmVtaXR0ZXIuc3Vic2NyaWJlKCdvblNlbGVjdGVkQ2FyJywgKGNhcikgPT4gdGhpcy51cGRhdGVDYXIoY2FyKSk7XG4gICAgfVxuICAgIHVwZGF0ZUNhcihzb21lQ2FyKSB7XG4gICAgICAgIGlmIChzb21lQ2FyKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRVcGRhdGVDYXIgPSBzb21lQ2FyO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NvbWUnLCBzb21lQ2FyKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXQudmFsdWUgPSBzb21lQ2FyLm5hbWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBpY2tlci52YWx1ZSA9IHNvbWVDYXIuY29sb3I7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkVXBkYXRlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXNhYmxlZFVwZGF0ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0LmRpc2FibGVkID0gdmFsdWU7XG4gICAgICAgIHRoaXMudXBkYXRlUGlja2VyLmRpc2FibGVkID0gdmFsdWU7XG4gICAgICAgIHRoaXMudXBkYXRlQnRuLmRpc2FibGVkID0gdmFsdWU7XG4gICAgfVxuICAgIGFzeW5jIGdldFVwZGF0ZWRDYXIoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGlkIH0gPSB0aGlzLmN1cnJlbnRVcGRhdGVDYXI7XG4gICAgICAgICAgICBjb25zdCBuZXdDYXIgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy51cGRhdGVJbnB1dC52YWx1ZSxcbiAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy51cGRhdGVQaWNrZXIudmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLnVwZGF0ZUNhcihpZCwgbmV3Q2FyLCB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSk7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkQ2FyID0gYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLmdldENhcihpZCk7XG4gICAgICAgICAgICBpZiAodXBkYXRlZENhci5pZClcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXIub25FbWl0KCdvblVwZGF0ZUNhcicsIHVwZGF0ZWRDYXIpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQaWNrZXIudmFsdWUgPSAnIzAwMDAwMCc7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkVXBkYXRlKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjYXIgaXMgbm90IGV4aXN0Jyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25DcmVhdGVDYXIoKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmNyZWF0ZUlucHV0LnZhbHVlID8gdGhpcy5jcmVhdGVJbnB1dC52YWx1ZSA6ICgwLCBjYXJzQnJhbmRfMS5jcmVhdGVDYXJOYW1lKSgpO1xuICAgICAgICBjb25zdCBjb2xvciA9IHRoaXMuY3JlYXRlUGlja2VyLnZhbHVlO1xuICAgICAgICBjb25zdCBuZXdDYXIgPSB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgY29sb3IsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRDYXIgPSBhd2FpdCBhcGlDYXJTZXJ2aWNlXzEuQ2Fyc0FwaVNlcnZpY2UuY3JlYXRlQ2FyKG5ld0NhciwgeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pO1xuICAgICAgICB0aGlzLmVtaXR0ZXIub25FbWl0KCdvbkNyZWF0ZWRDYXInLCBjcmVhdGVkQ2FyKTtcbiAgICAgICAgdGhpcy5jcmVhdGVJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICB0aGlzLmNyZWF0ZVBpY2tlci52YWx1ZSA9ICcjMDAwMDAwJztcbiAgICB9XG4gICAgYXN5bmMgb25HZW5lcmF0ZUNhcnMoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBsZW5ndGhCZWZvcmUgPSAoYXdhaXQgYXBpQ2FyU2VydmljZV8xLkNhcnNBcGlTZXJ2aWNlLmdldEFsbENhcnMoKSkubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IG5ldyBBcnJheSgxMDApLmZpbGwoJzAnKS5tYXAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSAoMCwgY2Fyc0JyYW5kXzEuY3JlYXRlQ2FyTmFtZSkoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xvciA9ICgwLCBzZXRDb2xvcl8xLnNldENhckNvbG9yKSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NhciA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY29sb3IsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcGlDYXJTZXJ2aWNlXzEuQ2Fyc0FwaVNlcnZpY2UuY3JlYXRlQ2FyKG5ld0NhciwgeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdDYXI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyciwgbGVuZ3RoQmVmb3JlKTtcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWRDYXIgPSBhd2FpdCBhcGlDYXJTZXJ2aWNlXzEuQ2Fyc0FwaVNlcnZpY2UuZ2V0QWxsQ2FycygpO1xuICAgICAgICAgICAgLy8gdGhpcy5jYXJzTnVtYmVycy50ZXh0Q29udGVudCA9IGBHYXJhZ2Uke2NyZWF0ZWRDYXIubGVuZ3RofWA7XG4gICAgICAgICAgICB0aGlzLmVtaXR0ZXIub25FbWl0KCdvbkNyZWF0ZWRDYXInLCBjcmVhdGVkQ2FyLnNsaWNlKGxlbmd0aEJlZm9yZSArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+roCBjYW5ub3QgZ2VuZXJhdGUgY2FycycpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFySW5wdXRzKCkge1xuICAgICAgICB0aGlzLmNyZWF0ZUlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIHRoaXMuY3JlYXRlUGlja2VyLnZhbHVlID0gJyMwMDAwMDAnO1xuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIHRoaXMudXBkYXRlUGlja2VyLnZhbHVlID0gJyMwMDAwMDAnO1xuICAgIH1cbiAgICBnZW5lcmF0ZU1vZGVscygpIHtcbiAgICAgICAgY29uc3QgY2FyTmFtZXMgPSAoMCwgY2Fyc0JyYW5kXzEuc2VsZWN0Q2FyTmFtZSkoKTtcbiAgICAgICAgY2FyTmFtZXMudW5zaGlmdCgnJyk7XG4gICAgICAgIGNhck5hbWVzLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICB2YWx1ZS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgbmFtZSk7XG4gICAgICAgICAgICB2YWx1ZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUlucHV0LmFwcGVuZCh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGFydFJhY2UoKSB7XG4gICAgICAgIHRoaXMuZW1pdHRlci5vbkVtaXQoJ29uU3RhcnRSYWNlJyk7XG4gICAgfVxuICAgIHN0b3BSYWNlKCkge1xuICAgICAgICB0aGlzLmVtaXR0ZXIub25FbWl0KCdvblN0b3BSYWNlJyk7XG4gICAgfVxufVxuZXhwb3J0cy5HYXJhZ2UgPSBHYXJhZ2U7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSGVhZGVyID0gdm9pZCAwO1xuY29uc3Qgdmlld18xID0gcmVxdWlyZShcIi4vdmlld1wiKTtcbmNsYXNzIEhlYWRlciBleHRlbmRzIHZpZXdfMS5WaWV3IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5uYXZFbGVtZW50cyA9IFtdO1xuICAgICAgICAvLyBwcml2YXRlIG5hdkJ0bkdhcmFnZSE6IEhUTUxFbGVtZW50O1xuICAgICAgICAvLyBwcml2YXRlIG5hdkJ0bldpbm5lcnMhOiBIVE1MRWxlbWVudDtcbiAgICAgICAgdGhpcy5yb3V0ZXMgPSBbXG4gICAgICAgICAgICB7IHRpdGxlOiAnZ2FyYWdlJywgdXJsOiAnZ2FyYWdlJyB9LFxuICAgICAgICAgICAgeyB0aXRsZTogJ3dpbm5lcnMnLCB1cmw6ICd3aW5uZXJzJyB9LFxuICAgICAgICBdO1xuICAgIH1cbiAgICBhcHBlbmRFbGVtZW50KHBhcmVudCkge1xuICAgICAgICBjb25zdCBoZWFkZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdoZWFkZXInLCAnaGVhZGVyJyk7XG4gICAgICAgIGNvbnN0IGhlYWRpbmcgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdoMScsICdoZWFkaW5nJywgeyB0ZXh0Q29udGVudDogJ2FzeW5jLVJhY2UnIH0pO1xuICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ2hlYWRlci1jb250ZW50Jyk7XG4gICAgICAgIGNvbnN0IGhlYWRlck5hdiA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ25hdicsICduYXYnKTtcbiAgICAgICAgdGhpcy5zdWJ0aXRsZSA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2gyJywgJ3N1YnRpdGxlJywgeyB0ZXh0Q29udGVudDogJ2FzeW5jLVJhY2UnIH0pO1xuICAgICAgICBjb25zdCB0ZXhCb3ggPSBzdXBlci5yZW5kZXJFbGVtZW50KCdkaXYnLCAnaGVhZGVyX190ZXh0LXdyYXBwdGVyJyk7XG4gICAgICAgIHBhcmVudC5hcHBlbmQoaGVhZGVyKTtcbiAgICAgICAgaGVhZGVyLmFwcGVuZChoZWFkaW5nLCB0ZXhCb3gsIGhlYWRlckNvbnRlbnQpO1xuICAgICAgICBoZWFkZXJDb250ZW50LmFwcGVuZCh0aGlzLnN1YnRpdGxlLCBoZWFkZXJOYXYpO1xuICAgICAgICB0aGlzLnJvdXRlcy5mb3JFYWNoKChyb3V0ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmF2TGluayA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2EnLCBgJHtyb3V0ZS50aXRsZX0tbGluayBuYXYtbGlua2AsIHsgdGV4dENvbnRlbnQ6IHJvdXRlLnRpdGxlIH0pO1xuICAgICAgICAgICAgbmF2TGluay5zZXRBdHRyaWJ1dGUoJ3VybCcsIHJvdXRlLnVybCk7XG4gICAgICAgICAgICB0aGlzLm5hdkVsZW1lbnRzLnB1c2gobmF2TGluayk7XG4gICAgICAgICAgICBoZWFkZXJOYXYuYXBwZW5kKG5hdkxpbmspO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vbkNoYW5nZVJvdXRlKHRoaXMucm91dGVzWzBdKTtcbiAgICAgICAgaGVhZGVyTmF2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jaGFuZ2VSb3V0ZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgb25DaGFuZ2VSb3V0ZShyb3V0ZSkge1xuICAgICAgICB0aGlzLnN1YnRpdGxlLmlubmVySFRNTCA9IHJvdXRlLnRpdGxlO1xuICAgICAgICB0aGlzLmVtaXR0ZXIub25FbWl0KCdyb3V0ZUNoYW5nZWQnLCByb3V0ZSk7XG4gICAgfVxuICAgIGNoYW5nZVJvdXRlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhcmdldExpbmsgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGNvbnN0IHVybCA9IHRhcmdldExpbmsuZ2V0QXR0cmlidXRlKCd1cmwnKTtcbiAgICAgICAgY29uc3Qgcm91dGUgPSB0aGlzLnJvdXRlcy5maW5kKChsaW5rKSA9PiBsaW5rLnVybCA9PT0gdXJsKTtcbiAgICAgICAgaWYgKHJvdXRlKVxuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZVJvdXRlKHJvdXRlKTtcbiAgICB9XG59XG5leHBvcnRzLkhlYWRlciA9IEhlYWRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Sb3V0ZUVsZW1lbnQgPSB2b2lkIDA7XG5jb25zdCB2aWV3XzEgPSByZXF1aXJlKFwiLi4vdmlld1wiKTtcbmNsYXNzIFJvdXRlRWxlbWVudCBleHRlbmRzIHZpZXdfMS5WaWV3IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5pc1Nob3cgPSBmYWxzZTtcbiAgICB9XG4gICAgcmVuZGVyKHBhcmVudCkge1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy53cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VjdGlvbicpO1xuICAgICAgICB0aGlzLndyYXBwZXIuY2xhc3NOYW1lID0gYCR7dGhpcy51cmx9LXdyYXBwZXJgO1xuICAgICAgICB0aGlzLndyYXBwZXIuc2V0QXR0cmlidXRlKCd1cmwnLCB0aGlzLnVybCk7XG4gICAgfVxuICAgIHNob3coKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1Nob3cpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFwcGVuZENoaWxkKHRoaXMud3JhcHBlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGlkZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTaG93KSB7XG4gICAgICAgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy53cmFwcGVyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuUm91dGVFbGVtZW50ID0gUm91dGVFbGVtZW50O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnNlbGVjdENhck5hbWUgPSBleHBvcnRzLmNyZWF0ZUNhck5hbWUgPSBleHBvcnRzLm1vZGVscyA9IGV4cG9ydHMuYnJhbmQgPSB2b2lkIDA7XG5leHBvcnRzLmJyYW5kID0gW1xuICAgICdBdWRpJyxcbiAgICAnQmV0YSBKdWxpZXRhJyxcbiAgICAnQk1XJyxcbiAgICAnQ2l0cm9lbicsXG4gICAgJ0luZmluaXRpJyxcbiAgICAnSmVlcCcsXG4gICAgJ0tpYScsXG4gICAgJ0xleHVzJyxcbiAgICAnTmlzc2FuJyxcbiAgICAnT3BlbCcsXG4gICAgJ1ZvbHZvJyxcbl07XG5leHBvcnRzLm1vZGVscyA9IFtcbiAgICAnQTQnLFxuICAgICdYMicsXG4gICAgJ0NFRUQnLFxuICAgICdDRVJBVE8nLFxuICAgICdSSU8nLFxuICAgICdHRU5FU0lTJyxcbiAgICAnR0VUWicsXG4gICAgJ0dSQU5ERVVSJyxcbiAgICAnTUFUUklYJyxcbiAgICAnWENFTlQnLFxuICAgICdBbGZhIFJvbWVvJyxcbl07XG5jb25zdCBjcmVhdGVDYXJOYW1lID0gKCkgPT4ge1xuICAgIGNvbnN0IHJhbmRvbU1vZGVsID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZXhwb3J0cy5tb2RlbHMubGVuZ3RoKTtcbiAgICBjb25zdCByYW5kb21CcmFuZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGV4cG9ydHMuYnJhbmQubGVuZ3RoKTtcbiAgICByZXR1cm4gYCR7ZXhwb3J0cy5icmFuZFtyYW5kb21CcmFuZF19ICR7ZXhwb3J0cy5tb2RlbHNbcmFuZG9tTW9kZWxdfSBgO1xufTtcbmV4cG9ydHMuY3JlYXRlQ2FyTmFtZSA9IGNyZWF0ZUNhck5hbWU7XG5jb25zdCBzZWxlY3RDYXJOYW1lID0gKCkgPT4gQXJyYXkoNilcbiAgICAuZmlsbCgnJylcbiAgICAubWFwKCgpID0+IGAke2V4cG9ydHMuYnJhbmRbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZXhwb3J0cy5icmFuZC5sZW5ndGgpXX0gJHtleHBvcnRzLm1vZGVsc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBleHBvcnRzLm1vZGVscy5sZW5ndGgpXX1gKTtcbmV4cG9ydHMuc2VsZWN0Q2FyTmFtZSA9IHNlbGVjdENhck5hbWU7XG5jb25zb2xlLmxvZygpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnNldENhckNvbG9yID0gdm9pZCAwO1xuY29uc3Qgc2V0Q29sb3IgPSAoKSA9PiB7XG4gICAgY29uc3QgY29sb3IgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTUpLnRvU3RyaW5nKDE2KTtcbiAgICByZXR1cm4gY29sb3IubGVuZ3RoID09PSAyID8gY29sb3IgOiBjb2xvci5wYWRTdGFydCgyLCAnMCcpO1xufTtcbmNvbnN0IHNldENhckNvbG9yID0gKCkgPT4gYCMke3NldENvbG9yKCl9JHtzZXRDb2xvcigpfSR7c2V0Q29sb3IoKX1gO1xuZXhwb3J0cy5zZXRDYXJDb2xvciA9IHNldENhckNvbG9yO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNvcnRPcmRlcldpbm5lciA9IGV4cG9ydHMuU29ydFdpbm5lciA9IGV4cG9ydHMuRW5naW5lID0gZXhwb3J0cy5QYXRoID0gdm9pZCAwO1xudmFyIFBhdGg7XG4oZnVuY3Rpb24gKFBhdGgpIHtcbiAgICBQYXRoW1wiZ2FyYWdlXCJdID0gXCJnYXJhZ2VcIjtcbiAgICBQYXRoW1wiZW5naW5lXCJdID0gXCJlbmdpbmVcIjtcbiAgICBQYXRoW1wid2lubmVyc1wiXSA9IFwid2lubmVyc1wiO1xufSkoUGF0aCB8fCAoZXhwb3J0cy5QYXRoID0gUGF0aCA9IHt9KSk7XG52YXIgRW5naW5lO1xuKGZ1bmN0aW9uIChFbmdpbmUpIHtcbiAgICBFbmdpbmVbXCJzdGFydGVkXCJdID0gXCJzdGFydGVkXCI7XG4gICAgRW5naW5lW1wic3RvcHBlZFwiXSA9IFwic3RvcHBlZFwiO1xuICAgIEVuZ2luZVtcImRyaXZlXCJdID0gXCJkcml2ZVwiO1xufSkoRW5naW5lIHx8IChleHBvcnRzLkVuZ2luZSA9IEVuZ2luZSA9IHt9KSk7XG52YXIgU29ydFdpbm5lcjtcbihmdW5jdGlvbiAoU29ydFdpbm5lcikge1xuICAgIFNvcnRXaW5uZXJbXCJpZFwiXSA9IFwiaWRcIjtcbiAgICBTb3J0V2lubmVyW1wid2luc1wiXSA9IFwid2luc1wiO1xuICAgIFNvcnRXaW5uZXJbXCJ0aW1lXCJdID0gXCJ0aW1lXCI7XG59KShTb3J0V2lubmVyIHx8IChleHBvcnRzLlNvcnRXaW5uZXIgPSBTb3J0V2lubmVyID0ge30pKTtcbnZhciBTb3J0T3JkZXJXaW5uZXI7XG4oZnVuY3Rpb24gKFNvcnRPcmRlcldpbm5lcikge1xuICAgIFNvcnRPcmRlcldpbm5lcltcIkFTQ1wiXSA9IFwiQVNDXCI7XG4gICAgU29ydE9yZGVyV2lubmVyW1wiREVTQ1wiXSA9IFwiREVTQ1wiO1xufSkoU29ydE9yZGVyV2lubmVyIHx8IChleHBvcnRzLlNvcnRPcmRlcldpbm5lciA9IFNvcnRPcmRlcldpbm5lciA9IHt9KSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVmlldyA9IHZvaWQgMDtcbmNsYXNzIFZpZXcge1xuICAgIGNvbnN0cnVjdG9yKGVtaXR0ZXIpIHtcbiAgICAgICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgICB9XG4gICAgcmVuZGVyRWxlbWVudCh0YWcsIGNsYXNzTmFtZSwgYXR0cmlidXRlKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgICAgIGlmIChjbGFzc05hbWUpXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZSlcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZWxlbWVudCwgYXR0cmlidXRlKTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxufVxuZXhwb3J0cy5WaWV3ID0gVmlldztcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5XaW5uZXJzID0gdm9pZCAwO1xuY29uc3Qgcm91dGVfMSA9IHJlcXVpcmUoXCIuL3JvdXRlcy9yb3V0ZVwiKTtcbmNvbnN0IGFwaVdpbm5lcnNTZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9hcGkvYXBpV2lubmVyc1NlcnZpY2VcIik7XG5jb25zdCBzdmdDYXIgPSBgPHN2ZyB2ZXJzaW9uPVwiMS4wXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgd2lkdGg9XCIxMjgwLjAwMDAwMHB0XCIgaGVpZ2h0PVwiODA2LjAwMDAwMHB0XCIgdmlld0JveD1cIjAgMCAxMjgwLjAwMDAwMCA4MDYuMDAwMDAwXCJcbiAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pZFlNaWQgbWVldFwiPlxuICAgPGcgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDAuMDAwMDAwLDgwNi4wMDAwMDApIHNjYWxlKDAuMTAwMDAwLC0wLjEwMDAwMClcIlxuICAgZmlsbD1cIjAwMDAwMFwiICBzdHJva2U9XCJub25lXCI+XG4gICA8cGF0aCBkPVwiTTY4NDUgODA1MCBjLTM4IC01IC0xMzUgLTEzIC0yMTUgLTIwIC0zNzYgLTMwIC03NTQgLTEwNiAtMTExNSAtMjI1XG4gICAtMjM3IC03OCAtMzc2IC0xMzUgLTYxMCAtMjUwIC01NDAgLTI2NSAtOTY4IC01NzcgLTE0NDEgLTEwNTAgLTI1NCAtMjU0IC00MDdcbiAgIC00MjggLTY3MiAtNzY1IC0zMzkgLTQzMSAtNTUwIC02MTQgLTgwNSAtNjk4IC01MCAtMTcgLTE4MCAtNDkgLTI4NyAtNzIgLTMzN1xuICAgLTczIC01MzcgLTE0MCAtNzY1IC0yNTggLTU1MCAtMjg2IC04MjggLTc0OCAtODk5IC0xNDk3IC00MyAtNDUzIC00NiAtNTg5XG4gICAtMTYgLTc2MyA1MiAtMzA0IDE0OSAtNDk0IDM1NCAtNjk3IDEyMiAtMTIyIDIxOSAtMTkzIDM2NCAtMjY2IGw5NSAtNDkgMTgwIDBcbiAgIDE4MCAwIC03IDU1IGMtMjkgMjUwIC0yNiA0NDggMTAgNjYwIDExMyA2NzMgNTQ3IDEyNTggMTE2MCAxNTY0IDkwOCA0NTMgMTk5OFxuICAgMjE4IDI2NDEgLTU3MCAzMzcgLTQxMyA1MTggLTk4MyA0NzQgLTE0OTMgLTYgLTc4IC0xNCAtMTU5IC0xOCAtMTc5IGwtNiAtMzdcbiAgIDEyMzYgMCBjNjgwIDAgMTIzOCAzIDEyNDAgNyAyIDUgLTIgNTUgLTkgMTEzIC03IDU4IC0xMyAxNjMgLTE0IDIzMyAtMiA5NzRcbiAgIDY2MSAxODM2IDE2MDIgMjA4MSAyMDUgNTQgMzM0IDcwIDU1MyA3MCAzNTIgMCA2MjcgLTYyIDk0MCAtMjEzIDU1OCAtMjcwIDk3M1xuICAgLTc2NyAxMTM4IC0xMzYxIDU0IC0xOTIgNzAgLTMxOCA3MSAtNTM1IDEgLTExMCAtMiAtMjMzIC03IC0yNzMgbC03IC03MyA0NlxuICAgMzggYzY5IDU3IDE3NyAxODUgMjU1IDMwMSAxNTIgMjI3IDI0MSA0NzMgMjg2IDc5MiAzMCAyMTUgMjIgNDE1IC0yOCA2NjQgLTgxXG4gICA0MDIgLTI5MyA3NDMgLTU5OCA5NjMgLTIgMSAtNSA0NyAtNyAxMDAgLTQgMTY5IC00OCAzODEgLTE0NCA2OTggLTEyMiA0MDFcbiAgIC0yNDYgNjU5IC00OTcgMTAyOCAtMjE0IDMxNiAtNDk4IDY2NiAtNzYzIDk0MCAtMTAyIDEwNiAtMTQ5IDE0NiAtMjU2IDIxNlxuICAgLTQxNSAyNzUgLTEwNDAgNTExIC0xNzI0IDY1MCAtMzU4IDczIC02OTEgMTE3IC0xMDg1IDE0NSAtMTIxIDkgLTI3NiAyMCAtMzQ1XG4gICAyNiAtMTQyIDExIC0zODEgMTEgLTQ4NSAweiBtNjAgLTgyNCBjMjEwIC01OSAzODQgLTIwMyA0NzUgLTM5MSA3MiAtMTQ4IDczXG4gICAtMTU3IDc3IC01ODAgNSAtNDE0IC03IC03MjcgLTMyIC04NTEgLTMwIC0xNDYgLTEwMCAtMjU5IC0xODkgLTMwNyBsLTQxIC0yMlxuICAgLTE1NDAgLTMgYy0xMTQ1IC0yIC0xNTU0IDAgLTE1OTUgOSAtMTIxIDI1IC0yMjEgOTYgLTI2MSAxODIgLTI0IDUzIC0yNSAxNzJcbiAgIC0zIDI0OCA2MSAyMDUgMzEwIDUzNiA2OTMgOTIwIDEwOCAxMDcgMjQ2IDIzNSAzMDYgMjgzIDQxMiAzMzAgODAzIDQ4OCAxMzA1XG4gICA1MzAgMjUgMiAyMDMgMiAzOTUgMSAyOTQgLTEgMzYwIC00IDQxMCAtMTl6IG0yMDYwIC05MSBjMTUyIC0zNCA0MzUgLTEyNiA1NDNcbiAgIC0xNzYgMzg4IC0xNzkgNzU4IC01NjUgOTgyIC0xMDI0IDE0NiAtMzAwIDE5NCAtNTMzIDEzOSAtNjc5IC0yOCAtNzYgLTk5XG4gICAtMTM5IC0xODYgLTE2NiAtNjMgLTE5IC05MiAtMjAgLTk5MSAtMjAgLTkyNCAwIC05MjYgMCAtOTcwIDIxIC01MSAyNSAtOTMgNzlcbiAgIC0xMTkgMTUyIC0xNyA0OSAtMTggMTA3IC0xOCA4NzcgbDAgODI1IDIzIDU1IGMzOSA5NSA3OCAxMjggMTgwIDE1MSAxMDkgMjVcbiAgIDI2MSAxOSA0MTcgLTE2elwiLz5cbiAgIDxwYXRoIGQ9XCJNMzE0MCAzNTY5IGMtNzE4IC02OSAtMTMzMyAtNTgzIC0xNTM2IC0xMjg1IC01MSAtMTc0IC02NiAtMzEwIC02MlxuICAgLTUyOSA1IC0yMjYgMjUgLTM0NCA4NSAtNTI0IDk1IC0yODUgMjM4IC01MDggNDY3IC03MjggMjc5IC0yNjkgNjAwIC00MjFcbiAgIDEwMjAgLTQ4MiAxNzQgLTI2IDIzOCAtMjYgNDEyIDAgMzU1IDUyIDYwNiAxNTIgODY2IDM0NiAzNDMgMjU1IDU5MCA2NDIgNjc4XG4gICAxMDYzIDYzIDMwNSA0NCA2MzEgLTU1IDkyOCAtMjY1IDc5MiAtMTAzOCAxMjkyIC0xODc1IDEyMTF6IG0zNTkgLTkzOSBjMjAxXG4gICAtNDEgMzk4IC0xNjkgNTE2IC0zMzUgMjQxIC0zMzkgMjEzIC03ODYgLTY5IC0xMDgyIC0xNjYgLTE3NSAtMzQ4IC0yNjAgLTU4MFxuICAgLTI3MSAtMjAwIC04IC0zNjAgMzUgLTUxNyAxMzkgLTQ0NCAyOTggLTUxNSA5MTEgLTE1MCAxMzAyIDE5OSAyMTMgNTA2IDMwOFxuICAgODAwIDI0N3pcIi8+XG4gICA8cGF0aCBkPVwiTTk4NzEgMzU2OSBjLTIxNCAtMjQgLTM5OCAtNzcgLTU5MSAtMTcwIC04MDkgLTM5MCAtMTIwMSAtMTMxNCAtOTE5XG4gICAtMjE2OSAxODkgLTU3NSA2ODUgLTEwMzAgMTI3NCAtMTE3MCAxMDggLTI2IDM0NiAtNjAgNDE5IC02MCA4MSAwIDMzMCAzNyA0NDFcbiAgIDY1IDcwNiAxNzkgMTIzNCA3NzIgMTMzMCAxNDkyIDEyOCA5NTggLTUyOCAxODQwIC0xNDg1IDE5OTggLTExOSAxOSAtMzU4IDI3XG4gICAtNDY5IDE0eiBtMzE5IC05MzAgYzM1MCAtNTYgNjM1IC0zMzAgNzA1IC02NzggMjMgLTExMiAxNiAtMjk0IC0xNSAtNDAxIC02N1xuICAgLTIzNCAtMjM1IC00MzEgLTQ1NSAtNTM2IC0xNDEgLTY3IC0xOTYgLTc5IC0zNzAgLTc5IC0xNzUgMCAtMjMxIDEzIC0zNzEgODBcbiAgIC0xNzggODYgLTMxMyAyMjEgLTM5OSAzOTggLTY3IDEzOSAtNzkgMTk3IC04MCAzNjcgMCAxNTMgMTAgMjEwIDU5IDMzMiAxMDdcbiAgIDI2MyAzNjUgNDcwIDY0OCA1MTcgNzUgMTIgMjAyIDEzIDI3OCAwelwiLz5cbiAgIDwvZz5cbiAgIDwvc3ZnPlxuICAgYDtcbmNvbnN0IGxpbWl0ID0ge1xuICAgIGtleTogJ19saW1pdCcsXG4gICAgdmFsdWU6IDEwLFxufTtcbmNvbnN0IHN0YXJ0UGFnZSA9IDE7XG5jbGFzcyBXaW5uZXJzIGV4dGVuZHMgcm91dGVfMS5Sb3V0ZUVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGVtaXR0ZXIpIHtcbiAgICAgICAgc3VwZXIoZW1pdHRlcik7XG4gICAgICAgIHRoaXMuZW1pdHRlciA9IGVtaXR0ZXI7XG4gICAgICAgIHRoaXMudXJsID0gJ3dpbm5lcnMnO1xuICAgICAgICB0aGlzLmN1cnJlbnRXaW5uZXJQYWdlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRQYWdlV2lubmVyJylcbiAgICAgICAgICAgID8gTnVtYmVyKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50UGFnZVdpbm5lcicpKVxuICAgICAgICAgICAgOiAxO1xuICAgICAgICB0aGlzLmdldEFsbFdpbm5lcnNQYWdpbmF0aW9uKHRoaXMuY3VycmVudFdpbm5lclBhZ2UpO1xuICAgICAgICB0aGlzLm9uU3ViV2luKCk7XG4gICAgICAgIHRoaXMuZ2V0V2lubmVyc1F0eSgpO1xuICAgIH1cbiAgICBhc3luYyBnZXRXaW5uZXJzUXR5KCkge1xuICAgICAgICBjb25zdCB0b3RhbENhcnMgPSBhd2FpdCBhcGlXaW5uZXJzU2VydmljZV8xLkFwaVdpbm5lcnNTZXJ2aWNlLmdldEFsbFdpbigpO1xuICAgICAgICB0aGlzLnF0eVdpbnMgPSB0b3RhbENhcnMubGVuZ3RoO1xuICAgICAgICB0aGlzLmNhcnNOdW1iZXJzLnRleHRDb250ZW50ID0gU3RyaW5nKHRoaXMucXR5V2lucyk7XG4gICAgfVxuICAgIGFwcGVuZEVsZW1lbnQocGFyZW50KSB7XG4gICAgICAgIHN1cGVyLnJlbmRlcihwYXJlbnQpO1xuICAgICAgICB0aGlzLm5leHRCdG4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdidXR0b24nLCAnbmV4dC1idG4gYnRuIHdpbi1wYWdlLWJ0bicsIHtcbiAgICAgICAgICAgIHRleHRDb250ZW50OiAnbmV4dCcsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByZXZCdG4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdidXR0b24nLCAncHJldi1idG4gYnRuIHdpbi1wYWdlLWJ0bicsIHtcbiAgICAgICAgICAgIHRleHRDb250ZW50OiAncHJldicsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjb250YWluZXJXaW5QYWdlID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ3dyYXBwZXItcGFnZV9jb250cm9sbGVyJyk7XG4gICAgICAgIHRoaXMud2lubm5lcnNIZWFkZXIgPSBzdXBlci5yZW5kZXJFbGVtZW50KCdoMycsICd0aXRsZScsIHsgdGV4dENvbnRlbnQ6ICdXaW5uZXJzICMnIH0pO1xuICAgICAgICB0aGlzLmNhcnNOdW1iZXJzID0gc3VwZXIucmVuZGVyRWxlbWVudCgnc3BhbicsICd0aXRsZScpO1xuICAgICAgICB0aGlzLnBhZ2VOdW1iZXJzID0gc3VwZXIucmVuZGVyRWxlbWVudCgnaDQnLCAnc3VidGl0bGUtcGFnZScsIHsgdGV4dENvbnRlbnQ6ICdQYWdlcyhoZXJlIG51bWJlciknIH0pO1xuICAgICAgICB0aGlzLnRhYmxlQ29udGFpbmVyID0gc3VwZXIucmVuZGVyRWxlbWVudCgnZGl2JywgJ3RhYmxlLWNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLndpblRhYmxlSGVhZCA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICd0YWJsZS1oZWFkIHRhYmxlLXJvdycpO1xuICAgICAgICB0aGlzLmlkV2luID0gc3VwZXIucmVuZGVyRWxlbWVudCgnc3BhbicsICd0YWJsZS1pZC13aW5uZXInLCB7IHRleHRDb250ZW50OiAnTnVtYmVyJyB9KTtcbiAgICAgICAgdGhpcy5jYXJJbWdXaW4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdzcGFuJywgJ3RhYmxlLWltZy13aW5uZXInLCB7IHRleHRDb250ZW50OiAnQ2FyJyB9KTtcbiAgICAgICAgdGhpcy5jYXJOYW1lV2luID0gc3VwZXIucmVuZGVyRWxlbWVudCgnc3BhbicsICd0YWJsZS1uYW1lLXdpbm5lcicsIHsgdGV4dENvbnRlbnQ6ICdOYW1lJyB9KTtcbiAgICAgICAgdGhpcy5udW1ibmVyV2lucyA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ3NwYW4nLCAndGFibGUtbnVtYmVycy13aW5zJywgeyB0ZXh0Q29udGVudDogJ1dpbnMnIH0pO1xuICAgICAgICB0aGlzLnRpbWVXaW4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdzcGFuJywgJ3RhYmxlLXRpbWUtd2lucycsIHsgdGV4dENvbnRlbnQ6ICdCZXN0IHRpbWUnIH0pO1xuICAgICAgICB0aGlzLndyYXBwZXIuYXBwZW5kKHRoaXMud2lubm5lcnNIZWFkZXIsIGNvbnRhaW5lcldpblBhZ2UsIHRoaXMudGFibGVDb250YWluZXIpO1xuICAgICAgICB0aGlzLndpbm5uZXJzSGVhZGVyLmFwcGVuZCh0aGlzLmNhcnNOdW1iZXJzKTtcbiAgICAgICAgY29udGFpbmVyV2luUGFnZS5hcHBlbmQodGhpcy5wYWdlTnVtYmVycywgdGhpcy5wcmV2QnRuLCB0aGlzLm5leHRCdG4pO1xuICAgICAgICB0aGlzLnRhYmxlQ29udGFpbmVyLmFwcGVuZCh0aGlzLndpblRhYmxlSGVhZCk7XG4gICAgICAgIHRoaXMud2luVGFibGVIZWFkLmFwcGVuZCh0aGlzLmlkV2luLCB0aGlzLmNhckltZ1dpbiwgdGhpcy5jYXJOYW1lV2luLCB0aGlzLm51bWJuZXJXaW5zLCB0aGlzLnRpbWVXaW4pO1xuICAgICAgICB0aGlzLm5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm5leHRQYWdlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnByZXZCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnByZXZQYWdlLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBhc3luYyBnZXRBbGxXaW5uZXJzUGFnaW5hdGlvbihwYWdlID0gc3RhcnRQYWdlKSB7XG4gICAgICAgIHRoaXMuZGF0YVdpbm5lcnMgPSBhd2FpdCBhcGlXaW5uZXJzU2VydmljZV8xLkFwaVdpbm5lcnNTZXJ2aWNlLmdldFBhZ2luYXRpb24ocGFnZSwgbGltaXQpO1xuICAgICAgICBpZiAodGhpcy5kYXRhV2lubmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFdpbm5lclBhZ2UgLT0gMTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVdpbm5lcnMgPSBhd2FpdCBhcGlXaW5uZXJzU2VydmljZV8xLkFwaVdpbm5lcnNTZXJ2aWNlLmdldFBhZ2luYXRpb24odGhpcy5jdXJyZW50V2lubmVyUGFnZSwgbGltaXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFnZU51bWJlcnMudGV4dENvbnRlbnQgPSBTdHJpbmcodGhpcy5jdXJyZW50V2lubmVyUGFnZSk7XG4gICAgICAgIHRoaXMucmVuZGVyV2lubmVyKHRoaXMuZGF0YVdpbm5lcnMpO1xuICAgIH1cbiAgICByZW5kZXJXaW5uZXIod2lubmVyTGlzdCkge1xuICAgICAgICB0aGlzLmNvbnRlbnRUYWJsZSA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICd0YWJsZS1jb250ZW50Jyk7XG4gICAgICAgIHRoaXMudGFibGVDb250YWluZXIuYXBwZW5kKHRoaXMuY29udGVudFRhYmxlKTtcbiAgICAgICAgd2lubmVyTGlzdC5mb3JFYWNoKCh3aW5uZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdpblRhYmxlSGVhZCA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ2RpdicsICd0YWJsZS1oZWFkIHRhYmxlLXJvdycpO1xuICAgICAgICAgICAgY29uc3QgaWRXaW4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdzcGFuJywgJ3RhYmxlLWlkLXdpbm5lcicsIHsgdGV4dENvbnRlbnQ6IHdpbm5lci5pZCB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNhckltZ1dpbiA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ3NwYW4nLCAndGFibGUtaW1nLXdpbm5lcicsIHsgdGV4dENvbnRlbnQ6IHdpbm5lci5jb2xvciB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNhck5hbWVXaW4gPSBzdXBlci5yZW5kZXJFbGVtZW50KCdzcGFuJywgJ3RhYmxlLW5hbWUtd2lubmVyJywgeyB0ZXh0Q29udGVudDogd2lubmVyLm5hbWUgfSk7XG4gICAgICAgICAgICBjb25zdCBudW1ibmVyV2lucyA9IHN1cGVyLnJlbmRlckVsZW1lbnQoJ3NwYW4nLCAndGFibGUtbnVtYmVycy13aW5zJywgeyB0ZXh0Q29udGVudDogd2lubmVyLndpbnMgfSk7XG4gICAgICAgICAgICBjb25zdCB0aW1lV2luID0gc3VwZXIucmVuZGVyRWxlbWVudCgnc3BhbicsICd0YWJsZS10aW1lLXdpbnMnLCB7IHRleHRDb250ZW50OiB3aW5uZXIudGltZSB9KTtcbiAgICAgICAgICAgIGNhckltZ1dpbi5pbm5lckhUTUwgPSBzdmdDYXI7XG4gICAgICAgICAgICBjYXJJbWdXaW4uc3R5bGUuZmlsbCA9IHdpbm5lci5jb2xvcjtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlLmFwcGVuZCh3aW5UYWJsZUhlYWQpO1xuICAgICAgICAgICAgd2luVGFibGVIZWFkLmFwcGVuZChpZFdpbiwgY2FySW1nV2luLCBjYXJOYW1lV2luLCBudW1ibmVyV2lucywgdGltZVdpbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBuZXh0UGFnZSgpIHtcbiAgICAgICAgY29uc3QgbWF4UGFnZSA9IHRoaXMucXR5V2lucyAvIGxpbWl0LnZhbHVlO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50V2lubmVyUGFnZSA8IG1heFBhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcmV2QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRXaW5uZXJQYWdlICs9IDE7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFBhZ2VXaW5uZXInLCBTdHJpbmcodGhpcy5jdXJyZW50V2lubmVyUGFnZSkpO1xuICAgICAgICAgICAgdGhpcy5wYWdlTnVtYmVycy50ZXh0Q29udGVudCA9IFN0cmluZyh0aGlzLmN1cnJlbnRXaW5uZXJQYWdlKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFRhYmxlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgY29uc3QgbmV3bGlzdCA9IGF3YWl0IHRoaXMuZ2V0QWxsV2lubmVyc1BhZ2luYXRpb24odGhpcy5jdXJyZW50V2lubmVyUGFnZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdsaXN0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLm5leHRCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBwcmV2UGFnZSgpIHtcbiAgICAgICAgY29uc3QgbWluUGFnZSA9IDE7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRXaW5uZXJQYWdlID4gbWluUGFnZSkge1xuICAgICAgICAgICAgdGhpcy5wcmV2QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm5leHRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFdpbm5lclBhZ2UgLT0gMTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50UGFnZVdpbm5lcicsIFN0cmluZyh0aGlzLmN1cnJlbnRXaW5uZXJQYWdlKSk7XG4gICAgICAgICAgICB0aGlzLnBhZ2VOdW1iZXJzLnRleHRDb250ZW50ID0gU3RyaW5nKHRoaXMuY3VycmVudFdpbm5lclBhZ2UpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50VGFibGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdldEFsbFdpbm5lcnNQYWdpbmF0aW9uKHRoaXMuY3VycmVudFdpbm5lclBhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMucHJldkJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIG9uU3ViV2luKCkge1xuICAgICAgICB0aGlzLmVtaXR0ZXIuc3Vic2NyaWJlKCdvblJlbW92ZScsIChjYXIpID0+IHRoaXMub25SZW1vdmVXaW4oY2FyKSk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5zdWJzY3JpYmUoJ3JlbmRlcldpbm5lcnMnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRUYWJsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHRoaXMuZ2V0QWxsV2lubmVyc1BhZ2luYXRpb24odGhpcy5jdXJyZW50V2lubmVyUGFnZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBvblJlbW92ZVdpbihjYXIpIHtcbiAgICAgICAgaWYgKGNhcikge1xuICAgICAgICAgICAgY29uc3QgeyBpZCB9ID0gY2FyO1xuICAgICAgICAgICAgY29uc3QgdG90YWxDYXJzID0gYXdhaXQgYXBpV2lubmVyc1NlcnZpY2VfMS5BcGlXaW5uZXJzU2VydmljZS5nZXRBbGxXaW4oKTtcbiAgICAgICAgICAgIGNvbnN0IHdpbm5lclRvRGVsZXRlID0gdG90YWxDYXJzLmZpbmQoKHdpbikgPT4gd2luLmNhcklkID09PSBpZCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnd2lubmVyVG9EZWxldGUnLCB3aW5uZXJUb0RlbGV0ZSk7XG4gICAgICAgICAgICBpZiAod2lubmVyVG9EZWxldGUpXG4gICAgICAgICAgICAgICAgYXdhaXQgYXBpV2lubmVyc1NlcnZpY2VfMS5BcGlXaW5uZXJzU2VydmljZS5kZWxldGVXaW4od2lubmVyVG9EZWxldGUuaWQpO1xuICAgICAgICAgICAgdGhpcy5nZXRXaW5uZXJzUXR5KCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRUYWJsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHRoaXMuZ2V0QWxsV2lubmVyc1BhZ2luYXRpb24odGhpcy5jdXJyZW50V2lubmVyUGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLldpbm5lcnMgPSBXaW5uZXJzO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgYXBwXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2FwcFwiKTtcbmNvbnN0IGVtaXR0ZXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvZW1pdHRlclwiKTtcbmNvbnN0IGVtaXR0ZXIgPSBuZXcgZW1pdHRlcl8xLkV2ZW50RW1pdHRlcigpO1xuY29uc3QgYXBwID0gbmV3IGFwcF8xLkFwcChlbWl0dGVyKTtcbmFwcC5hcHBlbmRFbGVtZW50KGRvY3VtZW50LmJvZHkpO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ2Fyc0FwaVNlcnZpY2UiLCJ0eXBlc18xIiwiYXBpU2VydmljZV8xIiwic3RhdGljIiwiQXBpU2VydmljZSIsImdldCIsIlBhdGgiLCJnYXJhZ2UiLCJ0cmFuc2ZlciIsImhlYWRlcnMiLCJwb3N0IiwiaWRDYXIiLCJkZWxldGUiLCJwdXQiLCJsaW1pdCIsImdldFBhZ2VzIiwia2V5Iiwic3RhdHVzIiwicnVuRW5naW5lIiwiZW5naW5lIiwicGFnZSIsIm1ldGhvZCIsImJvZHkiLCJ1cmwiLCJ0aGlzIiwiYmFzZVVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJKU09OIiwic3RyaW5naWZ5IiwianNvbiIsImVsZW1lbnQiLCJmZXRjaFJlcXVlc3QiLCJBcGlXaW5uZXJzU2VydmljZSIsIndpbm5lcnMiLCJ0eXBlU29ydCIsIm9yZGVyIiwiQXBwIiwiaGVhZGVyXzEiLCJnYXJhZ2VfMSIsIndpbm5lcnNfMSIsImNhcl8xIiwidmlld18xIiwiVmlldyIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJhcmd1bWVudHMiLCJoZWFkZXIiLCJIZWFkZXIiLCJlbWl0dGVyIiwiR2FyYWdlIiwiV2lubmVycyIsImNhcnMiLCJDYXJzIiwicm91dGVzIiwidGl0bGUiLCJyb3V0ZUVsZW1ldG5zIiwiYXBwZW5kRWxlbWVudCIsInBhcmVudCIsIndyYXBwZXIiLCJyZW5kZXJFbGVtZW50IiwiYXBwZW5kIiwic3Vic2NyaWJlIiwicm91dGUiLCJvbkNoYW5nZVJvdXRlIiwiYWN0aXZlUGFnZSIsImZpbmQiLCJoaWRkZW5QYWdlIiwic2hvdyIsImhpZGUiLCJhcGlDYXJTZXJ2aWNlXzEiLCJhcGlXaW5uZXJzU2VydmljZV8xIiwiY3VycmVudFBhZ2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiTnVtYmVyIiwiZ2V0Q2FycyIsIm9uU3ViIiwiZ2V0Q2Fyc1F0eSIsImFzeW5jIiwidG90YWxDYXJzIiwiZ2V0QWxsQ2FycyIsInF0eUNhcnMiLCJsZW5ndGgiLCJjYXJzTnVtYmVycyIsInRleHRDb250ZW50IiwiU3RyaW5nIiwicGFnZUdhcmFnZSIsInRvdGFsUXR5IiwiZGF0YUNhcnMiLCJnZXRQYWdpbmF0aW9uIiwiTWF0aCIsInJvdW5kIiwicGFnZU51bWJlcnMiLCJyZW5kZXJDYXJzIiwiY2FyTGlzdFdyYXBwZXIiLCJjYXJzV3JhcHBlciIsImdhcmFnZVN1YnRpdGxlIiwicGFnZVN1YnRpdGxlIiwicGFnZUNvbnRhaW5lciIsInByZXZCdG4iLCJuZXh0QnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm5leHRQYWdlIiwiYmluZCIsInByZXZQYWdlIiwiZm9yRWFjaCIsImNhciIsInNldFRpbWVvdXQiLCJyYWNlQ29udGFpbmVyIiwiaWQiLCJjYXJDb250YWluZXIiLCJjYXJCb3hSb3cxIiwiY2FyQm94Um93MiIsImVuZ2luZUJ0biIsInNlbGVjdENhciIsInJlbW92ZUNhciIsInN0YXJ0Q2FyIiwic3RvcENhciIsImNhck5hbWUiLCJuYW1lIiwiY2FySW1nQm94IiwiaW5uZXJIVE1MIiwic3R5bGUiLCJmaWxsIiwiY29sb3IiLCJmbGFnSW1nIiwib25TZWxlY3RDYXIiLCJvblJlbW92ZUNhciIsInN0YXJ0T25lRW5naW4iLCJzdG9wT25lRW5naW4iLCJldmVudCIsImdldElkQ2FyIiwic2VsZWN0ZWRDYXIiLCJnZXRDYXIiLCJvbkVtaXQiLCJjb25zb2xlIiwibG9nIiwib25VcGRhdGVDYXIiLCJvbkNyZWF0ZWRDYXIiLCJzdGFydFJhY2UiLCJzdG9wUmFjZSIsImRlbGV0ZUNhciIsIm5ld2NhciIsImltZ0NhciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjaGlsZHJlbiIsImNoaWxkTm9kZXMiLCJuYW1lQ2FyIiwibWF4UGFnZSIsImRpc2FibGVkIiwic2V0SXRlbSIsIm1pblBhZ2UiLCJpbnRlcnZhbEFuaW0iLCJzdGFydCIsIkRhdGUiLCJub3ciLCJjdXJyZW50Q2FyIiwiY2hhbmdlVG9TdGFydCIsIm9uRW5naW5DYXIiLCJFbmdpbmUiLCJzdGFydGVkIiwiZGlzYWJsZUJ1dHRvbnMiLCJmbGFnRGlzdCIsIndpbmRvdyIsInNjcmVlbiIsIndpZHRoIiwib2Zmc2V0TGVmdCIsIm9mZnNldFdpZHRoIiwibGVmdERpc3QiLCJmdWxsRGlzIiwicGFydERpcyIsInZlbG9jaXR5IiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiZW5kIiwid2lubmVyVGltZSIsInRvRml4ZWQiLCJhZGRXaW5uZXIiLCJzaG93V2luTWVzc2FnZSIsInRyYW5zZm9ybSIsInJ1bkNhciIsInRoZW4iLCJyZXMiLCJjYXRjaCIsImVycm9yIiwiRXJyb3IiLCJhY3RpdmV0ZUJ1dHRvbnMiLCJzdGFydFJhY2VCdG4iLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwic3RvcHBlZCIsImNhckNvbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwicmFjZUNhciIsInVuZGVmaW5lZCIsInB1c2giLCJjYXJJZCIsInRpbWUiLCJjb2xvckNhciIsImNoZWNrV2lubmVyIiwiZ2V0QWxsV2luIiwid2luIiwid2lucyIsInVwZGF0ZVdpbiIsIndpbm5lciIsImNyZWF0ZVdpbiIsInBvcFVwV3JhcHBlciIsIm92ZXJsYXkiLCJtZXNzYWdlVGV4dCIsInNob3dQb3B1cCIsInJlbW92ZUNoaWxkIiwicXVlcnlTZWxlY3RvckFsbCIsImJ0biIsImFkZCIsIkV2ZW50RW1pdHRlciIsInN1YnNjcmliZXJNYXAiLCJNYXAiLCJjYWxsYmFjayIsImV2ZW50Q2FsbGJhY2tzIiwiaGFzIiwic2V0IiwidW5zdWJzY3JpYmUiLCJmaWx0ZXIiLCJmbiIsInBhcmFtIiwic3Vic2NyaWJlciIsInJvdXRlXzEiLCJjYXJzQnJhbmRfMSIsInNldENvbG9yXzEiLCJSb3V0ZUVsZW1lbnQiLCJyZW5kZXIiLCJjcmVhdGVCdG4iLCJ1cGRhdGVCdG4iLCJjcmVhdGVJbnB1dCIsImdlbmVyYXRlTW9kZWxzIiwidXBkYXRlSW5wdXQiLCJjcmVhdGVQaWNrZXIiLCJ0eXBlIiwidXBkYXRlUGlja2VyIiwic3RhcnRCdG4iLCJzdG9wQnRuIiwiZ2VuZXJhdGVCdG4iLCJjb250cm9sbGVyc1dyYXBwZXIiLCJjcmVhdGVDb250YWluZXIiLCJ1cGRhdGVDb250YWluZXIiLCJjb250cm9sbGVyc0NvbnRhaW5lciIsIm9uVXBkYXRlTmFtZUNhciIsImdldFVwZGF0ZWRDYXIiLCJvbkNyZWF0ZUNhciIsIm9uR2VuZXJhdGVDYXJzIiwiY2xlYXJJbnB1dHMiLCJ1cGRhdGVDYXIiLCJzb21lQ2FyIiwiY3VycmVudFVwZGF0ZUNhciIsImRpc2FibGVkVXBkYXRlIiwibmV3Q2FyIiwidXBkYXRlZENhciIsImNyZWF0ZUNhck5hbWUiLCJjcmVhdGVkQ2FyIiwiY3JlYXRlQ2FyIiwibGVuZ3RoQmVmb3JlIiwiYXJyIiwiQXJyYXkiLCJtYXAiLCJzZXRDYXJDb2xvciIsInNsaWNlIiwiY2FyTmFtZXMiLCJzZWxlY3RDYXJOYW1lIiwidW5zaGlmdCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJuYXZFbGVtZW50cyIsImhlYWRpbmciLCJoZWFkZXJDb250ZW50IiwiaGVhZGVyTmF2Iiwic3VidGl0bGUiLCJ0ZXhCb3giLCJuYXZMaW5rIiwiY2hhbmdlUm91dGUiLCJnZXRBdHRyaWJ1dGUiLCJsaW5rIiwiaXNTaG93IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJtb2RlbHMiLCJicmFuZCIsInJhbmRvbU1vZGVsIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21CcmFuZCIsInNldENvbG9yIiwidG9TdHJpbmciLCJwYWRTdGFydCIsIlNvcnRXaW5uZXIiLCJTb3J0T3JkZXJXaW5uZXIiLCJ0YWciLCJhdHRyaWJ1dGUiLCJhc3NpZ24iLCJjdXJyZW50V2lubmVyUGFnZSIsImdldEFsbFdpbm5lcnNQYWdpbmF0aW9uIiwib25TdWJXaW4iLCJnZXRXaW5uZXJzUXR5IiwicXR5V2lucyIsImNvbnRhaW5lcldpblBhZ2UiLCJ3aW5ubmVyc0hlYWRlciIsInRhYmxlQ29udGFpbmVyIiwid2luVGFibGVIZWFkIiwiaWRXaW4iLCJjYXJJbWdXaW4iLCJjYXJOYW1lV2luIiwibnVtYm5lcldpbnMiLCJ0aW1lV2luIiwiZGF0YVdpbm5lcnMiLCJyZW5kZXJXaW5uZXIiLCJ3aW5uZXJMaXN0IiwiY29udGVudFRhYmxlIiwibmV3bGlzdCIsIm9uUmVtb3ZlV2luIiwid2lubmVyVG9EZWxldGUiLCJkZWxldGVXaW4iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiYXBwXzEiXSwic291cmNlUm9vdCI6IiJ9